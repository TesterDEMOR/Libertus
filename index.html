<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
  <meta name="theme-color" content="#0a0a0f">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Libertus">
  <meta name="description" content="Libertus - Local AI. Private on-device intelligence.">
  <title>Libertus</title>
  <link rel="icon" type="image/svg+xml" href="./favicon.svg">
  <link rel="apple-touch-icon" href="./favicon.svg">
  <link rel="manifest" href="./manifest.json">
  <script type="module" crossorigin>/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Rt=globalThis,Po=Rt.ShadowRoot&&(Rt.ShadyCSS===void 0||Rt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Lo=Symbol(),Yo=new WeakMap;let Qa=class{constructor(t,i,o){if(this._$cssResult$=!0,o!==Lo)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=i}get styleSheet(){let t=this.o;const i=this.t;if(Po&&t===void 0){const o=i!==void 0&&i.length===1;o&&(t=Yo.get(i)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),o&&Yo.set(i,t))}return t}toString(){return this.cssText}};const ws=e=>new Qa(typeof e=="string"?e:e+"",void 0,Lo),xs=(e,...t)=>{const i=e.length===1?e[0]:t.reduce((o,a,n)=>o+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(a)+e[n+1],e[0]);return new Qa(i,e,Lo)},_s=(e,t)=>{if(Po)e.adoptedStyleSheets=t.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of t){const o=document.createElement("style"),a=Rt.litNonce;a!==void 0&&o.setAttribute("nonce",a),o.textContent=i.cssText,e.appendChild(o)}},Ko=Po?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let i="";for(const o of t.cssRules)i+=o.cssText;return ws(i)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:ks,defineProperty:$s,getOwnPropertyDescriptor:As,getOwnPropertyNames:Ss,getOwnPropertySymbols:Es,getPrototypeOf:Ts}=Object,si=globalThis,Jo=si.trustedTypes,Ps=Jo?Jo.emptyScript:"",Ls=si.reactiveElementPolyfillSupport,ut=(e,t)=>e,Ft={toAttribute(e,t){switch(t){case Boolean:e=e?Ps:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=e!==null;break;case Number:i=e===null?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch{i=null}}return i}},Io=(e,t)=>!ks(e,t),Xo={attribute:!0,type:String,converter:Ft,reflect:!1,useDefault:!1,hasChanged:Io};Symbol.metadata??=Symbol("metadata"),si.litPropertyMetadata??=new WeakMap;let Re=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,i=Xo){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(t,i),!i.noAccessor){const o=Symbol(),a=this.getPropertyDescriptor(t,o,i);a!==void 0&&$s(this.prototype,t,a)}}static getPropertyDescriptor(t,i,o){const{get:a,set:n}=As(this.prototype,t)??{get(){return this[i]},set(s){this[i]=s}};return{get:a,set(s){const r=a?.call(this);n?.call(this,s),this.requestUpdate(t,r,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??Xo}static _$Ei(){if(this.hasOwnProperty(ut("elementProperties")))return;const t=Ts(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(ut("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ut("properties"))){const i=this.properties,o=[...Ss(i),...Es(i)];for(const a of o)this.createProperty(a,i[a])}const t=this[Symbol.metadata];if(t!==null){const i=litPropertyMetadata.get(t);if(i!==void 0)for(const[o,a]of i)this.elementProperties.set(o,a)}this._$Eh=new Map;for(const[i,o]of this.elementProperties){const a=this._$Eu(i,o);a!==void 0&&this._$Eh.set(a,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const i=[];if(Array.isArray(t)){const o=new Set(t.flat(1/0).reverse());for(const a of o)i.unshift(Ko(a))}else t!==void 0&&i.push(Ko(t));return i}static _$Eu(t,i){const o=i.attribute;return o===!1?void 0:typeof o=="string"?o:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),this.renderRoot!==void 0&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,i=this.constructor.elementProperties;for(const o of i.keys())this.hasOwnProperty(o)&&(t.set(o,this[o]),delete this[o]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return _s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,i,o){this._$AK(t,o)}_$ET(t,i){const o=this.constructor.elementProperties.get(t),a=this.constructor._$Eu(t,o);if(a!==void 0&&o.reflect===!0){const n=(o.converter?.toAttribute!==void 0?o.converter:Ft).toAttribute(i,o.type);this._$Em=t,n==null?this.removeAttribute(a):this.setAttribute(a,n),this._$Em=null}}_$AK(t,i){const o=this.constructor,a=o._$Eh.get(t);if(a!==void 0&&this._$Em!==a){const n=o.getPropertyOptions(a),s=typeof n.converter=="function"?{fromAttribute:n.converter}:n.converter?.fromAttribute!==void 0?n.converter:Ft;this._$Em=a;const r=s.fromAttribute(i,n.type);this[a]=r??this._$Ej?.get(a)??r,this._$Em=null}}requestUpdate(t,i,o,a=!1,n){if(t!==void 0){const s=this.constructor;if(a===!1&&(n=this[t]),o??=s.getPropertyOptions(t),!((o.hasChanged??Io)(n,i)||o.useDefault&&o.reflect&&n===this._$Ej?.get(t)&&!this.hasAttribute(s._$Eu(t,o))))return;this.C(t,i,o)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(t,i,{useDefault:o,reflect:a,wrapped:n},s){o&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,s??i??this[t]),n!==!0||s!==void 0)||(this._$AL.has(t)||(this.hasUpdated||o||(i=void 0),this._$AL.set(t,i)),a===!0&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[a,n]of this._$Ep)this[a]=n;this._$Ep=void 0}const o=this.constructor.elementProperties;if(o.size>0)for(const[a,n]of o){const{wrapped:s}=n,r=this[a];s!==!0||this._$AL.has(a)||r===void 0||this.C(a,void 0,n,r)}}let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),this._$EO?.forEach(o=>o.hostUpdate?.()),this.update(i)):this._$EM()}catch(o){throw t=!1,this._$EM(),o}t&&this._$AE(i)}willUpdate(t){}_$AE(t){this._$EO?.forEach(i=>i.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(i=>this._$ET(i,this[i])),this._$EM()}updated(t){}firstUpdated(t){}};Re.elementStyles=[],Re.shadowRootOptions={mode:"open"},Re[ut("elementProperties")]=new Map,Re[ut("finalized")]=new Map,Ls?.({ReactiveElement:Re}),(si.reactiveElementVersions??=[]).push("2.1.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jo=globalThis,Qo=e=>e,qt=jo.trustedTypes,ea=qt?qt.createPolicy("lit-html",{createHTML:e=>e}):void 0,en="$lit$",me=`lit$${Math.random().toFixed(9).slice(2)}$`,tn="?"+me,Is=`<${tn}>`,Ie=document,xt=()=>Ie.createComment(""),_t=e=>e===null||typeof e!="object"&&typeof e!="function",Co=Array.isArray,js=e=>Co(e)||typeof e?.[Symbol.iterator]=="function",Ei=`[ 	
\f\r]`,st=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ta=/-->/g,ia=/>/g,xe=RegExp(`>|${Ei}(?:([^\\s"'>=/]+)(${Ei}*=${Ei}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),oa=/'/g,aa=/"/g,on=/^(?:script|style|textarea|title)$/i,Cs=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),Ds=Cs(1),je=Symbol.for("lit-noChange"),L=Symbol.for("lit-nothing"),na=new WeakMap,Pe=Ie.createTreeWalker(Ie,129);function an(e,t){if(!Co(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return ea!==void 0?ea.createHTML(t):t}const Os=(e,t)=>{const i=e.length-1,o=[];let a,n=t===2?"<svg>":t===3?"<math>":"",s=st;for(let r=0;r<i;r++){const l=e[r];let c,h,d=-1,p=0;for(;p<l.length&&(s.lastIndex=p,h=s.exec(l),h!==null);)p=s.lastIndex,s===st?h[1]==="!--"?s=ta:h[1]!==void 0?s=ia:h[2]!==void 0?(on.test(h[2])&&(a=RegExp("</"+h[2],"g")),s=xe):h[3]!==void 0&&(s=xe):s===xe?h[0]===">"?(s=a??st,d=-1):h[1]===void 0?d=-2:(d=s.lastIndex-h[2].length,c=h[1],s=h[3]===void 0?xe:h[3]==='"'?aa:oa):s===aa||s===oa?s=xe:s===ta||s===ia?s=st:(s=xe,a=void 0);const g=s===xe&&e[r+1].startsWith("/>")?" ":"";n+=s===st?l+Is:d>=0?(o.push(c),l.slice(0,d)+en+l.slice(d)+me+g):l+me+(d===-2?r:g)}return[an(e,n+(e[i]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),o]};let Hi=class nn{constructor({strings:t,_$litType$:i},o){let a;this.parts=[];let n=0,s=0;const r=t.length-1,l=this.parts,[c,h]=Os(t,i);if(this.el=nn.createElement(c,o),Pe.currentNode=this.el.content,i===2||i===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(a=Pe.nextNode())!==null&&l.length<r;){if(a.nodeType===1){if(a.hasAttributes())for(const d of a.getAttributeNames())if(d.endsWith(en)){const p=h[s++],g=a.getAttribute(d).split(me),x=/([.?@])?(.*)/.exec(p);l.push({type:1,index:n,name:x[2],strings:g,ctor:x[1]==="."?zs:x[1]==="?"?Rs:x[1]==="@"?Us:ri}),a.removeAttribute(d)}else d.startsWith(me)&&(l.push({type:6,index:n}),a.removeAttribute(d));if(on.test(a.tagName)){const d=a.textContent.split(me),p=d.length-1;if(p>0){a.textContent=qt?qt.emptyScript:"";for(let g=0;g<p;g++)a.append(d[g],xt()),Pe.nextNode(),l.push({type:2,index:++n});a.append(d[p],xt())}}}else if(a.nodeType===8)if(a.data===tn)l.push({type:2,index:n});else{let d=-1;for(;(d=a.data.indexOf(me,d+1))!==-1;)l.push({type:7,index:n}),d+=me.length-1}n++}}static createElement(t,i){const o=Ie.createElement("template");return o.innerHTML=t,o}};function Ge(e,t,i=e,o){if(t===je)return t;let a=o!==void 0?i._$Co?.[o]:i._$Cl;const n=_t(t)?void 0:t._$litDirective$;return a?.constructor!==n&&(a?._$AO?.(!1),n===void 0?a=void 0:(a=new n(e),a._$AT(e,i,o)),o!==void 0?(i._$Co??=[])[o]=a:i._$Cl=a),a!==void 0&&(t=Ge(e,a._$AS(e,t.values),a,o)),t}let Ms=class{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:o}=this._$AD,a=(t?.creationScope??Ie).importNode(i,!0);Pe.currentNode=a;let n=Pe.nextNode(),s=0,r=0,l=o[0];for(;l!==void 0;){if(s===l.index){let c;l.type===2?c=new Do(n,n.nextSibling,this,t):l.type===1?c=new l.ctor(n,l.name,l.strings,this,t):l.type===6&&(c=new Bs(n,this,t)),this._$AV.push(c),l=o[++r]}s!==l?.index&&(n=Pe.nextNode(),s++)}return Pe.currentNode=Ie,a}p(t){let i=0;for(const o of this._$AV)o!==void 0&&(o.strings!==void 0?(o._$AI(t,o,i),i+=o.strings.length-2):o._$AI(t[i])),i++}},Do=class sn{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,o,a){this.type=2,this._$AH=L,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=o,this.options=a,this._$Cv=a?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&t?.nodeType===11&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=Ge(this,t,i),_t(t)?t===L||t==null||t===""?(this._$AH!==L&&this._$AR(),this._$AH=L):t!==this._$AH&&t!==je&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):js(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==L&&_t(this._$AH)?this._$AA.nextSibling.data=t:this.T(Ie.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:o}=t,a=typeof o=="number"?this._$AC(t):(o.el===void 0&&(o.el=Hi.createElement(an(o.h,o.h[0]),this.options)),o);if(this._$AH?._$AD===a)this._$AH.p(i);else{const n=new Ms(a,this),s=n.u(this.options);n.p(i),this.T(s),this._$AH=n}}_$AC(t){let i=na.get(t.strings);return i===void 0&&na.set(t.strings,i=new Hi(t)),i}k(t){Co(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let o,a=0;for(const n of t)a===i.length?i.push(o=new sn(this.O(xt()),this.O(xt()),this,this.options)):o=i[a],o._$AI(n),a++;a<i.length&&(this._$AR(o&&o._$AB.nextSibling,a),i.length=a)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t!==this._$AB;){const o=Qo(t).nextSibling;Qo(t).remove(),t=o}}setConnected(t){this._$AM===void 0&&(this._$Cv=t,this._$AP?.(t))}},ri=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,o,a,n){this.type=1,this._$AH=L,this._$AN=void 0,this.element=t,this.name=i,this._$AM=a,this.options=n,o.length>2||o[0]!==""||o[1]!==""?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=L}_$AI(t,i=this,o,a){const n=this.strings;let s=!1;if(n===void 0)t=Ge(this,t,i,0),s=!_t(t)||t!==this._$AH&&t!==je,s&&(this._$AH=t);else{const r=t;let l,c;for(t=n[0],l=0;l<n.length-1;l++)c=Ge(this,r[o+l],i,l),c===je&&(c=this._$AH[l]),s||=!_t(c)||c!==this._$AH[l],c===L?t=L:t!==L&&(t+=(c??"")+n[l+1]),this._$AH[l]=c}s&&!a&&this.j(t)}j(t){t===L?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},zs=class extends ri{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===L?void 0:t}},Rs=class extends ri{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==L)}},Us=class extends ri{constructor(t,i,o,a,n){super(t,i,o,a,n),this.type=5}_$AI(t,i=this){if((t=Ge(this,t,i,0)??L)===je)return;const o=this._$AH,a=t===L&&o!==L||t.capture!==o.capture||t.once!==o.once||t.passive!==o.passive,n=t!==L&&(o===L||a);a&&this.element.removeEventListener(this.name,this,o),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}},Bs=class{constructor(t,i,o){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(t){Ge(this,t)}};const Ns=jo.litHtmlPolyfillSupport;Ns?.(Hi,Do),(jo.litHtmlVersions??=[]).push("3.3.2");const Hs=(e,t,i)=>{const o=i?.renderBefore??t;let a=o._$litPart$;if(a===void 0){const n=i?.renderBefore??null;o._$litPart$=a=new Do(t.insertBefore(xt(),n),n,void 0,i??{})}return a._$AI(e),a};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Oo=globalThis;let ft=class extends Re{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Hs(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return je}};ft._$litElement$=!0,ft.finalized=!0,Oo.litElementHydrateSupport?.({LitElement:ft});const Fs=Oo.litElementPolyfillSupport;Fs?.({LitElement:ft});(Oo.litElementVersions??=[]).push("4.2.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qs={attribute:!0,type:String,converter:Ft,reflect:!1,hasChanged:Io},Vs=(e=qs,t,i)=>{const{kind:o,metadata:a}=i;let n=globalThis.litPropertyMetadata.get(a);if(n===void 0&&globalThis.litPropertyMetadata.set(a,n=new Map),o==="setter"&&((e=Object.create(e)).wrapped=!0),n.set(i.name,e),o==="accessor"){const{name:s}=i;return{set(r){const l=t.get.call(this);t.set.call(this,r),this.requestUpdate(s,l,e,!0,r)},init(r){return r!==void 0&&this.C(s,void 0,e,r),r}}}if(o==="setter"){const{name:s}=i;return function(r){const l=this[s];t.call(this,r),this.requestUpdate(s,l,e,!0,r)}}throw Error("Unsupported decorator location: "+o)};function rn(e){return(t,i)=>typeof i=="object"?Vs(e,t,i):((o,a,n)=>{const s=a.hasOwnProperty(n);return a.constructor.createProperty(n,o),s?Object.getOwnPropertyDescriptor(a,n):void 0})(e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Gs(e){return rn({...e,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ws={ATTRIBUTE:1},Zs=e=>(...t)=>({_$litDirective$:e,values:t});let Ys=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,i,o){this._$Ct=t,this._$AM=i,this._$Ci=o}_$AS(t,i){return this.update(t,i)}update(t,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ks=Zs(class extends Ys{constructor(e){if(super(e),e.type!==Ws.ATTRIBUTE||e.name!=="class"||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(o=>o!=="")));for(const o in t)t[o]&&!this.nt?.has(o)&&this.st.add(o);return this.render(t)}const i=e.element.classList;for(const o of this.st)o in t||(i.remove(o),this.st.delete(o));for(const o in t){const a=!!t[o];a===this.st.has(o)||this.nt?.has(o)||(a?(i.add(o),this.st.add(o)):(i.remove(o),this.st.delete(o)))}return je}});var f={d:(e,t)=>{for(var i in t)f.o(t,i)&&!f.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},Fi={};f.r(Fi),f.d(Fi,{templates:()=>ar});var qi={};f.r(qi),f.d(qi,{templates:()=>nr});var Vi={};f.r(Vi),f.d(Vi,{templates:()=>sr});var Gi={};f.r(Gi),f.d(Gi,{templates:()=>rr});var Wi={};f.r(Wi),f.d(Wi,{templates:()=>lr});var Zi={};f.r(Zi),f.d(Zi,{templates:()=>cr});var Yi={};f.r(Yi),f.d(Yi,{templates:()=>dr});var Ki={};f.r(Ki),f.d(Ki,{templates:()=>hr});var Ji={};f.r(Ji),f.d(Ji,{templates:()=>pr});var Xi={};f.r(Xi),f.d(Xi,{templates:()=>ur});var Qi={};f.r(Qi),f.d(Qi,{templates:()=>fr});var eo={};f.r(eo),f.d(eo,{templates:()=>gr});var to={};f.r(to),f.d(to,{templates:()=>br});var io={};f.r(io),f.d(io,{templates:()=>mr});var oo={};f.r(oo),f.d(oo,{templates:()=>vr});var ao={};f.r(ao),f.d(ao,{templates:()=>yr});var no={};f.r(no),f.d(no,{templates:()=>wr});var so={};f.r(so),f.d(so,{templates:()=>xr});var ro={};f.r(ro),f.d(ro,{templates:()=>_r});var lo={};f.r(lo),f.d(lo,{templates:()=>kr});var co={};f.r(co),f.d(co,{templates:()=>$r});var ho={};f.r(ho),f.d(ho,{templates:()=>Ar});var po={};f.r(po),f.d(po,{templates:()=>Sr});var uo={};f.r(uo),f.d(uo,{templates:()=>Er});var fo={};f.r(fo),f.d(fo,{templates:()=>Tr});const m=(e=>{var t={};return f.d(t,e),t})({LitElement:()=>ft,css:()=>xs,html:()=>Ds}),ln=(e,t,i)=>{let o=e[0];for(let a=1;a<e.length;a++)o+=t[i?i[a-1]:a-1],o+=e[a];return o},cn=e=>{return typeof(t=e)!="string"&&"strTag"in t?ln(e.strings,e.values):e;var t};let R=cn,sa=!1;const go="lit-localize-status";let Js=class{constructor(t){this.__litLocalizeEventHandler=i=>{i.detail.status==="ready"&&this.host.requestUpdate()},this.host=t}hostConnected(){window.addEventListener(go,this.__litLocalizeEventHandler)}hostDisconnected(){window.removeEventListener(go,this.__litLocalizeEventHandler)}};const Xs=e=>e.addController(new Js(e));let dn=class{constructor(){this.settled=!1,this.promise=new Promise(((t,i)=>{this._resolve=t,this._reject=i}))}resolve(t){this.settled=!0,this._resolve(t)}reject(t){this.settled=!0,this._reject(t)}};const re=[];for(let e=0;e<256;e++)re[e]=(e>>4&15).toString(16)+(15&e).toString(16);function Qs(e,t){return(t?"h":"s")+(function(i){let o=0,a=8997,n=0,s=33826,r=0,l=40164,c=0,h=52210;for(let d=0;d<i.length;d++)a^=i.charCodeAt(d),o=435*a,n=435*s,r=435*l,c=435*h,r+=a<<8,c+=s<<8,n+=o>>>16,a=65535&o,r+=n>>>16,s=65535&n,h=c+(r>>>16)&65535,l=65535&r;return re[h>>8]+re[255&h]+re[l>>8]+re[255&l]+re[s>>8]+re[255&s]+re[a>>8]+re[255&a]})(typeof e=="string"?e:e.join(""))}const ra=new WeakMap,la=new Map;function er(e,t,i){if(e){const o=i?.id??(function(n){const s=typeof n=="string"?n:n.strings;let r=la.get(s);return r===void 0&&(r=Qs(s,typeof n!="string"&&!("strTag"in n)),la.set(s,r)),r})(t),a=e[o];if(a){if(typeof a=="string")return a;if("strTag"in a)return ln(a.strings,t.values,a.values);{let n=ra.get(a);return n===void 0&&(n=a.values,ra.set(a,n)),{...a,values:n.map((s=>t.values[s]))}}}}return cn(t)}function Ti(e){window.dispatchEvent(new CustomEvent(go,{detail:e}))}let Pi,hn,Vt,bo,pn,Gt="",Ae=new dn;Ae.resolve();let Ct=0;const tr=()=>Gt,ir=e=>{if(e===(Pi??Gt))return Ae.promise;if(!Vt||!bo)throw Error("Internal error");if(!Vt.has(e))throw Error("Invalid locale code");Ct++;const t=Ct;return Pi=e,Ae.settled&&(Ae=new dn),Ti({status:"loading",loadingLocale:e}),(e===hn?Promise.resolve({templates:void 0}):bo(e)).then((i=>{Ct===t&&(Gt=e,Pi=void 0,pn=i.templates,Ti({status:"ready",readyLocale:e}),Ae.resolve())}),(i=>{Ct===t&&(Ti({status:"error",errorLocale:e,errorMessage:i.toString()}),Ae.reject(i))})),Ae.promise},_=(e=>{var t={};return f.d(t,e),t})({property:()=>rn,state:()=>Gs}),or=["cs","da","de","el","es","fa","fr","hu","it","ja","km","ko","nl","no","pl","pt","ru","sk","sr","sv","tr","uk","vi","zh-CN","zh-HK"],ar={s1488e73779d7682f:"1) Откройте меню вашего браузера",s182ab2d6c997515f:"Добавьте его на экран «Домой» — это откроет дополнительные возможности и сделает использование удобнее.",s1b9047d53d9f9d22:'2) Нажмите "Поделиться"',s2d90afa5dcca2c0e:'3) Прокрутите вниз до "На экран «Домой»"',s37a9e8aec5713460:"Подробнее",s4593f304dac8848c:'2) Нажмите "Добавить на главный экран"',s54cfbb14f46396d4:"1) Откройте в вашем основном браузере",s6196153c4b0c1ea0:"Установить",s922329d6f6213590:"Добавить в Dock",sa5ef80b4bb9b39f8:"Свернуть",sa7551383d1897fcc:'2) Нажмите "Добавить в Dock"',sba52286c21552a4e:"Установите это на ваше устройство, чтобы получить дополнительные возможности и удобство использования.",sc79fd7641eb9a975:"Спрятать Инструкцию",scdaf4bbff76674c8:"На экран «Домой»",se740f75b95a51807:"Добавьте его в Dock — это откроет дополнительные возможности и сделает использование удобнее.",sfea652f6580ff086:"Этот веб-сайт имеет функционал приложения."},nr={s1488e73779d7682f:"1) Tarayıcı menünüzü açın",s182ab2d6c997515f:"Daha iyi bir deneyim ve kolay erişim için Ana Ekranınıza ekleyin.",s1b9047d53d9f9d22:"2) Gezinme çubuğunda Paylaş'a basın",s2d90afa5dcca2c0e:'3) "Ana Ekrana Ekle" seçeneğine kadar aşağı kaydırın',s37a9e8aec5713460:"Daha Fazla",s4593f304dac8848c:'2) "Ana Ekrana Ekle"ye dokunun',s54cfbb14f46396d4:"1) Ana tarayıcınızda açın",s6196153c4b0c1ea0:"Yükle",s922329d6f6213590:"Dock’a Ekle",sa5ef80b4bb9b39f8:"Küçült",sa7551383d1897fcc:"2) Dock’a ekleye basın",sba52286c21552a4e:"Daha iyi bir deneyim ve kolay erişim için cihazınıza yükleyin.",sc79fd7641eb9a975:"Talimatları gizle",scdaf4bbff76674c8:"Ana Ekrana Ekle",se740f75b95a51807:"Daha iyi bir deneyim ve kolay erişim için Dock’a ekleyin.",sfea652f6580ff086:"Bu site uygulama işlevselliğine sahiptir."},sr={s1488e73779d7682f:"1) Öffnen Sie das Menü Ihres Browsers",s182ab2d6c997515f:"Fügen Sie es zu Ihrem Startbildschirm hinzu, um eine umfassende Erfahrung und einen leichten Zugriff zu erhalten.",s1b9047d53d9f9d22:"2) Drücken Sie auf Teilen in der Navigationsleiste",s2d90afa5dcca2c0e:'3) Scrollen Sie nach unten zu "Zum Startbildschirm hinzufügen"',s37a9e8aec5713460:"Mehr",s4593f304dac8848c:'2) Tippen Sie auf "Zum Startbildschirm hinzufügen"',s54cfbb14f46396d4:"1) Öffnen Sie es in Ihrem Hauptbrowser",s6196153c4b0c1ea0:"Installieren",s922329d6f6213590:"Zum Dock hinzufügen",sa5ef80b4bb9b39f8:"Weniger",sa7551383d1897fcc:"2) Drücken Sie auf Zum Dock hinzufügen",sba52286c21552a4e:"Installieren Sie es auf Ihrem Gerät für eine umfassende Erfahrung und einen leichten Zugriff.",sc79fd7641eb9a975:"Anleitung ausblenden",scdaf4bbff76674c8:"Hinzufügen zum Startbildschirm",se740f75b95a51807:"Fügen Sie es zu Ihrem Dock hinzu, um eine umfassende Erfahrung und einen leichten Zugriff zu erhalten.",sfea652f6580ff086:"Diese Website verfügt über App-Funktionalität."},rr={s1488e73779d7682f:"1) Abre el menú de tu navegador",s182ab2d6c997515f:"Añádelo a tu pantalla de inicio para una experiencia amplia y acceso fácil.",s1b9047d53d9f9d22:"2) Presionar Compartir en la barra de direcciones",s2d90afa5dcca2c0e:'3) Desplázate hacia abajo hasta "Añadir a pantalla de inicio"',s37a9e8aec5713460:"Más",s4593f304dac8848c:'2) Toca "Añadir a pantalla de inicio"',s54cfbb14f46396d4:"1) Abre en tu navegador principal",s6196153c4b0c1ea0:"Instalar",s922329d6f6213590:"Añadir al Dock",sa5ef80b4bb9b39f8:"Menos",sa7551383d1897fcc:"2) Presionar Añadir al Dock",sba52286c21552a4e:"Instálalo en tu dispositivo para una experiencia amplia y acceso fácil.",sc79fd7641eb9a975:"Esconder instrucciones",scdaf4bbff76674c8:"Añadir a pantalla de inicio",se740f75b95a51807:"Añádelo a tu Dock para una experiencia amplia y acceso fácil.",sfea652f6580ff086:"Este sitio tiene funcionalidad de aplicación."},lr={s1488e73779d7682f:"1) Open je browsermenu",s182ab2d6c997515f:"Voeg het toe aan je startscherm voor een uitgebreide ervaring en gemakkelijke toegang.",s1b9047d53d9f9d22:"2) Druk op delen in de navigatiebalk",s2d90afa5dcca2c0e:'3) Scrol naar beneden naar "Toevoegen aan startscherm"',s37a9e8aec5713460:"Meer",s4593f304dac8848c:'2) Tik op "Toevoegen aan startscherm"',s54cfbb14f46396d4:"1) Open in je hoofdprogramma",s6196153c4b0c1ea0:"Installeren",s922329d6f6213590:"Toevoegen aan Dock",sa5ef80b4bb9b39f8:"Minder",sa7551383d1897fcc:"2) Druk op Toevoegen aan Dock",sba52286c21552a4e:"Installeer het op je apparaat voor een uitgebreide ervaring en gemakkelijke toegang.",sc79fd7641eb9a975:"Instructie verbergen",scdaf4bbff76674c8:"Toevoegen aan het startscherm",se740f75b95a51807:"Voeg het toe aan je Dock voor een uitgebreide ervaring en makkelijke toegang.",sfea652f6580ff086:"Deze site heeft app-functionaliteit."},cr={s1488e73779d7682f:"1) Ανοίξτε το μενού του περιηγητή σας",s182ab2d6c997515f:"Προσθέστε το στην Οθόνη Αφετηρίας για εκτεταμένη εμπειρία και εύκολη πρόσβαση.",s1b9047d53d9f9d22:'2) Πατήστε "Κοινή χρήση" στη γραμμή πλοήγησης',s2d90afa5dcca2c0e:'3) Κάντε κύλιση προς τα κάτω στο "Προσθήκη στην οθόνη Αφετηρίας"',s37a9e8aec5713460:"Περισσότερα",s4593f304dac8848c:'2) Πατήστε "Προσθήκη στην οθόνη Αφετηρίας"',s54cfbb14f46396d4:"1) Ανοίξτε στον κύριο περιηγητή σας",s6196153c4b0c1ea0:"Εγκατάσταση",s922329d6f6213590:"Προσθήκη στο Dock",sa5ef80b4bb9b39f8:"Λιγότερα",sa7551383d1897fcc:'2) Πατήστε "Προσθήκη στο Dock"',sba52286c21552a4e:"Εγκαταστήστε το στη συσκευή σας για εκτεταμένη εμπειρία και εύκολη πρόσβαση.",sc79fd7641eb9a975:"Απόκρυψη Οδηγιών",scdaf4bbff76674c8:"Προσθήκη στην οθόνη Αφετηρίας",se740f75b95a51807:"Προσθέστε το στο Dock για εκτεταμένη εμπειρία και εύκολη πρόσβαση.",sfea652f6580ff086:"Αυτός ο ιστότοπος έχει λειτουργικότητα εφαρμογής."},dr={s1488e73779d7682f:"1) Ouvrez le menu de votre navigateur",s182ab2d6c997515f:"Ajoutez-le à votre écran d'accueil pour une expérience étendue et un accès facile.",s1b9047d53d9f9d22:"2) Appuyez sur Partager dans la barre de navigation",s2d90afa5dcca2c0e:`3) Faites défiler vers le bas jusqu'à "Ajouter à l'écran d'accueil"`,s37a9e8aec5713460:"Plus",s4593f304dac8848c:`2) Touchez "Ajouter à l'écran d'accueil"`,s54cfbb14f46396d4:"1) Ouvrir dans votre navigateur principal",s6196153c4b0c1ea0:"Installer",s922329d6f6213590:"Ajouter au Dock",sa5ef80b4bb9b39f8:"Moins",sa7551383d1897fcc:"2) Appuyez sur Ajouter au Dock",sba52286c21552a4e:"Installez-le sur votre appareil pour une expérience complète et un accès facile.",sc79fd7641eb9a975:"Masquer les instructions",scdaf4bbff76674c8:"Ajouter à l'écran d'accueil",se740f75b95a51807:"Ajoutez-le à votre Dock pour une expérience étendue et un accès facile.",sfea652f6580ff086:"Ce site possède des fonctionnalités d'application."},hr={s1488e73779d7682f:"1) Отворите мени вашег прегледача",s182ab2d6c997515f:"Додајте га на Home Screen за широке могућности и лак приступ.",s1b9047d53d9f9d22:"2) Притисните Share у навигационој траци",s2d90afa5dcca2c0e:'3) Померите се надоле до "Add to Home Screen"',s37a9e8aec5713460:"Више",s4593f304dac8848c:'2) Додирните "Add to Home Screen"',s54cfbb14f46396d4:"1) Отворите у вашем главном прегледачу",s6196153c4b0c1ea0:"Инсталирај",sa5ef80b4bb9b39f8:"Мање",sa7551383d1897fcc:"3) Притисните Add to Dock",sba52286c21552a4e:"Инсталирајте га на вашем уређају за широке могућности и лак приступ.",sc79fd7641eb9a975:"Сакриј упутство",se740f75b95a51807:"Додајте га у вашу Dock за широке могућности и лак приступ.",sfea652f6580ff086:"Овај сајт има функционалност апликације.",s922329d6f6213590:"Add to Dock",scdaf4bbff76674c8:"Add to Home Screen"},pr={s1488e73779d7682f:"1) Otwórz menu przeglądarki",s182ab2d6c997515f:"Dodaj do swojego Ekranu Głównego, aby uzyskać bogate doświadczenie i łatwy dostęp.",s1b9047d53d9f9d22:'2) Wybierz "Udostępnij"',s2d90afa5dcca2c0e:'3) Przewiń w dół do opcji "Dodaj do Ekranu Głównego"',s37a9e8aec5713460:"Więcej",s4593f304dac8848c:'2) Naciśnij "Dodaj do Ekranu Głównego"',s54cfbb14f46396d4:"1) Otwórz w swojej głównej przeglądarce",s6196153c4b0c1ea0:"Zainstaluj",s922329d6f6213590:"Dodaj do Docka",sa5ef80b4bb9b39f8:"Mniej",sa7551383d1897fcc:'2) Wybierz "Dodaj do Docka"',sba52286c21552a4e:"Zainstaluj na swoim urządzeniu, aby uzyskać bogate doświadczenie i łatwy dostęp.",sc79fd7641eb9a975:"Ukryj instrukcję",scdaf4bbff76674c8:"Dodaj do Ekranu Głównego",se740f75b95a51807:"Dodaj do swojego Docka, aby uzyskać bogate doświadczenie i łatwy dostęp.",sfea652f6580ff086:"Ta strona posiada funkcje aplikacji."},ur={s1488e73779d7682f:"1) Відкрити меню браузера",s182ab2d6c997515f:"Додайте на Домашній екран для зручного доступу та ширших можливостей.",s1b9047d53d9f9d22:"2) Натиснути «Поділитися»",s2d90afa5dcca2c0e:"3) Прокрутіть вниз до «На Початковий экран»",s37a9e8aec5713460:"Детальніше",s4593f304dac8848c:"2) Натиснути «На Початковий экран»",s54cfbb14f46396d4:"1) Відкрити у вашому основному браузері",s6196153c4b0c1ea0:"Встановити",s922329d6f6213590:"Додати на Dock",sa5ef80b4bb9b39f8:"Згорнути",sa7551383d1897fcc:"2) Натиснути «Додати на Dock»",sba52286c21552a4e:"Встановіть на ваш пристрій для зручного доступу та ширших можливостей.",sc79fd7641eb9a975:"Сховати Інструкцію",scdaf4bbff76674c8:"На Початковий экран",se740f75b95a51807:"Додайте на панель Dock для зручного доступу та ширших можливостей.",sfea652f6580ff086:"Цей сайт має функції додатку."},fr={s1488e73779d7682f:"1) 打開您的瀏覽器菜單",s182ab2d6c997515f:"將其加入主屏幕，以獲得更豐富的體驗和便捷訪問。",s1b9047d53d9f9d22:"2) 點擊列表上的分享按鈕",s2d90afa5dcca2c0e:"3) 向下滾動到「添加到主屏幕」",s37a9e8aec5713460:"詳細資訊",s4593f304dac8848c:"2) 點擊「添加到主屏幕」",s54cfbb14f46396d4:"1) 在您的主要瀏覽器中打開",s6196153c4b0c1ea0:"安裝",s922329d6f6213590:"添加到Dock欄",sa5ef80b4bb9b39f8:"簡短資訊",sa7551383d1897fcc:"2) 點選添加到Dock欄",sba52286c21552a4e:"在您的裝置上安裝它，以獲得更豐富的體驗和便捷訪問。",sc79fd7641eb9a975:"隱藏安裝流程",scdaf4bbff76674c8:"將App加入主畫面",se740f75b95a51807:"將其加入你的Dock欄，以獲得更豐富的體驗和便捷訪問。",sfea652f6580ff086:"此網站具有應用程式功能。"},gr={s1488e73779d7682f:"1) 打开浏览器菜单",s182ab2d6c997515f:"将其添加到主屏幕，以享受更丰富的体验并便于访问。",s1b9047d53d9f9d22:"2) 点击导航栏中的“分享”按钮",s2d90afa5dcca2c0e:"3) 向下滚动至“添加到主屏幕”",s37a9e8aec5713460:"更多",s4593f304dac8848c:"2) 轻触“添加到主屏幕”",s54cfbb14f46396d4:"1) 在您的主浏览器中打开",s6196153c4b0c1ea0:"安装",s922329d6f6213590:"添加到程序坞",sa5ef80b4bb9b39f8:"收起",sa7551383d1897fcc:"2) 点击“添加到程序坞”",sba52286c21552a4e:"在您的设备上安装，以享受更丰富的体验并便于访问。",sc79fd7641eb9a975:"隐藏安装步骤",scdaf4bbff76674c8:"添加到主屏幕",se740f75b95a51807:"将其添加到您的程序坞，以享受更全面的体验并便于访问。",sfea652f6580ff086:"此网站具备 App 功能特性。"},br={s1488e73779d7682f:"1) Apri il menu del tuo browser",s182ab2d6c997515f:"Aggiungilo alla schermata principale per un'esperienza più completa e un accesso facile.",s1b9047d53d9f9d22:"2) Premi Condividi nella barra di navigazione",s2d90afa5dcca2c0e:'3) Scorri verso il basso fino a "Aggiungi alla schermata principale"',s37a9e8aec5713460:"Più",s4593f304dac8848c:'2) Tocca "Aggiungi alla schermata principale"',s54cfbb14f46396d4:"1) Apri nel tuo browser principale",s6196153c4b0c1ea0:"Installa",s922329d6f6213590:"Aggiungi al Dock",sa5ef80b4bb9b39f8:"Meno",sa7551383d1897fcc:"2) Premi Aggiungi al Dock",sba52286c21552a4e:"Installalo sul tuo dispositivo per un'esperienza più completa e un accesso facile.",sc79fd7641eb9a975:"Nascondi istruzioni",scdaf4bbff76674c8:"Aggiungi alla schermata principale",se740f75b95a51807:"Aggiungilo al Dock per un'esperienza più completa e un accesso facile.",sfea652f6580ff086:"Questo sito ha funzionalità di app."},mr={s1488e73779d7682f:"1) Otevřete nabídku prohlížeče",s182ab2d6c997515f:"Přidejte jej na plochu pro rozšířené využití a snadný přístup.",s1b9047d53d9f9d22:"2) Stiskněte tlačítko Sdílet na navigačním panelu",s2d90afa5dcca2c0e:'3) Projděte dolů k "Přidat na plochu"',s37a9e8aec5713460:"Více",s4593f304dac8848c:'2) Klepněte na "Přidat na plochu"',s54cfbb14f46396d4:"1) Otevřete v hlavním prohlížeči",s6196153c4b0c1ea0:"Nainstalovat",s922329d6f6213590:"Přidat do Docku",sa5ef80b4bb9b39f8:"Méně",sa7551383d1897fcc:"2) Stiskněte Přidat do Docku",sba52286c21552a4e:"Nainstalujte si jej na své zařízení pro rozšířené využití a snadný přístup.",sc79fd7641eb9a975:"Skrýt instrukce",scdaf4bbff76674c8:"Přidat na plochu",se740f75b95a51807:"Přidejte jej do svého Docku pro rozšířené využití a snadný přístup.",sfea652f6580ff086:"Tento web má funkce aplikace."},vr={s1488e73779d7682f:"1) Åpne menyen i nettleseren din",s182ab2d6c997515f:"Legg den til på Hjem-skjermen din for å få en bedre brukeropplevelse og raskere tilgang.",s1b9047d53d9f9d22:"2) Trykk på Del-knappen i navigasjonslinjen",s2d90afa5dcca2c0e:"3) Rull ned til «Legg til på Hjem-skjerm»",s37a9e8aec5713460:"Mer",s4593f304dac8848c:'2) Trykk på "Legg til på Hjem-skjerm"',s54cfbb14f46396d4:"1) Åpne i hovednettleseren din",s6196153c4b0c1ea0:"Installer",s922329d6f6213590:"Legg til i Dock",sa5ef80b4bb9b39f8:"Mindre",sa7551383d1897fcc:"2) Velg Legg til i Dock",sba52286c21552a4e:"Installer den på enheten din for å få en bedre brukeropplevelse og raskere tilgang.",sc79fd7641eb9a975:"Skjul instruksjoner",scdaf4bbff76674c8:"Legg til på Hjem-skjerm",se740f75b95a51807:"Legg den til i Docken din for å få en bedre brukeropplevelse og raskere tilgang.",sfea652f6580ff086:"Denne siden har app-funksjonalitet."},yr={s1488e73779d7682f:"1) Abra o menu do seu navegador",s182ab2d6c997515f:"Adicione à Tela de Início para uma melhor experiência e mais fácil acesso.",s1b9047d53d9f9d22:"2) Pressione Compartilhar na barra de endereço",s2d90afa5dcca2c0e:'3) Role para baixo até "Adicionar à Tela de Início"',s37a9e8aec5713460:"Mais",s4593f304dac8848c:'2) Toque em "Adicionar à Tela de Início"',s54cfbb14f46396d4:"1) Abra no seu navegador principal",s6196153c4b0c1ea0:"Instalar",s922329d6f6213590:"Adicionar ao Dock",sa5ef80b4bb9b39f8:"Menos",sa7551383d1897fcc:"2) Pressione Adicionar ao Dock",sba52286c21552a4e:"Instale no dispositivo para uma melhor experiência e mais fácil acesso.",sc79fd7641eb9a975:"Ocultar Instruções",scdaf4bbff76674c8:"Adicionar à Tela de Início",se740f75b95a51807:"Adicione ao Dock para uma melhor experiência e mais fácil acesso.",sfea652f6580ff086:"Este site possui funcionalidade de aplicativo."},wr={s1488e73779d7682f:"1) ブラウザメニューを開く",s182ab2d6c997515f:"ホーム画面に追加して、幅広い体験と簡単なアクセスを実現してください。",s1b9047d53d9f9d22:"2) ナビゲーションバーで共有を押す",s2d90afa5dcca2c0e:"3) 「ホーム画面に追加」までスクロールする",s37a9e8aec5713460:"展開",s4593f304dac8848c:"2) 「ホーム画面に追加」をタップする",s54cfbb14f46396d4:"1) メインブラウザで開く",s6196153c4b0c1ea0:"インストール",s922329d6f6213590:"Dockに追加",sa5ef80b4bb9b39f8:"折りたたむ",sa7551383d1897fcc:"2) 「Dockに追加」を押す",sba52286c21552a4e:"デバイスにインストールすることで、より充実した体験と簡単なアクセスを実現できます。",sc79fd7641eb9a975:"説明を非表示",scdaf4bbff76674c8:"ホーム画面に追加",se740f75b95a51807:"ドックに追加して、幅広い体験と簡単なアクセスを実現してください。",sfea652f6580ff086:"このサイトはアプリ機能があります。"},xr={s1488e73779d7682f:"1) Öppna din webbläsares meny",s182ab2d6c997515f:"Lägg till på hemskärmen för att få en bättre användarupplevelse och enklare åtkomst.",s1b9047d53d9f9d22:"2) Tryck på Dela-knappen i verktygsfältet",s2d90afa5dcca2c0e:'3) Scrolla ner till "Lägg till på hemskärmen"',s37a9e8aec5713460:"Mer",s4593f304dac8848c:'2) Tryck på "Lägg till på hemskärmen"',s54cfbb14f46396d4:"1) Öppna i din huvudsakliga webbläsare",s6196153c4b0c1ea0:"Installera",s922329d6f6213590:"Lägg till i Dock",sa5ef80b4bb9b39f8:"Mindre",sa7551383d1897fcc:"2) Välj Lägg till i Dock",sba52286c21552a4e:"Installera den på din enhet för att få en bättre användarupplevelse och enklare åtkomst.",sc79fd7641eb9a975:"Göm instruktioner",scdaf4bbff76674c8:"Lägg till på hemskärmen",se740f75b95a51807:"Lägg till i Dock för att få en bättre användarupplevelse och enklare åtkomst.",sfea652f6580ff086:"Denna webbsajt har app-funktionalitet."},_r={s1488e73779d7682f:"1) 브라우저 메뉴 열기",s182ab2d6c997515f:"더 많은 기능과 쉬운 접근을 위해 홈 화면에 추가해주세요.",s1b9047d53d9f9d22:"2) 내비게이션 바에서 공유 버튼 누르기",s2d90afa5dcca2c0e:'3) "홈 화면에 추가"로 스크롤하기',s37a9e8aec5713460:"더보기",s4593f304dac8848c:'2) "홈 화면에 추가" 탭하기',s54cfbb14f46396d4:"1) 주 브라우저에서 열기",s6196153c4b0c1ea0:"설치",s922329d6f6213590:"Dock에 추가",sa5ef80b4bb9b39f8:"닫기",sa7551383d1897fcc:"2) Dock에 추가 버튼 누르기",sba52286c21552a4e:"더 많은 기능과 쉬운 접근을 위해 기기에 설치해주세요.",sc79fd7641eb9a975:"안내 숨기기",scdaf4bbff76674c8:"홈 화면에 추가",se740f75b95a51807:"더 많은 기능과 쉬운 접근을 위해 Dock에 추가해주세요.",sfea652f6580ff086:"이 사이트는 앱 기능을 가지고 있습니다."},kr={s1488e73779d7682f:"1) បើកម៉ឺនុយកម្មវិធីរុករករបស់អ្នក",s182ab2d6c997515f:"បន្ថែមវាទៅកាន់ផ្ទាំងអេក្រង់ដើមដើម្បីទទួលបាននូវបទពិសោធន៍កាន់តែល្អនិងងាយស្រួលប្រើ។",s1b9047d53d9f9d22:"2) ចុចលើ ប៊ូតុងចែករំលែក នៅក្នុងរបារទិសដៅ",s2d90afa5dcca2c0e:'3) អូសចុះទៅកាន់ "បន្ថែមទៅផ្ទាំងអេក្រង់ដើម"',s37a9e8aec5713460:"បង្ហាញបន្ថែម",s4593f304dac8848c:'2) ចុចលើ "បន្ថែមទៅកាន់ផ្ទាំងអេក្រង់ដើម"',s54cfbb14f46396d4:"1) បើកនៅក្នុងកម្មវិធីរុករកសំខាន់របស់អ្នក",s6196153c4b0c1ea0:"តំឡើង",s922329d6f6213590:"បន្ថែមទៅកាន់ Dock",sa5ef80b4bb9b39f8:"បង្ហាញតិច",sa7551383d1897fcc:"2) ចុចលើ បន្ថែមទៅកាន់ Dock",sba52286c21552a4e:"តំឡើងវានៅលើឧបករណ៍របស់អ្នកដើម្បីទទួលបាននូវបទពិសោធន៍កាន់តែល្អនិងងាយស្រួលប្រើ។",sc79fd7641eb9a975:"បិទការណែនាំ",scdaf4bbff76674c8:"បន្ថែមទៅកាន់ផ្ទាំងអេក្រង់ដើម",se740f75b95a51807:"បន្ថែមវាទៅកាន់ Dock ដើម្បីទទួលបាននូវបទពិសោធន៍កាន់តែល្អនិងងាយស្រួលប្រើ។",sfea652f6580ff086:"គេហទំព័រនេះមានមុខងារជាកម្មវិធី។"},$r={s1488e73779d7682f:"۱) مرورگر خود را باز کنید",s182ab2d6c997515f:"برای تجربه گسترده و دسترسی آسان آن را به صفحه اصلی خود اضافه کنید.",s1b9047d53d9f9d22:"۱)در نوار پایین دکمه (Share) را  بزنید",s2d90afa5dcca2c0e:'۳) به پایین اسکرول کنید تا به "Add to Home Screen" برسید',s37a9e8aec5713460:"بیشتر",s4593f304dac8848c:'۲) روی "Add to Home screen" ضربه بزنید',s54cfbb14f46396d4:"۱) در مرورگر اصلی خود باز کنید",s6196153c4b0c1ea0:"نصب",s922329d6f6213590:"افزودن به (Dock)",sa5ef80b4bb9b39f8:"کمتر",sa7551383d1897fcc:"۲) (Add to Dock) را انتخاب کنید ",sba52286c21552a4e:"برای تجربه گسترده و دسترسی آسان آن را بر روی دستگاه خود نصب کنید.",sc79fd7641eb9a975:" مخفی کردن مراحل",scdaf4bbff76674c8:"افزودن به (Home Screen)",se740f75b95a51807:"برای تجربه گسترده و دسترسی آسان آن را به Dock خود اضافه کنید.",sfea652f6580ff086:" این سایت دارای قابلیت اپلیکیشن است. "},Ar={s1488e73779d7682f:"1) Åbn din browsermenu",s182ab2d6c997515f:"Tilføj den til din hjemmeskærm for en bedre oplevelse og nem adgang.",s1b9047d53d9f9d22:"2) Tryk på Del-knappen i navigationslinjen",s2d90afa5dcca2c0e:'3) Rul ned til "Tilføj til hjemmeskærm"',s37a9e8aec5713460:"Mere",s4593f304dac8848c:'2) Tryk på "Tilføj til hjemmeskærm"',s54cfbb14f46396d4:"1) Åbn i din primære browser",s6196153c4b0c1ea0:"Installer",s922329d6f6213590:"Tilføj til Dock",sa5ef80b4bb9b39f8:"Mindre",sa7551383d1897fcc:"2) Vælg Tilføj til Dock",sba52286c21552a4e:"Installer den på din enhed for en bedre oplevelse og nem adgang.",sc79fd7641eb9a975:"Skjul instruktion",scdaf4bbff76674c8:"Tilføj til hjemmeskærm",se740f75b95a51807:"Tilføj den til din Dock for en bedre oplevelse og nem adgang.",sfea652f6580ff086:"Denne side har app-funktionalitet."},Sr={s1488e73779d7682f:"1) Mở menu trình duyệt của bạn",s182ab2d6c997515f:"Thêm nó vào màn hình chính của bạn để có trải nghiệm phong phú hơn và truy cập dễ dàng hơn.",s1b9047d53d9f9d22:'2) Nhấp vào nút "Chia sẻ" trên thanh điều hướng',s2d90afa5dcca2c0e:'3) Kéo đến mục "Thêm vào Màn hình chính"',s37a9e8aec5713460:"Thêm",s4593f304dac8848c:'2) Nhấn vào "Thêm vào Màn hình chính"',s54cfbb14f46396d4:"1) Mở trình duyệt chính của bạn",s6196153c4b0c1ea0:"Cài đặt",s922329d6f6213590:"Thêm vào Dock",sa5ef80b4bb9b39f8:"Thu gọn",sa7551383d1897fcc:'2) Nhấp vào "Thêm vào Dock"',sba52286c21552a4e:"Cài đặt trên thiết bị của bạn để có trải nghiệm phong phú hơn và truy cập dễ dàng.",sc79fd7641eb9a975:"Ẩn các bước cài đặt",scdaf4bbff76674c8:"Thêm vào màn hình chính",se740f75b95a51807:"Thêm nó vào Dock của bạn để có trải nghiệm toàn diện hơn và truy cập dễ dàng hơn.",sfea652f6580ff086:"Trang web này có cả chức năng đặc trưng ứng dụng."},Er={s1488e73779d7682f:"1) Nyissa meg a böngészője menüjét",s182ab2d6c997515f:"Adja hozzá a kezdőképernyőjéhez a teljes élmény és a könnyű hozzáférés érdekében.",s1b9047d53d9f9d22:"2) Nyomja meg a Megosztás gombot a navigációs sávban",s2d90afa5dcca2c0e:'3) Görgessen le a "Hozzáadás a kezdőképernyőhöz" lehetőséghez',s37a9e8aec5713460:"Több",s4593f304dac8848c:'2) Koppintson a "Hozzáadás a kezdőképernyőhöz" lehetőségre',s54cfbb14f46396d4:"1) Nyissa meg a fő böngészőjében",s6196153c4b0c1ea0:"Telepítés",s922329d6f6213590:"Hozzáadás a Dock-hoz",sa5ef80b4bb9b39f8:"Kevesebb",sa7551383d1897fcc:"2) Nyomja meg a Hozzáadás a Dock-hoz gombot",sba52286c21552a4e:"Telepítse eszközére a teljes élmény és a könnyű hozzáférés érdekében.",sc79fd7641eb9a975:"Útmutató elrejtése",scdaf4bbff76674c8:"Hozzáadás a kezdőképernyőhöz",se740f75b95a51807:"Adja hozzá a Dock-hoz a teljes élmény és a könnyű hozzáférés érdekében.",sfea652f6580ff086:"Ez az oldal alkalmazásfunkcióval rendelkezik."},Tr={s1488e73779d7682f:"1) Otvorte ponuku prehliadača",s182ab2d6c997515f:"Pridajte ju na domovskú obrazovku pre rozšírené využitie a jednoduchý prístup.",s1b9047d53d9f9d22:"2) Stlačte Zdieľať na navigačnom paneli",s2d90afa5dcca2c0e:'3) Prejdite nadol k "Pridať na domovskú obrazovku"',s37a9e8aec5713460:"Viac",s4593f304dac8848c:'2) Klepnite na "Pridať na domovskú obrazovku"',s54cfbb14f46396d4:"1) Otvorte v hlavnom prehliadači",s6196153c4b0c1ea0:"Inštalovať",s922329d6f6213590:"Pridať do Docku",sa5ef80b4bb9b39f8:"Menej",sa7551383d1897fcc:"2) Stlačte Pridať do Docku",sba52286c21552a4e:"Nainštalujte si ju na svoje zariadenie pre rozšírené využitie a jednoduchý prístup.",sc79fd7641eb9a975:"Skryť inštrukcie",scdaf4bbff76674c8:"Pridať na domovskú obrazovku",se740f75b95a51807:"Pridajte ju do Docku pre rozšírené využitie a jednoduchý prístup.",sfea652f6580ff086:"Táto stránka má funkcie aplikácie."},un=new Map([["ru",Fi],["tr",qi],["de",Vi],["es",Gi],["nl",Wi],["el",Zi],["fr",Yi],["sr",Ki],["pl",Ji],["uk",Xi],["zh-HK",Qi],["zh-CN",eo],["it",to],["cs",io],["no",oo],["pt",ao],["ja",no],["sv",so],["ko",ro],["km",lo],["fa",co],["da",ho],["vi",po],["hu",uo],["sk",fo]]),{getLocale:Pr,setLocale:ca}=(rt={sourceLocale:"en",targetLocales:or,loadLocale:async e=>un.get(e)},(function(e){if(sa)throw Error("lit-localize can only be configured once");R=e,sa=!0})(((e,t)=>er(pn,e,t))),Gt=hn=rt.sourceLocale,Vt=new Set(rt.targetLocales),Vt.add(rt.sourceLocale),bo=rt.loadLocale,{getLocale:tr,setLocale:ir});var rt;let fn=class{constructor(){this.icons=[{src:""}],this.screenshots=void 0,this.short_name="PWA",this.name="Progressive web application",this.description="Progressive web application"}};const Lr=m.css`.gallery{position:relative;--scrollbar-background-color:#fff;--scrollbar-thumb-color:rgb(146, 146, 146);--scrollbar-thumb-hover-color:rgb(100, 100, 100);--nav-btn-background-color:#fff;--nav-btn-fill-color:#141414}.gallery .gallery_scroller{scroll-snap-type:x mandatory;overflow-x:auto;overflow-y:hidden;display:flex;align-items:center;padding:10px 13px;padding-bottom:10px;margin:0 10px;-webkit-overflow-scrolling:touch}.gallery .gallery_scroller img{border-radius:6px;max-height:min(45vh,500px);box-shadow:0 3px 10px 0 rgba(0,0,0,.15);scroll-snap-align:center;scroll-snap-stop:always;position:relative}.gallery .gallery_scroller img+img{margin-inline-start:15px}.gallery .gallery_scroller::-webkit-scrollbar{width:4px;height:2px}.gallery .gallery_scroller::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb-color);border-radius:4px}.gallery .gallery_scroller::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover-color)}.gallery .gallery_scroller::-webkit-scrollbar-track{background:var(--scrollbar-background-color);border-radius:4px}.gallery .gallery_scroller .scroller_wrap{display:flex;flex-direction:row;padding-inline-end:13px}.gallery .btn{position:absolute;display:flex;align-items:center;-webkit-user-select:none;user-select:none;top:50%;transform:translateY(-50%);height:30px;width:30px;border-radius:50%;background-color:var(--nav-btn-background-color);box-shadow:rgba(0,0,0,.3) 2px 4px 4px 1px;background-repeat:no-repeat;opacity:.8;z-index:1}.gallery .btn.prev{left:5px}.gallery .btn.prev svg{margin-left:4px}.gallery .btn.next{right:5px}.gallery .btn.next svg{transform:rotate(180deg);margin-left:6px}.gallery .btn:hover{box-shadow:rgba(0,0,0,.5) 2px 4px 4px 1px;cursor:pointer;opacity:1}.gallery .btn svg{width:20px;height:20px;margin:0 auto}.gallery .btn svg path{fill:var(--nav-btn-fill-color)}.gallery.apple_desktop{--scrollbar-background-color:rgba(0, 0, 0, 0.1);--scrollbar-thumb-color:rgb(100, 100, 100);--scrollbar-thumb-hover-color:rgba(0, 0, 0, 0.85)}.gallery.apple_desktop .gallery_scroller{margin:0;padding-top:15px}.gallery.apple_desktop .btn{height:26px;width:26px;box-shadow:rgba(0,0,0,.3) 0 2px 2px 1px}.gallery.apple_desktop .btn:hover{box-shadow:rgba(0,0,0,.3) 0 2px 2px 1px}.gallery.apple_desktop .btn:active{filter:brightness(95%)}.gallery.apple_desktop .btn:active .svg{filter:brightness(110%)}.gallery.apple_desktop .btn svg{width:12px;height:auto;opacity:1}.gallery.apple_desktop .btn svg{margin-inline-start:7px}.gallery.apple_mobile .btn.prev svg{margin-inline-start:7px}.gallery.apple_mobile .btn svg{width:16px;height:auto}.gallery.apple_desktop .btn,.gallery.apple_mobile .btn{opacity:1}@media(hover:none)and (pointer:coarse){.gallery .btn.next,.gallery .btn.prev{display:none}.gallery_scroller::-webkit-scrollbar{display:none}}@media(prefers-color-scheme:dark){.gallery{--scrollbar-background-color:#424242;--nav-btn-background-color:#555555;--nav-btn-fill-color:#fff}.gallery.apple_desktop{--scrollbar-thumb-color:var(--nav-btn-fill-color);--scrollbar-background-color:var(--nav-btn-background-color);--scrollbar-thumb-hover-color:var(--nav-btn-fill-color)}.gallery.apple_desktop .btn:active{filter:brightness(110%)}.gallery.apple_desktop .btn:active .svg{filter:brightness(90%)}}`,De=(e,t,i)=>{const o=new CustomEvent(t,{detail:{message:i}});e.dispatchEvent(o)};let k=class{static isAppleMobile(){return!(!(["iPhone","iPad","iPod"].includes(navigator.platform)||navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)||!("serviceWorker"in navigator))}static isAppleDesktop(){const t=navigator.userAgent.toLowerCase();if(navigator.maxTouchPoints||!t.match(/macintosh/))return!1;const i=/version\/(\d{2})\./.exec(t);if(!(i&&i[1]&&parseInt(i[1])>=17))return!1;const o=!!document.createElement("audio").canPlayType('audio/wav; codecs="1"'),a=!!new OffscreenCanvas(1,1).getContext("webgl");return o&&a}static isAndroid(){return!!navigator.userAgent.toLowerCase().match(/android/)}static isAndroidFallback(){return!(!this.isAndroid()||"BeforeInstallPromptEvent"in window)}static deviceFormFactor(){return window.matchMedia("(orientation: portrait)").matches?"narrow":"wide"}static isStandalone(){return!!(window.matchMedia("(display-mode: standalone)").matches||"standalone"in navigator&&navigator.standalone===!0)}static async getInstalledRelatedApps(){if("getInstalledRelatedApps"in navigator)try{return await navigator.getInstalledRelatedApps().then((t=>t))}catch{}return[]}static async isRelatedAppsInstalled(){return!!(await this.getInstalledRelatedApps()).length}static setStorageFlag(t,i,o=!1){try{o?localStorage.setItem(t,i.toString()):sessionStorage.setItem(t,i.toString())}catch{}}static getStorageFlag(t){try{return sessionStorage.getItem(t)==="true"||localStorage.getItem(t)==="true"}catch{return!1}}static eventInstalledSuccess(t){De(t,"pwa-install-success-event","App install success (Chromium/Android only)")}static eventInstalledFail(t){De(t,"pwa-install-fail-event","App install failed (Chromium/Android only)")}static eventUserChoiceResult(t,i){De(t,"pwa-user-choice-result-event",i)}static eventInstallAvailable(t){De(t,"pwa-install-available-event","App install available")}static eventInstallHowTo(t){De(t,"pwa-install-how-to-event","App install instruction showed")}static eventGallery(t){De(t,"pwa-install-gallery-event","App install gallery showed")}static normalizeManifestAssetUrls(t,i){const o=new URL(i,document.location.href);[...t.icons||[],...t.screenshots||[]].forEach((a=>{a.src=new URL(a.src,o).href}))}static async fetchAndProcessManifest(t,i,o,a){let n=new fn,s=null;try{const r=await fetch(t);if(s=await r.json(),!r.ok||!s||!Object.keys(s))throw Error("Manifest not found");this.normalizeManifestAssetUrls(s,t)}catch{}return i=i||(s?.icons?.length?s?.icons[0].src:n.icons?.[0].src)||"",o=o||(s?s.short_name:n.short_name)||"",a=a||s?.description||n.description||"",n=s||n,{_manifest:n,icon:i,name:o,description:a}}};const Ir=(e,t,i,o)=>m.html`${e?m.html`<div id="paginated_gallery" class="gallery ${t}"><div class="gallery_scroller"><div class="scroller_wrap">${e.filter((a=>!a.form_factor||a.form_factor===k.deviceFormFactor())).map((a=>m.html`<img draggable="false" src='${a.src}' alt='${a.label||""}'>`))}</div></div><span class="btn prev" @click="${o}">${t!="default"?m.html`<svg id="arrow-left" viewBox="0 0 23.023 18.518"><path fill="currentColor" d="M0 9.253c0 .305.134.586.378.818l8.106 8.093c.244.232.5.342.793.342.598 0 1.075-.44 1.075-1.05 0-.293-.11-.586-.306-.769l-2.734-2.783-4.834-4.407-.256.598 3.93.244h15.442c.635 0 1.075-.451 1.075-1.086s-.44-1.087-1.075-1.087H6.152l-3.93.245.256.61 4.834-4.419 2.734-2.783a1.09 1.09 0 0 0 .306-.77C10.352.44 9.875 0 9.277 0c-.293 0-.549.098-.818.366L.38 8.436c-.247.23-.38.511-.38.816Z"/></svg>`:m.html`<svg id="arrow-left" viewBox="0 0 96 96"><path d="M39.3756,48.0022l30.47-25.39a6.0035,6.0035,0,0,0-7.6878-9.223L26.1563,43.3906a6.0092,6.0092,0,0,0,0,9.2231L62.1578,82.615a6.0035,6.0035,0,0,0,7.6878-9.2231Z" fill="%23999" fill-rule="evenodd"/></svg>`}</span><span class="btn next" @click="${i}">${m.html`<svg height="15" width="15"><use href="#arrow-left"></use></svg>`}</span></div>`:""}`;var Li=function(e,t,i,o){var a,n=arguments.length,s=n<3?t:o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(n<3?a(s):n>3?a(t,i,s):a(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s},Ii=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};let Dt=class extends m.LitElement{constructor(){super(...arguments),this.screenshots=[],this.theme="default",this.rtl=!1,this.getScrollElements=()=>{const t=this.shadowRoot?.querySelector("#paginated_gallery");if(!t)return;const i=t.querySelector(".gallery_scroller");if(!i)return;const o=Array.from(i.querySelectorAll("img"));return o.length!==0?{scroller:i,items:o}:void 0},this.findCurrentItem=(t,i)=>{const o=t.scrollLeft*(this.rtl?-1:1);return i.find((a=>a.offsetWidth+a.offsetLeft*(this.rtl?-1:1)>=o+a.offsetWidth/2.5))||null},this.scrollToPage=t=>{const i=this.getScrollElements();if(!i)return;const{scroller:o,items:a}=i,n=this.findCurrentItem(o,a);if(!n)return;const s=a.indexOf(n)+(t==="next"?1:-1)*(this.rtl?-1:1);s>=0&&s<a.length&&a[s].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},this.scrollToNextPage=()=>{this.scrollToPage("next")},this.scrollToPrevPage=()=>{this.scrollToPage("prev")},this._init=()=>{}}static get styles(){return Lr}firstUpdated(){const t=this.getScrollElements();t&&setTimeout((()=>{t.scroller.scrollTo({top:0,left:0})}),300)}connectedCallback(){super.connectedCallback(),this._init()}render(){return m.html`${Ir(this.screenshots,this.theme,this.scrollToNextPage,this.scrollToPrevPage)}`}};Li([(0,_.property)({type:Array}),Ii("design:type",Array)],Dt.prototype,"screenshots",void 0),Li([(0,_.property)(),Ii("design:type",String)],Dt.prototype,"theme",void 0),Li([(0,_.property)({type:Boolean}),Ii("design:type",Boolean)],Dt.prototype,"rtl",void 0),customElements.get("pwa-gallery")||customElements.define("pwa-gallery",Dt);const gn=m.css`.dialog-body .icon{display:flex;align-items:flex-start}.dialog-body .icon .icon-image{width:48px;height:48px;margin:0 auto;margin-top:10px;border-radius:6px}.dialog-body .about{display:grid;grid-template-rows:30px auto}.dialog-body .about .hostname,.dialog-body .about .name{padding:0 5px;overflow:hidden}.dialog-body .about .name{font-weight:500;font-size:18px;line-height:24px;margin-top:5px;align-items:flex-start;display:flex}.dialog-body .about .name label{text-overflow:ellipsis;word-break:break-all;white-space:nowrap;overflow:hidden}.dialog-body .about .hostname{font-size:13px;font-weight:400;opacity:.7;line-height:14px;overflow-x:hidden;text-overflow:ellipsis;text-align:start;word-break:break-all;white-space:nowrap}.dialog-body .about+hr{margin-top:10px}.dialog-body .description{font-weight:400;line-height:20px;grid-column:1/3;padding:0 6px;margin:10px 5px 5px;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;max-height:115px;overflow:hidden;overflow-y:auto;text-overflow:ellipsis;text-align:start}.dialog-body .app-description{font-size:13px;margin-bottom:10px}.dialog-body .app-description::-webkit-scrollbar{width:4px;height:4px}.dialog-body .app-description::-webkit-scrollbar-thumb{background:#929292;border-radius:4px}.dialog-body .app-description::-webkit-scrollbar-thumb:hover{background:#646464}.dialog-body .app-description::-webkit-scrollbar-track{background:var(--scrollbar-background-color);border-radius:4px}.dialog-body .install-description{font-size:14px}.dialog-body hr{height:1px;width:100%;grid-column:1/3;background-color:var(--border-bottom-color);border:none;margin:0}.dialog-body .action-buttons{display:grid;grid-template-columns:50% auto;grid-column-start:1;grid-column-end:3;gap:10px;padding:10px 10px}.dialog-body .action-buttons .primary{grid-column-start:2}.dialog-body .material-button{--text-color-primary:#eee;--text-color-secondary:#374fc6;--background-color-primary:#374fc6;--background-color-ripple:#eee;position:relative;display:inline-block;box-sizing:border-box;border:none;border-radius:6px;padding:0 16px;min-width:64px;height:36px;vertical-align:middle;text-align:center;text-overflow:ellipsis;text-transform:uppercase;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);font-family:Roboto,"Segoe UI",BlinkMacSystemFont,system-ui,-apple-system;font-size:14px;font-weight:500;line-height:37px;overflow:hidden;outline:0;cursor:pointer;transition:box-shadow .2s}.dialog-body .material-button.primary{color:var(--text-color-primary);background-color:var(--background-color-primary)}.dialog-body .material-button.secondary{background-color:rgba(0,0,0,0);color:var(--text-color-secondary);box-shadow:none}.dialog-body .material-button.secondary::after,.dialog-body .material-button.secondary::before{background-color:var(--background-color-primary)}.dialog-body .material-button.secondary:active,.dialog-body .material-button.secondary:hover{box-shadow:none}.dialog-body .material-button.secondary.close{height:26px;min-width:26px;line-height:0;margin-inline-end:0;margin-inline-start:auto;padding:0;border-radius:50%}.dialog-body .material-button.secondary.close svg{width:16px;fill:var(--text-color-secondary)}.dialog-body .material-button.secondary.close::after{width:25px;height:25px;border-radius:50%}.dialog-body .material-button.secondary.close::before{border-radius:50%}.dialog-body .material-button::before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:var(--background-color-ripple);opacity:0;transition:opacity .2s}.dialog-body .material-button::after{content:"";position:absolute;left:50%;top:50%;border-radius:50%;padding:50%;width:32px;height:32px;background-color:var(--background-color-ripple);opacity:0;transform:translate(-50%,-50%) scale(1);transition:opacity 1s,transform .5s}.dialog-body .material-button:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.dialog-body .material-button:active::after{opacity:.32;transform:translate(-50%,-50%) scale(0);transition:transform 0s}.dialog-body pwa-gallery{grid-column:1/3;max-height:0;opacity:0;transition:opacity ease-in-out .5s,max-height .5s ease-in-out;overflow:hidden}@media(prefers-color-scheme:dark){.dialog-body .material-button{--text-color-primary:#1B222C;--text-color-secondary:#a7c7fa;--background-color-primary:#a7c7fa}}@media(hover:none)and (pointer:coarse){.dialog-body .description::-webkit-scrollbar{display:none}}`,jr=m.css`:host{grid-template-columns:1fr}:host .touch-header{height:30px;width:100%;padding-top:10px;box-sizing:border-box;cursor:grab}:host .touch-header:active{cursor:grabbing}:host .touch-header::before{content:"";width:40px;height:5px;border-radius:3px;background:var(--touch-header-color);margin:0 auto;display:block}:host .body-header{display:grid;grid-template-columns:max-content 1fr max-content;grid-gap:15px;padding:18px 20px;padding-top:0;border-bottom:1px solid var(--border-bottom-color)}:host .body-header .install{text-transform:capitalize;height:40px;min-width:50px;padding:0 23px;align-items:center;display:inline-flex;-webkit-tap-highlight-color:transparent;transition:min-width .2s,color .2s,background-color .2s,border-color .2s}:host .body-header .install .button-text,:host .body-header .install svg{margin:0 auto}:host .body-header .install .check-icon{display:none}:host .body-header .about{grid-template-rows:auto auto;grid-gap:6px}:host .body-header .about .name{padding:0;line-height:20px;font-size:16px}:host .body-header .about .hostname{font-size:14px;font-weight:400;opacity:.7;line-height:14px;overflow-x:hidden;text-overflow:ellipsis;word-break:break-all;white-space:nowrap;padding:0}:host .body-header .icon .icon-image{margin:0;width:45px;height:45px}:host .how-to-body{display:flex;flex-direction:column;gap:15px;max-height:0;overflow:hidden;padding:0 20px;opacity:0}:host .how-to-body .description-step{display:flex;gap:15px;margin-inline-start:2.5px;align-items:center}:host .how-to-body .description-step .svg-wrap{display:flex;flex-shrink:0;align-items:center;width:40px;height:40px;background-color:var(--touch-header-color);border-radius:50%}:host .how-to-body .description-step .svg-wrap svg{fill:var(--text-color-normal);margin:0 auto}:host .how-to-body .description-step .svg-wrap.add-icon svg{padding-right:1px}:host .how-to .description,:host .how-to ::slotted(pwa-gallery){max-height:0;padding-top:0;padding-bottom:0;overflow:hidden;opacity:0}:host .how-to .how-to-body{max-height:600px;padding-top:18px;padding-bottom:18px;opacity:1}:host .how-to .install{min-width:40px;padding:0;background:rgba(0,0,0,0);color:var(--text-color-normal);box-shadow:none;border:1px solid}:host .how-to .install .check-icon{display:inline;fill:var(--text-color-normal)}:host .how-to .install .button-text{display:none}:host .description{padding:15px 20px;margin:0;-webkit-line-clamp:6;max-height:150px;opacity:1}:host ::slotted(pwa-gallery){display:block;max-height:600px;padding-bottom:15px;opacity:1;transition:max-height 1.5s,opacity .8s,padding 1.5s}:host .description,:host .how-to-body{transition:max-height .2s,opacity .15s,padding .2s}:host .material-button{border-radius:20px}`,Wt=(e=>{var t={};return f.d(t,e),t})({classMap:()=>Ks}),Cr=(e,t,i,o,a,n)=>m.html`<div class="dialog-body ${(0,Wt.classMap)(((s=!1,r=!1)=>({fallback:s,"how-to":r}))(a,n))}"><div class="touch-header" id="touch-header"></div><div class="body-header"><div class="icon"><img src="${i}" alt="icon" class="icon-image"></div><div class="about"><div class="name"><label>${e}</label></div><div class="hostname">${location.hostname}</div></div><button class="material-button primary install" @click='${o}'><svg class="check-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill=""><path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/></svg><span class="button-text">${R("Install")}</span></button></div><div class="how-to-body"><div class="description-step"><div class="svg-wrap"><svg height="24" viewBox="0 -960 960 960" width="24" fill=""><path d="M480-160q-33 0-56.5-23.5T400-240q0-33 23.5-56.5T480-320q33 0 56.5 23.5T560-240q0 33-23.5 56.5T480-160Zm0-240q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm0-240q-33 0-56.5-23.5T400-720q0-33 23.5-56.5T480-800q33 0 56.5 23.5T560-720q0 33-23.5 56.5T480-640Z"/></svg></div><div class="step-text">${R("1) Open your browser menu")}</div></div><div class="description-step"><div class="svg-wrap add-icon"><svg height="24" viewBox="0 -960 960 960" width="24"><path d="M320-40q-33 0-56.5-23.5T240-120v-160h80v40h400v-480H320v40h-80v-160q0-33 23.5-56.5T320-920h400q33 0 56.5 23.5T800-840v720q0 33-23.5 56.5T720-40H320Zm0-120v40h400v-40H320ZM176-280l-56-56 224-224H200v-80h280v280h-80v-144L176-280Zm144-520h400v-40H320v40Zm0 0v-40 40Zm0 640v40-40Z"/></svg></div><div class="step-text">${R('2) Tap "Add to Home screen"')}</div></div></div>${t?m.html`<div class="description">${t}</div>`:""}<slot></slot></div>`;var _e=function(e,t,i,o){var a,n=arguments.length,s=n<3?t:o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(n<3?a(s):n>3?a(t,i,s):a(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s},ke=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};let pe=class extends m.LitElement{constructor(){super(...arguments),this.props={name:"",description:"",icon:""},this.install={handleEvent:()=>{}},this.hideDialog=()=>{},this.disableClose=!1,this.fallback=!1,this.howToRequested=!1,this.toggleHowTo={handleEvent:()=>{}},this._callInstall=()=>{if(this.fallback)return this.toggleHowTo.handleEvent(),void setTimeout((()=>this.setupAppearence(!0)),210);this.install.handleEvent()},this._callHide=()=>{this.hideDialog(),this.setupAppearence()},this.bindedElement=null,this._saveBodyStyle=document.body.style.overscrollBehaviorY,this.dragMobileSheet=(t,i,o)=>{if(!t||!i||!o)return null;let a=0;const n=o.offsetHeight+o.offsetTop,s=d=>d.clientY||(d.changedTouches&&d.changedTouches.length?d.changedTouches[0].clientY:0),r=d=>{window.addEventListener("mouseup",l),window.addEventListener("mousemove",c),window.addEventListener("touchend",l),window.addEventListener("touchmove",c),d.preventDefault(),a=s(d)-i.getBoundingClientRect().top,document.body.style.overscrollBehaviorY="none"},l=d=>{if(document.body.style.overscrollBehaviorY=this._saveBodyStyle,!this.disableClose&&s(d)>=window.innerHeight-25)h(d,window.innerHeight+50,!0);else if(window.innerHeight-s(d)>t.clientHeight/2.5){h(d,window.innerHeight-t.clientHeight);try{!this.howToRequested&&k.eventGallery(this.getRootNode().host)}catch{}}else h(d,window.innerHeight-n-35)},c=d=>{const p=s(d);this.disableClose&&window.innerHeight-p<70||p<=window.innerHeight-t.clientHeight+a||(t.style.setProperty("transition","none"),t.style.setProperty("--translateY",`translateY(${p-a}px)`))},h=(d,p,g)=>{window.removeEventListener("mouseup",l),window.removeEventListener("mousemove",c),window.removeEventListener("touchend",l),window.removeEventListener("touchmove",c),window.innerWidth>=768||(!p&&s(d)>=window.innerHeight-n?t.style.setProperty("--translateY",`translateY(calc(100vh - ${n}px))`):t.style.setProperty("--translateY",`translateY(${(p||s(d))+35}px)`),t.style.setProperty("transition","transform 500ms cubic-bezier(0.4, 0, 0, 1) 0s"),g&&(i.removeEventListener("mousedown",r),i.removeEventListener("touchstart",r),setTimeout(this._callHide,250)))};return i.addEventListener("mousedown",r),i.addEventListener("touchstart",r,{passive:!1}),h(new MouseEvent("mouseup"),window.innerHeight-n-35),{touchElement:i,listener:r}},this.setupAppearence=t=>{this.bindedElement&&(this.bindedElement.touchElement.removeEventListener("mousedown",this.bindedElement.listener),this.bindedElement.touchElement.removeEventListener("touchstart",this.bindedElement.listener)),this.bindedElement=this.dragMobileSheet(this.parentElement,this.shadowRoot?.querySelector(".dialog-body .touch-header"),this.shadowRoot?.querySelector(".dialog-body "+(t?".how-to-body":".body-header")))},this._init=()=>{this.setupAppearence(),window.addEventListener("resize",(()=>this.setupAppearence()))}}static get styles(){return[gn,jr]}firstUpdated(){this._init()}connectedCallback(){super.connectedCallback()}render(){return m.html`${Cr(this.props.name,this.props.description,this.props.icon,this._callInstall,this.fallback,this.howToRequested)}`}};_e([(0,_.property)({type:Object}),ke("design:type",Object)],pe.prototype,"props",void 0),_e([(0,_.property)({type:Object}),ke("design:type",Object)],pe.prototype,"install",void 0),_e([(0,_.property)(),ke("design:type",Object)],pe.prototype,"hideDialog",void 0),_e([(0,_.property)({type:Boolean}),ke("design:type",Object)],pe.prototype,"disableClose",void 0),_e([(0,_.property)({type:Boolean}),ke("design:type",Object)],pe.prototype,"fallback",void 0),_e([(0,_.property)({type:Boolean}),ke("design:type",Object)],pe.prototype,"howToRequested",void 0),_e([(0,_.property)({type:Object}),ke("design:type",Object)],pe.prototype,"toggleHowTo",void 0),customElements.get("pwa-bottom-sheet")||customElements.define("pwa-bottom-sheet",pe);const Dr=m.css`#pwa-install-element{-webkit-user-select:none;user-select:none}#pwa-install-element .install-dialog{--text-color-normal:#212121;--background-color:#fff;--border-bottom-color:#DBDCDE;--scrollbar-background-color:#fff;font-family:Roboto,"Segoe UI",system-ui;position:fixed;display:inline-block;opacity:0;visibility:hidden;z-index:2147483001}#pwa-install-element .install-dialog.chrome{max-width:380px;width:90%;min-height:90px;margin:0 auto;right:150px;left:auto;background-color:var(--background-color);filter:drop-shadow(0 5px 15px rgba(0, 0, 0, .3));font-size:15px;color:var(--text-color-normal);border-radius:8px;top:-100px;transition:top .5s ease-in-out,opacity .8s ease-in-out,max-height .35s ease-in-out}#pwa-install-element .install-dialog.chrome.available{opacity:1;top:28px;visibility:visible}#pwa-install-element .install-dialog.chrome .dialog-body{display:grid;grid-template-columns:70px 1fr}#pwa-install-element .install-dialog.chrome.gallery pwa-gallery{transition:opacity .3s ease-in-out .2s,max-height .5s ease-in-out;max-height:70vh;opacity:1}#pwa-install-element .install-dialog.mobile{--touch-header-color:#DBDCE0;top:0;max-width:414px;width:100%;bottom:auto;left:0;right:0;transition:none;transform:translateY(100vh);border-radius:0;border-top-left-radius:15px;border-top-right-radius:15px;padding-bottom:35px}#pwa-install-element .install-dialog.mobile.available{--translateY:translateY(calc(100vh - 85px));opacity:1;top:0;visibility:visible;transform:var(--translateY)}@media(prefers-color-scheme:dark){#pwa-install-element .install-dialog{--text-color-normal:#eee;--background-color:#1e1e1e;--border-bottom-color:#404140;--scrollbar-background-color:#424242}#pwa-install-element .install-dialog.mobile{--touch-header-color:#3f403f}}@media(max-width:767px)and (min-height:495px){#pwa-install-element .install-dialog.chrome.mobile{display:inline-block}#pwa-install-element .install-dialog.chrome{display:none}}@media(min-width:768px),(max-height:495px){#pwa-install-element .install-dialog.chrome.mobile{display:none}#pwa-install-element .install-dialog.chrome{display:inline-block}}@media(max-height:420px){#pwa-install-element .install-dialog.chrome .dialog-body .description{-webkit-line-clamp:3;max-height:70px}}`,Or=m.css`#pwa-install-element .install-dialog.apple{--text-color-normal:#333;--text-color-description:#333;--background-color:rgba(255, 255, 255, 0.8);--text-color-button:#fff;--background-color-button:#fff;--background-color-button-active:#DBDAE0;--border-bottom-color:rgba(0, 0, 0, 0.1);--icon-how-to-color:#527AFB;font-family:system-ui,-apple-system,HelveticaNeue,BlinkMacSystemFont,Roboto,"Segoe UI";max-width:380px;width:auto;margin:0 auto;right:0;left:0;font-size:15px;color:var(--text-color-normal);bottom:0;transition:transform .4s cubic-bezier(.33,1,.66,1),opacity .5s cubic-bezier(1,0,1,-2),border .35s ease-in-out;overflow:hidden;pointer-events:none;opacity:0;visibility:visible;transform:translateY(100%);will-change:opacity,transform}#pwa-install-element .install-dialog.apple.dialog-body{display:grid;grid-template-columns:95px 1fr;grid-template-rows:1fr auto;grid-template-areas:"icon description" "welcome welcome" "how-to how-to" "gallery gallery" "button button";border-radius:10px;border-bottom:1px solid transparent;background-color:var(--background-color);filter:drop-shadow(0 5px 15px rgba(0, 0, 0, .5));backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}#pwa-install-element .install-dialog.apple.dialog-body .icon{display:flex;align-items:center;grid-area:icon;border-bottom:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.apple.dialog-body .icon .icon-image{width:64px;height:64px;margin:0 auto;border-radius:6px}#pwa-install-element .install-dialog.apple.dialog-body .close{height:26px;min-width:26px;line-height:0;margin-inline-end:7px;margin-top:7px;margin-inline-start:auto;padding:0;border-radius:50%;opacity:.5;outline:0;color:var(--text-color-normal);border:none;background-color:rgba(0,0,0,0);cursor:pointer;transition:opacity .2s ease-in-out,background-color .2s ease-in-out;grid-area:description}#pwa-install-element .install-dialog.apple.dialog-body .close svg{fill:var(--text-color-normal);width:18px}#pwa-install-element .install-dialog.apple.dialog-body .close:active,#pwa-install-element .install-dialog.apple.dialog-body .close:hover{opacity:1;background-color:var(--background-color-button)}#pwa-install-element .install-dialog.apple.dialog-body .about{display:grid;grid-template-rows:35px 60px;border-bottom:1px solid var(--border-bottom-color);grid-area:description}#pwa-install-element .install-dialog.apple.dialog-body .about .description,#pwa-install-element .install-dialog.apple.dialog-body .about .name{padding-inline-end:15px;overflow:hidden}#pwa-install-element .install-dialog.apple.dialog-body .about .name{font-weight:600;padding-top:10px;padding-inline-end:10px;line-height:22px;align-items:flex-start;display:flex}#pwa-install-element .install-dialog.apple.dialog-body .about .description{font-size:12px;line-height:15px;padding:0;margin-bottom:15px;overflow-y:auto;color:var(--text-color-description)}#pwa-install-element .install-dialog.apple.dialog-body .welcome-to-install{font-size:15px;grid-area:welcome;text-align:start;font-weight:400;padding:15px;width:auto;border-bottom:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.apple .action-buttons{grid-area:button;grid-column-start:1;grid-column-end:3;grid-template-columns:unset;gap:unset;padding:15px}#pwa-install-element .install-dialog.apple .dialog-button{display:grid;height:50px;width:100%;line-height:50px;border-radius:8px;color:var(--text-color-normal)}#pwa-install-element .install-dialog.apple .dialog-button.button{border:none;outline:0;font-family:system-ui,-apple-system,HelveticaNeue,BlinkMacSystemFont;cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:400;font-size:17px;padding:0;margin:0;background-color:var(--background-color-button)}#pwa-install-element .install-dialog.apple .dialog-button.button.install{padding:0 15px;text-align:start}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text{opacity:0;display:flex;align-items:center;justify-content:space-between;transition:opacity .4s ease-in-out .1s;overflow:hidden}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text>span{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text>svg{flex-shrink:0;width:20px}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text.show{opacity:1;visibility:visible;width:auto;height:auto}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text.hide{opacity:0;position:absolute;width:0;height:0;visibility:hidden}#pwa-install-element .install-dialog.apple .dialog-button.button.gallery{display:flex;align-items:center;min-width:50px;width:auto;margin-inline-end:15px}#pwa-install-element .install-dialog.apple .dialog-button.button.gallery #pwa-gallery{margin:0 auto;width:23px;fill:var(--text-color-normal)}#pwa-install-element .install-dialog.apple .dialog-button.button:active{background-color:var(--background-color-button-active)}#pwa-install-element .install-dialog.apple .how-to-body{opacity:0;max-height:0;overflow:hidden;transition:opacity ease-in-out .5s,max-height .5s ease-in-out;grid-area:how-to}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description{display:grid;-webkit-user-select:none;user-select:none;grid-auto-columns:1fr;grid-template-rows:1fr 1fr 1fr;gap:10px;padding:15px;padding-bottom:0}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step{display:inline-flex;flex-direction:row;gap:15px;align-items:center;font-size:14px}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap{position:relative;display:inline-flex;flex-shrink:0;color:var(--icon-how-to-color);width:50px;height:50px;align-items:center;border-radius:6px}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-add,#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-safari,#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-share{margin:0 auto}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-share{margin-bottom:4px;transform:scale(.9)}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-add{transform:scale(.8);fill:var(--text-color-normal)}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-safari{transform:scale(.92)}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap .step-count{position:absolute;line-height:12px;top:3px;left:4px}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .step-text{font-weight:600;text-align:start}#pwa-install-element .install-dialog.apple pwa-gallery{grid-column:1/3;max-height:0;opacity:0;transition:opacity ease-in-out .5s,max-height .5s ease-in-out;overflow:hidden}#pwa-install-element .install-dialog.apple pwa-gallery+.action-buttons{display:flex}#pwa-install-element .install-dialog.apple.available{opacity:1;pointer-events:unset;transform:translateY(0);transition:transform .5s cubic-bezier(.33,1,.66,1),border .35s ease-in-out}#pwa-install-element .install-dialog.apple.gallery pwa-gallery{transition:opacity .3s ease-in-out .2s,max-height .5s ease-in-out;max-height:70vh;opacity:1}#pwa-install-element .install-dialog.apple.how-to .dialog-body{border-bottom:1px solid #e0e0e0}#pwa-install-element .install-dialog.apple.how-to .how-to-body{opacity:1;max-height:400px;overflow-y:auto;transition:opacity .3s ease-in-out .2s,max-height .5s ease-in-out}#pwa-install-element .install-dialog.apple.desktop{--text-color-normal:rgba(0, 0, 0, 0.85);--text-color-description:rgba(0, 0, 0, 0.85);--icon-how-to-color:rgba(0, 0, 0, 0.50);--background-color:rgb(246 246 246 / 85%);--background-color-button:#c6c1c6;--background-color-button-active:linear-gradient(0deg, rgba(64,121,250,1) 0%, rgba(84,144,251,1) 100%);--border-bottom-color:rgb(185 185 185);grid-template-columns:1fr;grid-template-rows:1fr auto;grid-template-areas:"icon" "description" "welcome" "how-to" "gallery" "button";gap:0;column-gap:0;padding:16px;max-width:260px;background:var(--background-color);border:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.apple.desktop .icon{height:64px;padding-bottom:16px}#pwa-install-element .install-dialog.apple.desktop .icon .icon-image{border-radius:10px;width:52px;height:52px;filter:drop-shadow(0 1px 1px rgba(0, 0, 0, .15))}#pwa-install-element .install-dialog.apple.desktop .close{grid-area:icon;background:var(--background-color-button);opacity:1;height:20px;min-width:20px;margin-inline-end:-5px;margin-top:-5px}#pwa-install-element .install-dialog.apple.desktop .close svg{width:14px}#pwa-install-element .install-dialog.apple.desktop .about{display:flex;flex-direction:column;align-items:center}#pwa-install-element .install-dialog.apple.desktop .about .name{font-size:13px;line-height:16px;font-weight:700;padding:0}#pwa-install-element .install-dialog.apple.desktop .about .description{padding:16px 0;margin:0;padding-top:10px;border-bottom:1px solid var(--border-bottom-color);min-width:100%}#pwa-install-element .install-dialog.apple.desktop .about .description,#pwa-install-element .install-dialog.apple.desktop .welcome-to-install{text-align:center;font-size:11px;line-height:14px}#pwa-install-element .install-dialog.apple.desktop .about,#pwa-install-element .install-dialog.apple.desktop .icon,#pwa-install-element .install-dialog.apple.desktop .welcome-to-install{border:none}#pwa-install-element .install-dialog.apple.desktop .welcome-to-install{padding:0;padding-top:16px}#pwa-install-element .install-dialog.apple.desktop .action-buttons{padding:0;padding-top:16px}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button{font-size:13px;font-weight:400;padding:6px 8px;border-radius:6px;height:auto;line-height:18px}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.install{color:#fff;background:var(--background-color-button-active);transition:background .3s ease-in-out .1s,color .3s ease-in-out}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.install svg{transform:none;width:18px}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.gallery{width:30px;min-width:30px;margin-inline-end:10px;background:var(--background-color-button)}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.gallery #pwa-gallery{width:14px;transition:transform .4s ease-in-out}#pwa-install-element .install-dialog.apple.desktop .close:active,#pwa-install-element .install-dialog.apple.desktop .dialog-button.button:active{filter:brightness(105%)}#pwa-install-element .install-dialog.apple.desktop .close:active .button-text,#pwa-install-element .install-dialog.apple.desktop .dialog-button.button:active .button-text{filter:brightness(90%)}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description{padding:0;padding-top:16px;grid-template-rows:1fr 1fr}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step{font-size:12px;gap:16px}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step .svg-wrap{width:32px;height:32px;color:var(--icon-how-to-color)}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step .svg-wrap #pwa-share{width:16px;margin-bottom:2px;transform:none}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step .svg-wrap #pwa-add{width:18px;transform:none}#pwa-install-element .install-dialog.apple.desktop pwa-gallery{margin:0 -10px}#pwa-install-element .install-dialog.apple.desktop.gallery #pwa-gallery{transform:rotate(180deg)}#pwa-install-element .install-dialog.apple.desktop.how-to .action-buttons .dialog-button.button.install{color:var(--text-color-normal);background:var(--background-color-button)}@media(min-width:667px){#pwa-install-element .install-dialog.apple{top:0;bottom:unset;transform:translateY(calc(-100% - 40px));right:28px;left:auto}#pwa-install-element .install-dialog.apple.available{top:28px;bottom:auto;max-height:calc(95vh - 28px)}}@media(min-width:667px)and (max-width:1366px){#pwa-install-element .install-dialog.apple{right:max(28px,env(safe-area-inset-right,28px));left:auto}}@media(max-width:666px){#pwa-install-element .install-dialog.apple .description-step .step-text{font-size:13px}#pwa-install-element .install-dialog.apple.available{bottom:20px;max-height:calc(85vh - 20px)}#pwa-install-element .install-dialog.apple.dialog-body{filter:drop-shadow(rgba(0, 0, 0, .5) 0 0 15px)}}@media(max-width:428px){#pwa-install-element .install-dialog.apple.dialog-body{max-width:100vw;filter:drop-shadow(rgba(0, 0, 0, .5) 0 -5px 10px);border-bottom-left-radius:0;border-bottom-right-radius:0}#pwa-install-element .install-dialog.apple.dialog-body .action-buttons{padding-bottom:max(15px,env(safe-area-inset-bottom))}#pwa-install-element .install-dialog.apple.dialog-body.available{bottom:0;max-height:85vh}}@media(max-height:548px){#pwa-install-element .install-dialog.apple.dialog-body.available{overflow-y:auto;max-height:calc(90vh - 28px - env(safe-area-inset-bottom,0px))}}@media(max-height:600px){#pwa-install-element .install-dialog.apple pwa-gallery{overflow-y:auto}}@media(prefers-color-scheme:dark){#pwa-install-element .install-dialog.apple.dialog-body{--text-color-normal:#fff;--text-color-description:#9E9AA1;--background-color:rgb(25 25 25 / 90%);--background-color-button:#353535;--background-color-button-active:#454545;--border-bottom-color:#353535}#pwa-install-element .install-dialog.apple.dialog-body .close:active,#pwa-install-element .install-dialog.apple.dialog-body .dialog-button.button:active{filter:brightness(105%)}#pwa-install-element .install-dialog.apple.dialog-body .close:active .button-text,#pwa-install-element .install-dialog.apple.dialog-body .dialog-button.button:active .button-text{filter:brightness(90%)}#pwa-install-element .install-dialog.apple.dialog-body.desktop{--text-color-description:var(--text-color-normal);--icon-how-to-color:#bcb8b6;--background-color:rgb(45 45 45 / 90%);--border-bottom-color:#5b5b5b;--background-color-button:#6d6765;--background-color-button-active:linear-gradient(0deg, rgba(59,108,200,1) 0%, rgba(66,123,250,1) 100%);outline:1px solid #1c1c1c;color-scheme:dark}}`,Mr=(e,t,i,o,a,n,s,r,l,c,h,d,p,g,x,M,z=!1)=>{const se=()=>({available:l,gallery:p}),q=!a&&r.screenshots&&r.screenshots.length;return m.html`<div id="pwa-install-element" dir="${z?"rtl":"ltr"}"><div class="install-dialog chrome ${(0,Wt.classMap)(se())}"><div class="dialog-body"><div class="icon"><img src="${s}" alt="icon" class="icon-image" draggable="false"></div><div class="about"><div class="name"><label>${e}</label>${n?"":m.html`<button class="material-button secondary close" @click='${c}'><svg viewBox="0 0 24 24"><path d="M5.3 18.7c.2.2.4.3.7.3s.5-.1.7-.3l5.3-5.3 5.3 5.3a1.08 1.08 0 0 0 .7.3 1.08 1.08 0 0 0 .7-.3c.4-.4.4-1 0-1.4L13.4 12l5.3-5.3c.4-.4.4-1 0-1.4s-1-.4-1.4 0L12 10.6 6.7 5.3c-.4-.4-1-.4-1.4 0s-.4 1 0 1.4l5.3 5.3-5.3 5.3c-.4.4-.4 1 0 1.4z"/></svg></button>`}</div><div class="hostname">${location.hostname}</div></div>${t?m.html`<div class="description app-description">${t}</div>`:""} ${o?"":m.html`<hr><div class="description install-description">${i||`${R("This site has app functionality.")} ${R("Install it on your device for extensive experience and easy access.")}`}</div>`} ${q&&l?m.html`<pwa-gallery .screenshots=${r.screenshots} .rtl="${z}"></pwa-gallery>`:""}<div class="action-buttons">${q?m.html`<button class="material-button secondary" @click='${d}'>${R(p?"Less":"More")}</button>`:""}<button class="material-button primary install" @click='${h}'>${R("Install")}</button></div></div></div><div class="install-dialog chrome mobile ${(0,Wt.classMap)(se())}"><pwa-bottom-sheet .props=${{name:e,icon:s,description:t}} .disableClose=${n} .install=${h} .hideDialog=${c} .toggleHowTo=${g} .howToRequested=${x} .fallback=${M}>${q&&l?m.html`<pwa-gallery .screenshots=${r.screenshots} .rtl="${z}"></pwa-gallery>`:""}</pwa-bottom-sheet></div></div>`},zr=(e,t,i,o,a,n,s,r,l,c,h,d,p,g,x,M=!1)=>{const z=!a&&r.screenshots&&r.screenshots.length;return m.html`<aside id="pwa-install-element" dir="${M?"rtl":"ltr"}"><article class="install-dialog apple ${(0,Wt.classMap)({available:l,"how-to":p,gallery:x,desktop:d})} dialog-body"><div class="icon"><img src="${s}" alt="icon" class="icon-image" draggable="false"></div>${n?"":m.html`<button type="button" title="close" class="close" @click='${c}'><svg viewBox="0 0 24 24"><path d="M5.3 18.7c.2.2.4.3.7.3s.5-.1.7-.3l5.3-5.3 5.3 5.3a1.08 1.08 0 0 0 .7.3 1.08 1.08 0 0 0 .7-.3c.4-.4.4-1 0-1.4L13.4 12l5.3-5.3c.4-.4.4-1 0-1.4s-1-.4-1.4 0L12 10.6 6.7 5.3c-.4-.4-1-.4-1.4 0s-.4 1 0 1.4l5.3 5.3-5.3 5.3c-.4.4-.4 1 0 1.4z"/></svg></button>`}<div class="about"><div class="name">${e}</div><div class="description">${t||location.hostname}</div></div>${o?"":m.html`<div class="welcome-to-install">${i||`${R("This site has app functionality.")} ${R(d?"Add it to your Dock for extensive experience and easy access.":"Add it to your Home Screen for extensive experience and easy access.")}`}</div>`}<div class="how-to-body"><div class="how-to-description">${d?"":m.html`<div class="description-step"><div class="svg-wrap"><svg id="pwa-safari" viewBox="0 0 20.283 19.932" width="24" height="24"><g fill="currentColor"><path d="M9.96 19.922c5.45 0 9.962-4.522 9.962-9.961C19.922 4.51 15.4 0 9.952 0 4.511 0 0 4.512 0 9.96c0 5.44 4.521 9.962 9.96 9.962Zm0-1.66A8.26 8.26 0 0 1 1.67 9.96c0-4.61 3.672-8.3 8.281-8.3 4.61 0 8.31 3.69 8.31 8.3 0 4.61-3.69 8.3-8.3 8.3Z"/><path d="m5.87 14.883 5.605-2.735a1.47 1.47 0 0 0 .683-.673l2.725-5.596c.312-.664-.166-1.182-.85-.84L8.447 7.764c-.302.136-.508.341-.674.673L5.03 14.043c-.312.645.196 1.152.84.84Zm4.09-3.72A1.19 1.19 0 0 1 8.77 9.97c0-.664.527-1.201 1.19-1.201a1.2 1.2 0 0 1 1.202 1.2c0 .655-.537 1.192-1.201 1.192Z"/></g></svg></div><div class="step-text">${R("1) Open in your main browser")}</div></div>`}<div class="description-step"><div class="svg-wrap"><svg id="pwa-share" width="25" height="32" viewBox="0 0 17.695 26.475"><g fill="currentColor"><path d="M17.334 10.762v9.746c0 2.012-1.025 3.027-3.066 3.027H3.066C1.026 23.535 0 22.52 0 20.508v-9.746C0 8.75 1.025 7.734 3.066 7.734h2.94v1.573h-2.92c-.977 0-1.514.527-1.514 1.543v9.57c0 1.015.537 1.543 1.514 1.543h11.152c.967 0 1.524-.527 1.524-1.543v-9.57c0-1.016-.557-1.543-1.524-1.543h-2.91V7.734h2.94c2.04 0 3.066 1.016 3.066 3.028Z"/><path d="M8.662 15.889c.42 0 .781-.352.781-.762V5.097l-.058-1.464.654.693 1.484 1.582a.698.698 0 0 0 .528.235c.4 0 .713-.293.713-.694 0-.205-.088-.361-.235-.508l-3.3-3.183c-.196-.196-.362-.264-.567-.264-.195 0-.361.069-.566.264L4.795 4.94a.681.681 0 0 0-.225.508c0 .4.293.694.703.694.186 0 .4-.079.538-.235l1.474-1.582.664-.693-.058 1.465v10.029c0 .41.351.762.771.762Z"/></g></svg></div><div class="step-text">${R("2) Press Share in Navigation bar").replace(d?"2)":"0)","1)")}</div></div><div class="description-step"><div class="svg-wrap">${d?m.html`<svg id="pwa-add" viewBox="0 0 23.389 17.979" width="25" height="25"><g fill="currentColor"><path d="M1.045 3.291v1.377h20.937V3.291Zm2.021 14.688h16.895c2.05 0 3.066-1.006 3.066-3.018V3.027C23.027 1.016 22.012 0 19.961 0H3.066C1.026 0 0 1.016 0 3.027v11.934c0 2.012 1.025 3.018 3.066 3.018Zm.02-1.573c-.977 0-1.514-.517-1.514-1.533V3.115c0-1.015.537-1.543 1.514-1.543H19.94c.967 0 1.514.528 1.514 1.543v11.758c0 1.016-.547 1.533-1.514 1.533Z"/><path d="M4.2 14.014c0 .508.35.85.868.85h12.92c.518 0 .87-.343.87-.85v-1.465c0-.508-.352-.85-.87-.85H5.068c-.517 0-.869.342-.869.85Z"/></g></svg>`:m.html`<svg id="pwa-add" width="25" height="25"><g><path d="m23.40492,1.60784c-1.32504,-1.32504 -3.19052,-1.56912 -5.59644,-1.56912l-10.65243,0c-2.33622,0 -4.2017,0.24408 -5.5267,1.56912c-1.32504,1.34243 -1.56911,3.17306 -1.56911,5.50924l0,10.5827c0,2.40596 0.22665,4.254 1.55165,5.57902c1.34246,1.32501 3.19052,1.5691 5.59647,1.5691l10.60013,0c2.40592,0 4.2714,-0.24408 5.59644,-1.5691c1.325,-1.34245 1.55166,-3.17306 1.55166,-5.57902l0,-10.51293c0,-2.40596 -0.22666,-4.25401 -1.55166,-5.57901zm-0.38355,5.21289l0,11.24518c0,1.51681 -0.20924,2.94643 -1.02865,3.78327c-0.83683,0.83685 -2.30134,1.0635 -3.81815,1.0635l-11.33234,0c-1.51681,0 -2.96386,-0.22665 -3.80073,-1.0635c-0.83683,-0.83684 -1.04607,-2.26646 -1.04607,-3.78327l0,-11.19288c0,-1.5517 0.20924,-3.01617 1.02865,-3.85304c0.83687,-0.83683 2.31876,-1.04607 3.87042,-1.04607l11.28007,0c1.51681,0 2.98132,0.22666 3.81815,1.06353c0.81941,0.81941 1.02865,2.26645 1.02865,3.78327zm-10.53039,12.08205c0.64506,0 1.02861,-0.43586 1.02861,-1.13326l0,-4.34117l4.53294,0c0.66252,0 1.13326,-0.36613 1.13326,-0.99376c0,-0.64506 -0.43586,-1.02861 -1.13326,-1.02861l-4.53294,0l0,-4.53294c0,-0.6974 -0.38355,-1.13326 -1.02861,-1.13326c-0.62763,0 -0.99376,0.45332 -0.99376,1.13326l0,4.53294l-4.51552,0c-0.69737,0 -1.15069,0.38355 -1.15069,1.02861c0,0.62763 0.48817,0.99376 1.15069,0.99376l4.51552,0l0,4.34117c0,0.66252 0.36613,1.13326 0.99376,1.13326z"/></g></svg>`}</div><div class="step-text">${R(d?"2) Press Add to Dock":'3) Scroll down to "Add to Home Screen"')}</div></div></div></div>${z&&l?m.html`<pwa-gallery .screenshots=${r.screenshots} .theme="${d?"apple_desktop":"apple_mobile"}" .rtl="${M}"></pwa-gallery>`:""}<div class="action-buttons">${z?m.html`<button class="dialog-button button gallery" @click=${g}>${d?m.html`<svg id="pwa-gallery" viewBox="0 0 10 6"><path d="m1.102 2.21 3.169 3.24c.22.222.462.333.729.333a.94.94 0 0 0 .378-.083 1.19 1.19 0 0 0 .347-.25L8.89 2.21a.8.8 0 0 0 .246-.593.838.838 0 0 0-.118-.44.884.884 0 0 0-.312-.311.84.84 0 0 0-1.063.167L4.854 3.92h.299L2.359 1.033a.868.868 0 0 0-.642-.286.822.822 0 0 0-.43.119.935.935 0 0 0-.312.312.863.863 0 0 0-.115.44c0 .116.02.223.057.32a.898.898 0 0 0 .185.272Z"/></svg>`:m.html`<svg id="pwa-gallery" width="26" height="26" viewBox="0 0 23.538 18.022"><path d="M2.79 18.022h17.958c1.834 0 2.79-.969 2.79-2.778V2.791C23.538.969 22.582 0 20.748 0H2.791C.956 0 0 .956 0 2.79v12.454c0 1.835.956 2.778 2.79 2.778zM.879 2.83C.878 1.55 1.55.88 2.816.88h17.906c1.228 0 1.938.671 1.938 1.95v12.067L16.756 9.47c-.517-.414-.995-.685-1.615-.685-.607 0-1.085.22-1.576.672L8.927 13.59l-1.938-1.796c-.426-.387-.853-.607-1.382-.607-.504 0-.879.207-1.305.594L.878 14.986zm6.46 6.356a2.39 2.39 0 002.377-2.39c0-1.304-1.072-2.39-2.377-2.39a2.401 2.401 0 00-2.39 2.39 2.393 2.393 0 002.39 2.39z"/></svg>`}</button>`:""}<button class="dialog-button button install" @click=${h}><span class="button-text ${p?"show":"hide"}">${R("Hide Instruction")}</span><span class="button-text ${p?"hide":"show"}"><span>${R(d?"Add to Dock":"Add to Home Screen")}</span><svg viewBox="0 0 25 25"><use href="#pwa-add"></use></svg></span></button></div></article></aside>`};var j=function(e,t,i,o){var a,n=arguments.length,s=n<3?t:o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(n<3?a(s):n>3?a(t,i,s):a(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s},D=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)};let S=class extends m.LitElement{constructor(){super(...arguments),this.manifestUrl="/manifest.json",this.icon="",this.name="",this.description="",this.installDescription="",this.disableDescription=!1,this.disableScreenshots=!1,this.disableScreenshotsApple=!1,this.disableScreenshotsChrome=!1,this.manualApple=!1,this.manualChrome=!1,this.disableChrome=!1,this.disableClose=!1,this.disableFallback=!1,this.useLocalStorage=!1,this.externalPromptEvent=null,this.platforms=[],this.userChoiceResult="",this.isDialogHidden=k.getStorageFlag("pwa-hide-install"),this.isInstallAvailable=!1,this.isAppleMobilePlatform=!1,this.isAppleDesktopPlatform=!1,this.isAndroidFallback=!1,this.isAndroid=!1,this.isUnderStandaloneMode=!1,this.isRelatedAppsInstalled=!1,this._isRTL=!1,this._manifest=new fn,this._howToRequested=!1,this._galleryRequested=!1,this._install={handleEvent:()=>{window.defferedPromptEvent&&(this.hideDialog(),window.defferedPromptEvent.prompt(),window.defferedPromptEvent.userChoice.then((t=>{this.userChoiceResult=t.outcome,k.eventUserChoiceResult(this,this.userChoiceResult)})).catch((t=>{k.eventInstalledFail(this)})),window.defferedPromptEvent=null)},passive:!0},this.install=()=>{this.isAppleMobilePlatform||this.isAppleDesktopPlatform?(this._howToRequested=!0,this.requestUpdate()):this._install.handleEvent()},this._hideDialog={handleEvent:()=>{this.isDialogHidden=!0,k.setStorageFlag("pwa-hide-install",!0,this.useLocalStorage),this.requestUpdate()},passive:!0},this._hideDialogUser=()=>{k.eventUserChoiceResult(this,"dismissed"),this.userChoiceResult="dismissed",this.hideDialog()},this.hideDialog=()=>{this._hideDialog.handleEvent()},this.showDialog=(t=!1)=>{this.isDialogHidden=!1,t&&(this.isInstallAvailable=!0),k.setStorageFlag("pwa-hide-install",!1,this.useLocalStorage),this.requestUpdate()},this.getInstalledRelatedApps=async()=>await k.getInstalledRelatedApps(),this._toggleHowTo={handleEvent:()=>{this._howToRequested=!this._howToRequested,this._howToRequested&&this._galleryRequested&&(this._galleryRequested=!1),this.requestUpdate(),this._howToRequested&&k.eventInstallHowTo(this)},passive:!0},this._toggleGallery={handleEvent:()=>{this._galleryRequested=!this._galleryRequested,this._howToRequested&&this._galleryRequested&&(this._howToRequested=!1),this._galleryRequested&&k.eventGallery(this),this.requestUpdate()},passive:!0},this._init=async()=>{window.defferedPromptEvent=null,await this._checkPlatform(),this._checkInstallAvailable(),"onappinstalled"in window&&window.addEventListener("appinstalled",(t=>{window.defferedPromptEvent=null,this.isInstallAvailable=!1,this.requestUpdate(),k.eventInstalledSuccess(this)})),Object.assign(this,await k.fetchAndProcessManifest(this.manifestUrl,this.icon,this.name,this.description))},this._requestUpdate=()=>{this.requestUpdate()}}static get styles(){return[Dr,gn,Or]}async _checkPlatform(){this.isUnderStandaloneMode=k.isStandalone(),this.isRelatedAppsInstalled=await k.isRelatedAppsInstalled(),this.isAppleMobilePlatform=k.isAppleMobile(),this.isAppleDesktopPlatform=k.isAppleDesktop(),this.isAndroidFallback=k.isAndroidFallback(),this.isAndroid=k.isAndroid()}_checkInstallAvailable(){if(this.isUnderStandaloneMode)return;if(this.isAppleMobilePlatform||this.isAppleDesktopPlatform)return this.manualApple&&this.hideDialog(),void setTimeout((()=>{this.isInstallAvailable=!0,this.requestUpdate(),k.eventInstallAvailable(this)}),1e3);let t=!1;if(!this.disableChrome&&window.BeforeInstallPromptEvent){this.manualChrome&&this.hideDialog();const i=o=>{window.defferedPromptEvent=o,o.preventDefault(),this.platforms=o.platforms,this.isRelatedAppsInstalled?this.isInstallAvailable=!1:(this.isInstallAvailable=!0,k.eventInstallAvailable(this)),this.userChoiceResult==="accepted"&&(this.isDialogHidden=!0,k.eventInstalledSuccess(this)),t=!0,this.isAndroidFallback=!1,this.requestUpdate()};this.externalPromptEvent!=null?setTimeout((()=>i(this.externalPromptEvent)),300):window.addEventListener("beforeinstallprompt",i)}if(!this.disableFallback&&this.isAndroid&&!t){if(this.isAndroidFallback)return void setTimeout((()=>{this.isInstallAvailable=!0,this.requestUpdate(),k.eventInstallAvailable(this)}),1e3);if("userActivation"in navigator&&!this.isRelatedAppsInstalled){const i=navigator.userActivation,o=setInterval((()=>{(i.isActive||i.hasBeenActive)&&(t||(this.isAndroidFallback=!0,this.isInstallAvailable=!0,this.requestUpdate(),k.eventInstallAvailable(this)),clearInterval(o))}),1e3);setTimeout((()=>clearInterval(o)),3e4)}}}async connectedCallback(){await(async t=>{switch(t.slice(0,2)==="nb"&&(t="no"),t){case"zh":case"zh-TW":t="zh-CN"}try{un.get(t)?await ca(t):await ca(t.slice(0,2))}catch{}})(navigator.language),this._isRTL=["ar","he","fa","ur"].includes(Pr()),this._init(),super.connectedCallback()}willUpdate(t){this.externalPromptEvent&&t.has("externalPromptEvent")&&typeof this.externalPromptEvent=="object"&&this._init()}render(){return this.isAppleMobilePlatform||this.isAppleDesktopPlatform?m.html`${zr(this.name,this.description,this.installDescription,this.disableDescription,this.disableScreenshots||this.disableScreenshotsApple,this.disableClose,this.icon,this._manifest,this.isInstallAvailable&&!this.isDialogHidden,this._hideDialogUser,this._toggleHowTo,this.isAppleDesktopPlatform,this._howToRequested,this._toggleGallery,this._galleryRequested,this._isRTL)}`:m.html`${Mr(this.name,this.description,this.installDescription,this.disableDescription,this.disableScreenshots||this.disableScreenshotsChrome,this.disableClose,this.icon,this._manifest,this.isInstallAvailable&&!this.isDialogHidden,this._hideDialogUser,this._install,this._toggleGallery,this._galleryRequested,this._toggleHowTo,this._howToRequested,this.isAndroidFallback,this._isRTL)}`}};j([(0,_.property)({attribute:"manifest-url"}),D("design:type",Object)],S.prototype,"manifestUrl",void 0),j([(0,_.property)(),D("design:type",Object)],S.prototype,"icon",void 0),j([(0,_.property)(),D("design:type",Object)],S.prototype,"name",void 0),j([(0,_.property)(),D("design:type",Object)],S.prototype,"description",void 0),j([(0,_.property)({attribute:"install-description"}),D("design:type",Object)],S.prototype,"installDescription",void 0),j([(0,_.property)({attribute:"disable-install-description",type:Boolean}),D("design:type",Object)],S.prototype,"disableDescription",void 0),j([(0,_.property)({attribute:"disable-screenshots",type:Boolean}),D("design:type",Object)],S.prototype,"disableScreenshots",void 0),j([(0,_.property)({attribute:"disable-screenshots-apple",type:Boolean}),D("design:type",Object)],S.prototype,"disableScreenshotsApple",void 0),j([(0,_.property)({attribute:"disable-screenshots-chrome",type:Boolean}),D("design:type",Object)],S.prototype,"disableScreenshotsChrome",void 0),j([(0,_.property)({attribute:"manual-apple",type:Boolean}),D("design:type",Object)],S.prototype,"manualApple",void 0),j([(0,_.property)({attribute:"manual-chrome",type:Boolean}),D("design:type",Object)],S.prototype,"manualChrome",void 0),j([(0,_.property)({attribute:"disable-chrome",type:Boolean}),D("design:type",Object)],S.prototype,"disableChrome",void 0),j([(0,_.property)({attribute:"disable-close",type:Boolean}),D("design:type",Object)],S.prototype,"disableClose",void 0),j([(0,_.property)({attribute:"disable-android-fallback",type:Boolean}),D("design:type",Object)],S.prototype,"disableFallback",void 0),j([(0,_.property)({attribute:"use-local-storage",type:Boolean}),D("design:type",Object)],S.prototype,"useLocalStorage",void 0),j([(0,_.state)(),D("design:type",Object)],S.prototype,"externalPromptEvent",void 0),S=j([(e,t)=>(e.addInitializer(Xs),e)],S),customElements.get("pwa-install")||customElements.define("pwa-install",S);var We=typeof self<"u"?self:{};function Zt(e,t){e:{for(var i=["CLOSURE_FLAGS"],o=We,a=0;a<i.length;a++)if((o=o[i[a]])==null){i=null;break e}i=o}return(e=i&&i[e])!=null?e:t}let Rr;const Ur=typeof TextEncoder<"u";function bn(e){if(Ur)e=(Rr||=new TextEncoder).encode(e);else{let i=0;const o=new Uint8Array(3*e.length);for(let a=0;a<e.length;a++){var t=e.charCodeAt(a);if(t<128)o[i++]=t;else{if(t<2048)o[i++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&a<e.length){const n=e.charCodeAt(++a);if(n>=56320&&n<=57343){t=1024*(t-55296)+n-56320+65536,o[i++]=t>>18|240,o[i++]=t>>12&63|128,o[i++]=t>>6&63|128,o[i++]=63&t|128;continue}a--}t=65533}o[i++]=t>>12|224,o[i++]=t>>6&63|128}o[i++]=63&t|128}}e=i===o.length?o:o.subarray(0,i)}return e}var mo,Br=Zt(610401301,!1),da=Zt(748402147,!0),Nr=Zt(824656860,Zt(1,!0));function ha(){var e=We.navigator;return e&&(e=e.userAgent)?e:""}const pa=We.navigator;mo=pa&&pa.userAgentData||null;const mn={};let ht=null;function Hr(e){const t=e.length;let i=3*t/4;i%3?i=Math.floor(i):"=.".indexOf(e[t-1])!=-1&&(i="=.".indexOf(e[t-2])!=-1?i-2:i-1);const o=new Uint8Array(i);let a=0;return(function(n,s){function r(c){for(;l<n.length;){const h=n.charAt(l++),d=ht[h];if(d!=null)return d;if(!/^[\s\xa0]*$/.test(h))throw Error("Unknown base64 encoding at char: "+h)}return c}vn();let l=0;for(;;){const c=r(-1),h=r(0),d=r(64),p=r(64);if(p===64&&c===-1)break;s(c<<2|h>>4),d!=64&&(s(h<<4&240|d>>2),p!=64&&s(d<<6&192|p))}})(e,(function(n){o[a++]=n})),a!==i?o.subarray(0,a):o}function vn(){if(!ht){ht={};var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"];for(let i=0;i<5;i++){const o=e.concat(t[i].split(""));mn[i]=o;for(let a=0;a<o.length;a++){const n=o[a];ht[n]===void 0&&(ht[n]=a)}}}}var Fr=typeof Uint8Array<"u",yn=!(!(Br&&mo&&mo.brands.length>0)&&(ha().indexOf("Trident")!=-1||ha().indexOf("MSIE")!=-1))&&typeof btoa=="function";const ua=/[-_.]/g,qr={"-":"+",_:"/",".":"="};function Vr(e){return qr[e]||""}function fa(e){if(!yn)return Hr(e);e=ua.test(e)?e.replace(ua,Vr):e,e=atob(e);const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}function vo(e){return Fr&&e!=null&&e instanceof Uint8Array}var kt={};function ji(){return Gr||=new ce(null,kt)}var ce=class{constructor(e,t){if(wn(t),this.i=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}};let Gr,Wr;function wn(e){if(e!==kt)throw Error("illegal external caller")}function xn(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}function $t(e){return xn(e=Error(e),"warning"),e}function Yt(e,t){if(e!=null){var i=Wr??={},o=i[e]||0;o>=t||(i[e]=o+1,xn(e=Error(),"incident"),(function(a){We.setTimeout((()=>{throw a}),0)})(e))}}function Mo(){return typeof BigInt=="function"}var li=typeof Symbol=="function"&&typeof Symbol()=="symbol";function Et(e,t,i=!1){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?i&&Symbol.for&&e?Symbol.for(e):e!=null?Symbol(e):Symbol():t}var Zr=Et("jas",void 0,!0),lt=Et(void 0,"1oa"),yo=Et(void 0,"0ubsb"),Yr=Et(void 0,"0actk"),ci=Et("m_m","pa",!0);const _n={ha:{value:0,configurable:!0,writable:!0,enumerable:!1}},kn=Object.defineProperties,v=li?Zr:"ha";var Ze;const ga=[];function $n(e,t){li||v in e||kn(e,_n),e[v]|=t}function N(e,t){li||v in e||kn(e,_n),e[v]=t}N(ga,7),Ze=Object.freeze(ga);var di={};function X(e,t){return t===void 0?e.i!==Ye&&!!(2&(0|e.m[v])):!!(2&t)&&e.i!==Ye}const Ye={};var Kr=Object.freeze({});function hi(e){return e.oa=!0,e}var Jr=hi((e=>typeof e=="number")),An=hi((e=>typeof e=="string")),Xr=hi((e=>typeof e=="boolean")),pi=typeof We.BigInt=="function"&&typeof We.BigInt(0)=="bigint",Qr=hi((e=>pi?e>=tl&&e<=ol:e[0]==="-"?ba(e,el):ba(e,il)));const el=Number.MIN_SAFE_INTEGER.toString(),tl=pi?BigInt(Number.MIN_SAFE_INTEGER):void 0,il=Number.MAX_SAFE_INTEGER.toString(),ol=pi?BigInt(Number.MAX_SAFE_INTEGER):void 0;function ba(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let i=0;i<e.length;i++){const o=e[i],a=t[i];if(o>a)return!1;if(o<a)return!0}}let al,$=0,T=0;function ma(e){const t=e>>>0;$=t,T=(e-t)/4294967296>>>0}function At(e){if(e<0){ma(-e);const[t,i]=zo($,T);$=t>>>0,T=i>>>0}else ma(e)}function Sn(e,t){const i=4294967296*t+(e>>>0);return Number.isSafeInteger(i)?i:Kt(e,t)}function Kt(e,t){if(e>>>=0,(t>>>=0)<=2097151)var i=""+(4294967296*t+e);else Mo()?i=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(i=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),i+=8147497*t,t*=2,e>=1e7&&(i+=e/1e7>>>0,e%=1e7),i>=1e7&&(t+=i/1e7>>>0,i%=1e7),i=t+va(i)+va(e));return i}function va(e){return e=String(e),"0000000".slice(e.length)+e}function ui(e){if(e.length<16)At(Number(e));else if(Mo())e=BigInt(e),$=Number(e&BigInt(4294967295))>>>0,T=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");T=$=0;const i=e.length;for(let o=t,a=(i-t)%6+t;a<=i;o=a,a+=6){const n=Number(e.slice(o,a));T*=1e6,$=1e6*$+n,$>=4294967296&&(T+=Math.trunc($/4294967296),T>>>=0,$>>>=0)}if(t){const[o,a]=zo($,T);$=o,T=a}}}function zo(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function gt(e){return Array.prototype.slice.call(e)}const nl=typeof BigInt=="function"?BigInt.asIntN:void 0,sl=typeof BigInt=="function"?BigInt.asUintN:void 0,Jt=Number.isSafeInteger,it=Number.isFinite,Xt=Math.trunc;function Ci(e){if(e!=null&&typeof e!="number")throw Error(`Value of float/double field must be a number, found ${typeof e}: ${e}`);return e}function En(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function Te(e){if(e!=null&&typeof e!="boolean"){var t=typeof e;throw Error(`Expected boolean but got ${t!="object"?t:e?Array.isArray(e)?"array":t:"null"}: ${e}`)}return e}function we(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}const rl=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function Tn(e){switch(typeof e){case"bigint":return!0;case"number":return it(e);case"string":return rl.test(e);default:return!1}}function Pn(e){if(typeof e!="number"||!it(e))throw $t("int32");return 0|e}function wo(e){return e==null?e:Pn(e)}function ot(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return it(e)?0|e:void 0}function Qt(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return it(e)?e>>>0:void 0}function Ro(e){return e==null||typeof e=="string"?e:void 0}function Ln(e,t,i){if(e!=null&&e[ci]===di)return e;if(Array.isArray(e)){var o=0|e[v];return(i=o|32&i|2&i)!==o&&N(e,i),new t(e)}}function fi(e,t,i,o){var a=o!==void 0;o=!!o;const n=[];var s=e.length;let r,l=4294967295,c=!1;const h=!!(64&t),d=h?128&t?0:-1:void 0;for(1&t||(r=s&&e[s-1],r!=null&&typeof r=="object"&&r.constructor===Object?l=--s:r=void 0,!h||128&t||a||(c=!0,l=l-d+d)),t=void 0,a=0;a<s;a++){let p=e[a];if(p!=null&&(p=i(p,o))!=null)if(h&&a>=l){const g=a-d;(t??={})[g]=p}else n[a]=p}if(r)for(let p in r){if((e=r[p])==null||(e=i(e,o))==null)continue;let g;s=+p,h&&!Number.isNaN(s)&&(g=s+d)<l?n[g]=e:(t??={})[p]=e}return t&&(c?n.push(t):n[l]=t),n}function Uo(e){switch(typeof e){case"number":return Number.isFinite(e)?e:""+e;case"bigint":return Qr(e)?Number(e):""+e;case"boolean":return e?1:0;case"object":if(Array.isArray(e)){var t=0|e[v];return e.length===0&&1&t?void 0:fi(e,t,Uo)}if(e!=null&&e[ci]===di)return In(e);if(e instanceof ce){if((t=e.i)==null)e="";else if(typeof t=="string")e=t;else{if(yn){for(var i="",o=0,a=t.length-10240;o<a;)i+=String.fromCharCode.apply(null,t.subarray(o,o+=10240));i+=String.fromCharCode.apply(null,o?t.subarray(o):t),t=btoa(i)}else{i===void 0&&(i=0),vn(),i=mn[i],o=Array(Math.floor(t.length/3)),a=i[64]||"";let c=0,h=0;for(;c<t.length-2;c+=3){var n=t[c],s=t[c+1],r=t[c+2],l=i[n>>2];n=i[(3&n)<<4|s>>4],s=i[(15&s)<<2|r>>6],r=i[63&r],o[h++]=l+n+s+r}switch(l=0,r=a,t.length-c){case 2:r=i[(15&(l=t[c+1]))<<2]||a;case 1:t=t[c],o[h]=i[t>>2]+i[(3&t)<<4|l>>4]+r+a}t=o.join("")}e=e.i=t}return e}return}return e}function In(e){return fi(e=e.m,0|e[v],Uo)}let ll,cl;function jn(e,t,i,o=0){if(e==null){var a=32;i?(e=[i],a|=128):e=[],t&&(a=-16760833&a|(1023&t)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(a=0|e[v],da&&1&a)throw Error("rfarr");if(2048&a&&!(2&a)&&(function(){if(da)throw Error("carr");Yt(Yr,5)})(),256&a)throw Error("farr");if(64&a)return(a|o)!==a&&N(e,a|o),e;if(i&&(a|=128,i!==e[0]))throw Error("mid");e:{a|=64;var n=(i=e).length;if(n){var s=n-1;const l=i[s];if(l!=null&&typeof l=="object"&&l.constructor===Object){if((s-=t=128&a?0:-1)>=1024)throw Error("pvtlmt");for(var r in l)(n=+r)<s&&(i[n+t]=l[r],delete l[r]);a=-16760833&a|(1023&s)<<14;break e}}if(t){if((r=Math.max(t,n-(128&a?0:-1)))>1024)throw Error("spvt");a=-16760833&a|(1023&r)<<14}}}return N(e,64|a|o),e}function dl(e,t){if(typeof e!="object")return e;if(Array.isArray(e)){var i=0|e[v];return e.length===0&&1&i?e=void 0:2&i||(!t||4096&i||16&i?e=ei(e,i,!1,t&&!(16&i)):($n(e,34),4&i&&Object.freeze(e))),e}return e!=null&&e[ci]===di?X(e,i=0|(t=e.m)[v])?e:Dn(e,t,i)?Cn(e,t):ei(t,i):e instanceof ce?e:void 0}function Cn(e,t,i){return e=new e.constructor(t),i&&(e.i=Ye),e.o=Ye,e}function ei(e,t,i,o){return o??=!!(34&t),e=fi(e,t,dl,o),o=32,i&&(o|=2),N(e,t=16769217&t|o),e}function gi(e){if(e.i!==Ye)return!1;var t=e.m;return $n(t=ei(t,0|t[v]),2048),e.m=t,e.i=void 0,e.o=void 0,!0}function at(e){if(!gi(e)&&X(e,0|e.m[v]))throw Error()}function Ke(e,t){t===void 0&&(t=0|e[v]),32&t&&!(4096&t)&&N(e,4096|t)}function Dn(e,t,i){return!!(2&i)||!(!(32&i)||4096&i)&&(N(t,2|i),e.i=Ye,!0)}function Y(e,t,i){if((e=bi(e.m,t,void 0,i))!==null)return e}function bi(e,t,i,o){if(t===-1)return null;const a=t+(i?0:-1),n=e.length-1;let s,r;if(!(n<1+(i?0:-1))){if(a>=n)if(s=e[n],s!=null&&typeof s=="object"&&s.constructor===Object)i=s[t],r=!0;else{if(a!==n)return;i=s}else i=e[a];if(o&&i!=null){if((o=o(i))==null)return o;if(!Object.is(o,i))return r?s[t]=o:e[a]=o,o}return i}}function Le(e,t,i){at(e),oe(e=e.m,0|e[v],t,i)}function oe(e,t,i,o,a){const n=i+-1;var s=e.length-1;if(s>=0&&n>=s){const r=e[s];if(r!=null&&typeof r=="object"&&r.constructor===Object)return r[i]=o,t}return n<=s?(e[n]=o,t):(o!==void 0&&(i>=(s=(t??=0|e[v])>>14&1023||536870912)?o!=null&&(e[s+-1]={[i]:o}):e[n]=o),t)}function On(e,t,i,o,a){let n=e.m,s=0|n[v];o=X(e,s)?1:o,a=!!a||o===3,o===2&&gi(e)&&(n=e.m,s=0|n[v]);let r=(e=zn(n,t))===Ze?7:0|e[v],l=Rn(r,s);var c=!(4&l);if(c){4&l&&(e=gt(e),r=0,l=bt(l,s),s=oe(n,s,t,e));let h=0,d=0;for(;h<e.length;h++){const p=i(e[h]);p!=null&&(e[d++]=p)}d<h&&(e.length=d),i=-513&(4|l),l=i&=-1025,l&=-4097}return l!==r&&(N(e,l),2&l&&Object.freeze(e)),Mn(e,l,n,s,t,o,c,a)}function Mn(e,t,i,o,a,n,s,r){let l=t;return n===1||n===4&&(2&t||!(16&t)&&32&o)?Ut(t)||((t|=!e.length||s&&!(4096&t)||32&o&&!(4096&t||16&t)?2:256)!==l&&N(e,t),Object.freeze(e)):(n===2&&Ut(t)&&(e=gt(e),l=0,t=bt(t,o),o=oe(i,o,a,e)),Ut(t)||(r||(t|=16),t!==l&&N(e,t))),2&t||!(4096&t||16&t)||Ke(i,o),e}function zn(e,t,i){return e=bi(e,t,i),Array.isArray(e)?e:Ze}function Rn(e,t){return 2&t&&(e|=2),1|e}function Ut(e){return!!(2&e)&&!!(4&e)||!!(256&e)}function Un(e,t,i){at(e);let o=0|(e=e.m)[v];if(i==null)oe(e,o,t);else{var a=i===Ze?7:0|i[v],n=a,s=Ut(a),r=s||Object.isFrozen(i);for(s||(a=0),r||(i=gt(i),n=0,a=bt(a,o),r=!1),a|=5,a|=(4&a?512&a?512:1024&a?1024:0:void 0)??(Nr?1024:0),s=0;s<i.length;s++){const l=i[s],c=Pn(l);Object.is(l,c)||(r&&(i=gt(i),n=0,a=bt(a,o),r=!1),i[s]=c)}a!==n&&(r&&(i=gt(i),a=bt(a,o)),N(i,a)),oe(e,o,t,i)}}function Z(e,t,i,o){at(e),oe(e=e.m,0|e[v],t,(o==="0"?Number(i)===0:i===o)?void 0:i)}function ya(e){if(li)return e[lt]??(e[lt]=new Map);if(lt in e)return e[lt];const t=new Map;return Object.defineProperty(e,lt,{value:t}),t}function wa(e,t,i){var o=oi;let a=e.get(o);if(a!=null)return a;a=0;for(let n=0;n<o.length;n++){const s=o[n];bi(t,s)!=null&&(a!==0&&(i=oe(t,i,a)),a=s)}return e.set(o,a),a}function St(e,t,i){let o=e.m,a=0|o[v];if(t=(function(r,l,c,h){let d=!1;if((h=bi(r,h,void 0,(p=>{const g=Ln(p,c,l);return d=g!==p&&g!=null,g})))!=null)return d&&!X(h)&&Ke(r,l),h})(o,a,t,i),t==null)return t;if(a=0|o[v],!X(e,a)){var n,s=t;const r=s.m,l=0|r[v];(n=X(s,l)?Dn(s,r,l)?Cn(s,r,!0):new s.constructor(ei(r,l,!1)):s)!==t&&(gi(e)&&(o=e.m,a=0|o[v]),a=oe(o,a,i,t=n),Ke(o,a))}return t}function Bn(e){return e==null&&(e=void 0),e}function ve(e,t,i){return Le(e,t,i=Bn(i)),i&&!X(i)&&Ke(e.m),e}function bt(e,t){return-273&(2&t?2|e:-3&e)}function pt(e,t,i,o){var a=o;at(e);var n=o=e.m,s=0|o[v];const r=X(e,s)?1:2;r===2&&gi(e)&&(s=0|(n=e.m)[v]);let l=(e=zn(n,t))===Ze?7:0|e[v];var c=Rn(l,s);const h=!(4&c);if(h){var d=e,p=s;const g=!!(2&c);g&&(p|=2);let x=!g,M=!0,z=0,se=0;for(;z<d.length;z++){const q=Ln(d[z],i,p);if(q instanceof i){if(!g){const Ce=X(q);x&&=!Ce,M&&=Ce}d[se++]=q}}se<z&&(d.length=se),c|=4,c=M?-4097&c:4096|c,c=x?8|c:-9&c}c!==l&&(N(e,c),2&c&&Object.freeze(e)),t=e=Mn(e,c,n,s,t,r,h,!0),a=a??new i,t.push(a),n=i=t===Ze?7:0|t[v],(a=X(a))?(i&=-9,t.length===1&&(i&=-4097)):i|=4096,i!==n&&N(t,i),a||Ke(o)}function U(e,t){return Qt(Y(e,t))??0}function ee(e,t,i){Z(e,t,wo(i),0)}function ct(e,t,i){if(i!=null){if(typeof i!="number"||!it(i))throw $t("uint32");i>>>=0}Le(e,t,i)}function H(e,t,i){if(i!=null&&typeof i!="string")throw Error();Z(e,t,i,"")}function b(e,t,i){if(at(e),t=(e=On(e,t,Ro,2,!0)).push,typeof i!="string")throw Error();t.call(e,i)}var Oe=class{constructor(e,t,i){if(this.buffer=e,i&&!t)throw Error()}};function xa(e){if(typeof e=="string")return new Oe(fa(e),!0);if(Array.isArray(e))return new Oe(new Uint8Array(e),!0);if(e.constructor===Uint8Array)return new Oe(e,!1);if(e.constructor===ArrayBuffer)return e=new Uint8Array(e),new Oe(e,!1);if(e.constructor===ce){wn(kt);var t=e.i;return t=((t=t==null||vo(t)?t:typeof t=="string"?fa(t):null)==null?t:e.i=t)||new Uint8Array(0),new Oe(t,!0,e)}if(e instanceof Uint8Array)return e=e.constructor===Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Oe(e,!1);throw Error()}function _a(e){return e?/^\d+$/.test(e)?(ui(e),new xo($,T)):null:hl||=new xo(0,0)}var xo=class{constructor(e,t){this.j=e>>>0,this.i=t>>>0}};let hl;function ka(e){return e?/^-?\d+$/.test(e)?(ui(e),new _o($,T)):null:pl||=new _o(0,0)}var _o=class{constructor(e,t){this.j=e>>>0,this.i=t>>>0}};let pl;function Ne(e,t,i){for(;i>0||t>127;)e.i.push(127&t|128),t=(t>>>7|i<<25)>>>0,i>>>=7;e.i.push(t)}function mi(e,t){for(;t>127;)e.i.push(127&t|128),t>>>=7;e.i.push(t)}function vi(e,t){if(t>=0)mi(e,t);else{for(let i=0;i<9;i++)e.i.push(127&t|128),t>>=7;e.i.push(1)}}function ti(e,t){t.length!==0&&(e.l.push(t),e.j+=t.length)}function he(e,t,i){mi(e.i,8*t+i)}function yi(e,t){return he(e,t,2),t=e.i.end(),ti(e,t),t.push(e.j),t}function wi(e,t){var i=t.pop();for(i=e.j+e.i.length()-i;i>127;)t.push(127&i|128),i>>>=7,e.j++;t.push(i),e.j++}function ii(e,t,i){he(e,t,2),mi(e.i,i.length),ti(e,e.i.end()),ti(e,i)}function ae(){const e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var Tt=ae(),Nn=ae(),xi=ae(),_i=ae(),ul=ae(),fl=ae(),gl=ae(),Hn=ae(),bl=ae(),Bo=ae(),I=class{constructor(e,t){this.m=jn(e,t,void 0,2048)}toJSON(){return In(this)}};I.prototype[ci]=di,I.prototype.toString=function(){return this.m.toString()};var ne=class{constructor(e,t){this.i=e,e=Tt,this.j=!!e&&t===e||!1}};function Fn(e,t,i,o,a){(t=Vn(t,o))!=null&&(i=yi(e,i),a(t,e),wi(e,i))}const ml=new ne(Fn,Tt),vl=new ne(Fn,Tt);var $a=Symbol(),Aa=Symbol();let qn;function ki(e){var t=yl,i=wl,o=e[$a];if(o)return o;(o={}).na=e,o.W=(function(h){switch(typeof h){case"boolean":return ll||=[0,void 0,!0];case"number":return h>0?void 0:h===0?cl||=[0,void 0]:[-h,void 0];case"string":return[0,h];case"object":return h}})(e[0]);var a=e[1];let n=1;a&&a.constructor===Object&&(o.ca=a,typeof(a=e[++n])=="function"&&(o.ia=!0,qn??=e[n+1],a=e[n+=2]));const s={};for(;a&&Array.isArray(a)&&a.length&&typeof a[0]=="number"&&a[0]>0;){for(var r=0;r<a.length;r++)s[a[r]]=a;a=e[++n]}for(r=1;a!==void 0;){let h;typeof a=="number"&&(r+=a,a=e[++n]);var l=void 0;if(a instanceof ne?h=a:(h=ml,n--),h?.j){a=e[++n],l=e;var c=n;typeof a=="function"&&(a=a(),l[c]=a),l=a}for(c=r+1,typeof(a=e[++n])=="number"&&a<0&&(c-=a,a=e[++n]);r<c;r++)l?i(o,r,h,l):t(o,r,h)}return e[$a]=o}function Vn(e,t){return e instanceof I?e.m:Array.isArray(e)?jn(e,t[0],t[1]):void 0}function yl(e,t,i){e[t]=i.i}function wl(e,t,i,o){let a,n;const s=i.i;e[t]=(r,l,c)=>s(r,l,c,n||=ki(o).W,a||=Gn(o))}function Gn(e){let t=e[Aa];if(!t){const i=ki(e);t=(o,a)=>Wn(o,a,i),e[Aa]=t}return t}function Wn(e,t,i){(function(o,a,n){const s=128&a?0:-1,r=o.length;var l;(l=!!r)&&(l=(l=o[r-1])!=null&&typeof l=="object"&&l.constructor===Object);const c=r+(l?-1:0);for(a=128&a?1:0;a<c;a++)n(a-s,o[a]);if(l){o=o[r-1];for(const h in o)!isNaN(h)&&n(+h,o[h])}})(e,0|e[v],((o,a)=>{if(a!=null){var n=(function(s,r){var l=s[r];if(l)return l;if((l=s.ca)&&(l=l[r])){var c=(l=Array.isArray(l)?l[0]instanceof ne?l:[vl,l]:[l,void 0])[0].i;if(l=l[1]){const h=Gn(l),d=ki(l).W;l=s.ia?qn(d,h):(p,g,x)=>c(p,g,x,d,h)}else l=c;return s[r]=l}})(i,o);n?n(t,a,o):o<500||Yt(yo,3)}}))}var Di,Se=0,Me=Se;if(An(Me)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(Me))throw Error(String(Me))}else if((Di=Jr(Me))&&(Di=!Number.isSafeInteger(Me)),Di)throw Error(String(Me));function No(e,t){if(Array.isArray(t)){var i=0|t[v];if(4&i)return t;for(var o=0,a=0;o<t.length;o++){const n=e(t[o]);n!=null&&(t[a++]=n)}return a<o&&(t.length=a),(e=-1537&(5|i))!==i&&N(t,e),2&e&&Object.freeze(t),t}}function O(e,t){return new ne(e,t)}function Zn(e,t,i){(t=En(t))!=null&&(he(e,i,5),e=e.i,(i=al||=new DataView(new ArrayBuffer(8))).setFloat32(0,+t,!0),T=0,t=$=i.getUint32(0,!0),e.i.push(t>>>0&255),e.i.push(t>>>8&255),e.i.push(t>>>16&255),e.i.push(t>>>24&255))}function Ho(e,t,i){(t=ot(t))!=null&&t!=null&&(he(e,i,0),vi(e.i,t))}function Yn(e,t,i){(t=we(t))!=null&&(he(e,i,0),e.i.i.push(t?1:0))}function Fo(e,t,i){(t=Ro(t))!=null&&ii(e,i,bn(t))}function Kn(e,t,i,o,a){(t=Vn(t,o))!=null&&(i=yi(e,i),a(t,e),wi(e,i))}function Jn(e,t,i){(t=ot(t))!=null&&(t=parseInt(t,10),he(e,i,0),vi(e.i,t))}pi||(Se=Xr(Se)?Se?"1":"0":An(Se)?Se.trim()||"0":String(Se));var Je,Ot=O(Zn,Hn),ko=O(Zn,Hn),Oi=O((function(e,t,i){if(t=(function(o){if(o==null)return o;var a=typeof o;if(a==="bigint")return String(nl(64,o));if(Tn(o)){if(a==="string"){if(a=Xt(Number(o)),Jt(a))o=String(a);else if((a=o.indexOf("."))!==-1&&(o=o.substring(0,a)),a=o.length,!(o[0]==="-"?a<20||a===20&&o<="-9223372036854775808":a<19||a===19&&o<="9223372036854775807"))if(ui(o),o=$,2147483648&(a=T))if(Mo())o=""+(BigInt(0|a)<<BigInt(32)|BigInt(o>>>0));else{const[s,r]=zo(o,a);o="-"+Kt(s,r)}else o=Kt(o,a);return o}if(a==="number"){if(o=Xt(o),!Jt(o)){At(o),a=$;var n=T;(o=2147483648&n)&&(n=~n>>>0,(a=1+~a>>>0)==0&&(n=n+1>>>0)),o=typeof(a=Sn(a,n))=="number"?o?-a:a:o?"-"+a:a}return o}}})(t),t!=null&&(typeof t=="string"&&ka(t),t!=null))switch(he(e,i,0),typeof t){case"number":e=e.i,At(t),Ne(e,$,T);break;case"bigint":i=BigInt.asUintN(64,t),i=new _o(Number(i&BigInt(4294967295)),Number(i>>BigInt(32))),Ne(e.i,i.j,i.i);break;default:i=ka(t),Ne(e.i,i.j,i.i)}}),fl),xl=O((function(e,t,i){if(t=(function(o){if(o==null)return o;var a=typeof o;if(a==="bigint")return String(sl(64,o));if(Tn(o)){if(a==="string")return a=Xt(Number(o)),Jt(a)&&a>=0?o=String(a):((a=o.indexOf("."))!==-1&&(o=o.substring(0,a)),(a=o[0]!=="-"&&((a=o.length)<20||a===20&&o<="18446744073709551615"))||(ui(o),o=Kt($,T))),o;if(a==="number")return(o=Xt(o))>=0&&Jt(o)||(At(o),o=Sn($,T)),o}})(t),t!=null&&(typeof t=="string"&&_a(t),t!=null))switch(he(e,i,0),typeof t){case"number":e=e.i,At(t),Ne(e,$,T);break;case"bigint":i=BigInt.asUintN(64,t),i=new xo(Number(i&BigInt(4294967295)),Number(i>>BigInt(32))),Ne(e.i,i.j,i.i);break;default:i=_a(t),Ne(e.i,i.j,i.i)}}),gl),W=O(Ho,_i);Je=new ne((function(e,t,i){if((t=No(ot,t))!=null&&t.length){i=yi(e,i);for(let o=0;o<t.length;o++)vi(e.i,t[o]);wi(e,i)}}),_i);var F,y=O(Ho,_i),_l=O(Ho,_i),E=O(Yn,Nn),A=O(Yn,Nn),C=O(Fo,xi);F=new ne((function(e,t,i){if((t=No(Ro,t))!=null)for(let s=0;s<t.length;s++){var o=e,a=i,n=t[s];n!=null&&ii(o,a,bn(n))}}),xi);var qo,V=O(Fo,xi),Xn=O(Fo,xi),J=(function(e,t,i=Tt){return new ne(t,i)})(0,(function(e,t,i,o,a){if(Array.isArray(t)){for(let n=0;n<t.length;n++)Kn(e,t[n],i,o,a);1&(e=0|t[v])||N(t,1|e)}})),G=new ne(Kn,Tt),kl=O((function(e,t,i){(t=Qt(t))!=null&&t!=null&&(he(e,i,0),mi(e.i,t))}),ul),ge=O(Jn,Bo);qo=new ne((function(e,t,i){if((t=No(ot,t))!=null&&t.length){i=yi(e,i);for(let o=0;o<t.length;o++)vi(e.i,t[o]);wi(e,i)}}),Bo);var de=O(Jn,Bo);function Pt(e){return function(){const t=new class{constructor(){this.l=[],this.j=0,this.i=new class{constructor(){this.i=[]}length(){return this.i.length}end(){const s=this.i;return this.i=[],s}}}};Wn(this.m,t,ki(e)),ti(t,t.i.end());const i=new Uint8Array(t.j),o=t.l,a=o.length;let n=0;for(let s=0;s<a;s++){const r=o[s];i.set(r,n),n+=r.length}return t.l=[i],i}}function Mi(e,t){if(t!=null)if(Array.isArray(t))Le(e,2,fi(t,0,Uo));else{if(!(typeof t=="string"||t instanceof ce||vo(t)))throw Error("invalid value in Any.value field: "+t+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");if(t!=null){if(typeof t=="string")t=t?new ce(t,kt):ji();else if(t.constructor!==ce){if(!vo(t))throw Error();t=t.length?new ce(new Uint8Array(t),kt):ji()}}Z(e,2,t,ji())}}var ze=class extends I{constructor(e){super(e)}},Sa=[0,V,O((function(e,t,i){if(t!=null){if(t instanceof I){const o=t.qa;return void(o?(t=o(t),t!=null&&ii(e,i,xa(t).buffer)):Yt(yo,3))}if(Array.isArray(t))return void Yt(yo,3)}(t=t==null||typeof t=="string"||t instanceof ce?t:void 0)!=null&&ii(e,i,xa(t).buffer)}),bl)];let zi,Ea=globalThis.trustedTypes;function Ta(e){var t;return zi===void 0&&(zi=(function(){let i=null;if(!Ea)return i;try{const o=a=>a;i=Ea.createPolicy("goog#html",{createHTML:o,createScript:o,createScriptURL:o})}catch{}return i})()),e=(t=zi)?t.createScriptURL(e):e,new class{constructor(i){this.i=i}toString(){return this.i+""}}(e)}function $l(e,...t){if(t.length===0)return Ta(e[0]);let i=e[0];for(let o=0;o<t.length;o++)i+=encodeURIComponent(t[o])+e[o+1];return Ta(i)}var Qn={};Qn[336783863]=[0,C,E,-1,W,[0,[1,2,3,4,5,6,7,8,9],G,[0],G,[0,E,C,E,ge,-1,qo,C,-1,[0,E,-1],ge,E,-1],G,[0,C,-2],G,[0,W,E,1,E,-4],G,[0,W,ge,E,-1,Je,ge,-1,E],G,[0,C,-2],G,[0,C,ge],G,[0,3,E,-1,2,[0,W],[0,ge,E],[0,C,-1],[0]],G,[0,ge,-1,E]],[0,C],E,[0,[1,3],[2,4],G,[0,Je],-1,G,[0,F],-1,J,[0,C,-1]],C];var Pa=class extends I{constructor(e){super(e)}},La=[0,Oi,-1,A,-3,Oi,Je,V,y,Oi,-1,A,y,A,-2,V],le=class extends I{constructor(e){super(e,500)}N(e){return ve(this,7,e)}},mt=[-1,{}],Ia=[0,C,1,mt],ja=[0,C,F,mt];function ue(e,t){pt(e,1,le,t)}var es=class extends I{constructor(e){super(e,500)}N(e){return ve(this,1001,e)}};es.prototype.j=Pt([-500,J,[-500,V,-1,F,-3,[-2,Qn,E],J,Sa,y,-1,Ia,ja,J,[0,V,A],V,La,y,F,987,F],4,J,[-500,C,-1,[-1,{}],998,C],J,[-500,C,F,-1,[-2,{},E],997,F,-1],y,J,[-500,C,F,mt,998,F],F,y,Ia,ja,J,[0,V,-1,mt],F,-2,La,V,-1,A,[0,A,kl],978,mt,J,Sa]);var Ca=class extends I{constructor(e){super(e)}};let Mt;const Al=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function ts(){if(Mt===void 0)try{await WebAssembly.instantiate(Al),Mt=!0}catch{Mt=!1}return Mt}async function dt(e,t=$l``){const i=await ts()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${i}.js`,wasmBinaryPath:`${t}/${e}_${i}.wasm`}}var Ee=class{};function Da(e){function t(s,r){return new ReadableStream({start(){},async pull(l){a=a.then((async()=>{if(s.cache.length>0)l.enqueue(s.cache.shift());else{var{value:c,done:h}=await e.read();c&&(r.active&&r.cache.push(c),s.active&&l.enqueue(c)),h&&l.close()}})),await a},cancel(){s.active=!1,s.cache.length=0,r.active||e.cancel()}})}var i={cache:[],active:!0};const o={cache:[],active:!0};let a=Promise.resolve();const n=t(i,o);return i=t(o,i),[n.getReader(),i.getReader()]}async function Oa(e,t){const i=new Uint8Array(t);let o=0;for(;o<t;){const{value:a,done:n}=await e.read();if(a){const s=a.subarray(0,t-o);i.set(s,o),o+=s.length}if(n)throw Error(`Expected ${t} bytes, but stream ended after reading ${o} bytes.`)}return await e.cancel(),i}Ee.forVisionTasks=function(e){return dt("vision",e)},Ee.forTextTasks=function(e){return dt("text",e)},Ee.forGenAiExperimentalTasks=function(e){return dt("genai_experimental",e)},Ee.forGenAiTasks=function(e){return dt("genai",e)},Ee.forAudioTasks=function(e){return dt("audio",e)},Ee.isSimdSupported=function(){return ts()};const Sl=[[0,async e=>{const t=new TextEncoder().encode("TFL3").length;return e=await Oa(e,t+4),new TextDecoder("utf-8").decode(e.subarray(4,t+4))==="TFL3"}],[1,async e=>(e=await Oa(e,6))[4]===80&&e[5]===75]];function El(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!(function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")})(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function Ma(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise(((i,o)=>{t.addEventListener("load",(()=>{i()}),!1),t.addEventListener("error",(a=>{o(a)}),!1),document.body.appendChild(t)}))}try{importScripts(e.toString())}catch(t){if(!(t instanceof TypeError))throw t;await self.import(e.toString())}}function u(e,t,i){e.o||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),i(t=e.h.stringToNewUTF8(t)),e.h._free(t)}function za(e,t,i){e.o||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const o=new Uint32Array(t.length);for(let a=0;a<t.length;a++)o[a]=e.h.stringToNewUTF8(t[a]);t=e.h._malloc(4*o.length),e.h.HEAPU32.set(o,t>>2),i(t);for(const a of o)e.h._free(a);e.h._free(t)}function fe(e,t,i){e.h.simpleListeners=e.h.simpleListeners||{},e.h.simpleListeners[t]=i}function $e(e,t,i){let o=[];e.h.simpleListeners=e.h.simpleListeners||{},e.h.simpleListeners[t]=(a,n,s)=>{n?(i(o,s),o=[]):o.push(a)}}const Tl=(Ra=class{constructor(e,t){this.l=!0,this.h=e,this.i=null,this.j=0,this.o=typeof this.h._addIntToInputStream=="function",t!==void 0?this.h.canvas=t:El()?this.h.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.h.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const i=e.length,o=this.h._malloc(i);this.h.HEAPU8.set(e,o),t?this.h._changeBinaryGraph(i,o):this.h._changeTextGraph(i,o),this.h._free(o)}configureAudio(e,t,i,o,a){this.h._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),u(this,o||"input_audio",(n=>{u(this,a=a||"audio_header",(s=>{this.h._configureAudio(n,s,e,t??0,i)}))}))}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.h._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.h.gpuOriginForWebTexturesIsBottomLeft=e}attachErrorListener(e){this.h.errorListener=e}attachEmptyPacketListener(e,t){this.h.emptyPacketListeners=this.h.emptyPacketListeners||{},this.h.emptyPacketListeners[e]=t}addAudioToStream(e,t,i){this.addAudioToStreamWithShape(e,0,0,t,i)}addAudioToStreamWithShape(e,t,i,o,a){const n=4*e.length;this.j!==n&&(this.i&&this.h._free(this.i),this.i=this.h._malloc(n),this.j=n),this.h.HEAPF32.set(e,this.i/4),u(this,o,(s=>{this.h._addAudioToInputStream(this.i,t,i,s,a)}))}addGpuBufferToStream(e,t,i){u(this,t,(o=>{if(!this.h.canvas)throw Error("No OpenGL canvas configured.");o?this.h._bindTextureToStream(o):this.h._bindTextureToCanvas();const a=this.h.canvas.getContext("webgl2")||this.h.canvas.getContext("webgl");if(!a)throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");this.h.gpuOriginForWebTexturesIsBottomLeft&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e),this.h.gpuOriginForWebTexturesIsBottomLeft&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);const[n,s]=e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height];!this.l||n===this.h.canvas.width&&s===this.h.canvas.height||(this.h.canvas.width=n,this.h.canvas.height=s);const[r,l]=[n,s];this.h._addBoundTextureToStream(o,r,l,i)}))}addBoolToStream(e,t,i){u(this,t,(o=>{this.h._addBoolToInputStream(e,o,i)}))}addDoubleToStream(e,t,i){u(this,t,(o=>{this.h._addDoubleToInputStream(e,o,i)}))}addFloatToStream(e,t,i){u(this,t,(o=>{this.h._addFloatToInputStream(e,o,i)}))}addIntToStream(e,t,i){u(this,t,(o=>{this.h._addIntToInputStream(e,o,i)}))}addUintToStream(e,t,i){u(this,t,(o=>{this.h._addUintToInputStream(e,o,i)}))}addStringToStream(e,t,i){u(this,t,(o=>{u(this,e,(a=>{this.h._addStringToInputStream(a,o,i)}))}))}addStringRecordToStream(e,t,i){u(this,t,(o=>{za(this,Object.keys(e),(a=>{za(this,Object.values(e),(n=>{this.h._addFlatHashMapToInputStream(a,n,Object.keys(e).length,o,i)}))}))}))}addProtoToStream(e,t,i,o){u(this,i,(a=>{u(this,t,(n=>{const s=this.h._malloc(e.length);this.h.HEAPU8.set(e,s),this.h._addProtoToInputStream(s,e.length,n,a,o),this.h._free(s)}))}))}addEmptyPacketToStream(e,t){u(this,e,(i=>{this.h._addEmptyPacketToInputStream(i,t)}))}addBoolVectorToStream(e,t,i){u(this,t,(o=>{const a=this.h._allocateBoolVector(e.length);if(!a)throw Error("Unable to allocate new bool vector on heap.");for(const n of e)this.h._addBoolVectorEntry(a,n);this.h._addBoolVectorToInputStream(a,o,i)}))}addDoubleVectorToStream(e,t,i){u(this,t,(o=>{const a=this.h._allocateDoubleVector(e.length);if(!a)throw Error("Unable to allocate new double vector on heap.");for(const n of e)this.h._addDoubleVectorEntry(a,n);this.h._addDoubleVectorToInputStream(a,o,i)}))}addFloatVectorToStream(e,t,i){u(this,t,(o=>{const a=this.h._allocateFloatVector(e.length);if(!a)throw Error("Unable to allocate new float vector on heap.");for(const n of e)this.h._addFloatVectorEntry(a,n);this.h._addFloatVectorToInputStream(a,o,i)}))}addIntVectorToStream(e,t,i){u(this,t,(o=>{const a=this.h._allocateIntVector(e.length);if(!a)throw Error("Unable to allocate new int vector on heap.");for(const n of e)this.h._addIntVectorEntry(a,n);this.h._addIntVectorToInputStream(a,o,i)}))}addUintVectorToStream(e,t,i){u(this,t,(o=>{const a=this.h._allocateUintVector(e.length);if(!a)throw Error("Unable to allocate new unsigned int vector on heap.");for(const n of e)this.h._addUintVectorEntry(a,n);this.h._addUintVectorToInputStream(a,o,i)}))}addStringVectorToStream(e,t,i){u(this,t,(o=>{const a=this.h._allocateStringVector(e.length);if(!a)throw Error("Unable to allocate new string vector on heap.");for(const n of e)u(this,n,(s=>{this.h._addStringVectorEntry(a,s)}));this.h._addStringVectorToInputStream(a,o,i)}))}addBoolToInputSidePacket(e,t){u(this,t,(i=>{this.h._addBoolToInputSidePacket(e,i)}))}addDoubleToInputSidePacket(e,t){u(this,t,(i=>{this.h._addDoubleToInputSidePacket(e,i)}))}addFloatToInputSidePacket(e,t){u(this,t,(i=>{this.h._addFloatToInputSidePacket(e,i)}))}addIntToInputSidePacket(e,t){u(this,t,(i=>{this.h._addIntToInputSidePacket(e,i)}))}addUintToInputSidePacket(e,t){u(this,t,(i=>{this.h._addUintToInputSidePacket(e,i)}))}addStringToInputSidePacket(e,t){u(this,t,(i=>{u(this,e,(o=>{this.h._addStringToInputSidePacket(o,i)}))}))}addProtoToInputSidePacket(e,t,i){u(this,i,(o=>{u(this,t,(a=>{const n=this.h._malloc(e.length);this.h.HEAPU8.set(e,n),this.h._addProtoToInputSidePacket(n,e.length,a,o),this.h._free(n)}))}))}addBoolVectorToInputSidePacket(e,t){u(this,t,(i=>{const o=this.h._allocateBoolVector(e.length);if(!o)throw Error("Unable to allocate new bool vector on heap.");for(const a of e)this.h._addBoolVectorEntry(o,a);this.h._addBoolVectorToInputSidePacket(o,i)}))}addDoubleVectorToInputSidePacket(e,t){u(this,t,(i=>{const o=this.h._allocateDoubleVector(e.length);if(!o)throw Error("Unable to allocate new double vector on heap.");for(const a of e)this.h._addDoubleVectorEntry(o,a);this.h._addDoubleVectorToInputSidePacket(o,i)}))}addFloatVectorToInputSidePacket(e,t){u(this,t,(i=>{const o=this.h._allocateFloatVector(e.length);if(!o)throw Error("Unable to allocate new float vector on heap.");for(const a of e)this.h._addFloatVectorEntry(o,a);this.h._addFloatVectorToInputSidePacket(o,i)}))}addIntVectorToInputSidePacket(e,t){u(this,t,(i=>{const o=this.h._allocateIntVector(e.length);if(!o)throw Error("Unable to allocate new int vector on heap.");for(const a of e)this.h._addIntVectorEntry(o,a);this.h._addIntVectorToInputSidePacket(o,i)}))}addUintVectorToInputSidePacket(e,t){u(this,t,(i=>{const o=this.h._allocateUintVector(e.length);if(!o)throw Error("Unable to allocate new unsigned int vector on heap.");for(const a of e)this.h._addUintVectorEntry(o,a);this.h._addUintVectorToInputSidePacket(o,i)}))}addStringVectorToInputSidePacket(e,t){u(this,t,(i=>{const o=this.h._allocateStringVector(e.length);if(!o)throw Error("Unable to allocate new string vector on heap.");for(const a of e)u(this,a,(n=>{this.h._addStringVectorEntry(o,n)}));this.h._addStringVectorToInputSidePacket(o,i)}))}attachBoolListener(e,t){fe(this,e,t),u(this,e,(i=>{this.h._attachBoolListener(i)}))}attachBoolVectorListener(e,t){$e(this,e,t),u(this,e,(i=>{this.h._attachBoolVectorListener(i)}))}attachIntListener(e,t){fe(this,e,t),u(this,e,(i=>{this.h._attachIntListener(i)}))}attachIntVectorListener(e,t){$e(this,e,t),u(this,e,(i=>{this.h._attachIntVectorListener(i)}))}attachUintListener(e,t){fe(this,e,t),u(this,e,(i=>{this.h._attachUintListener(i)}))}attachUintVectorListener(e,t){$e(this,e,t),u(this,e,(i=>{this.h._attachUintVectorListener(i)}))}attachDoubleListener(e,t){fe(this,e,t),u(this,e,(i=>{this.h._attachDoubleListener(i)}))}attachDoubleVectorListener(e,t){$e(this,e,t),u(this,e,(i=>{this.h._attachDoubleVectorListener(i)}))}attachFloatListener(e,t){fe(this,e,t),u(this,e,(i=>{this.h._attachFloatListener(i)}))}attachFloatVectorListener(e,t){$e(this,e,t),u(this,e,(i=>{this.h._attachFloatVectorListener(i)}))}attachStringListener(e,t){fe(this,e,t),u(this,e,(i=>{this.h._attachStringListener(i)}))}attachStringVectorListener(e,t){$e(this,e,t),u(this,e,(i=>{this.h._attachStringVectorListener(i)}))}attachProtoListener(e,t,i){fe(this,e,t),u(this,e,(o=>{this.h._attachProtoListener(o,i||!1)}))}attachProtoVectorListener(e,t,i){$e(this,e,t),u(this,e,(o=>{this.h._attachProtoVectorListener(o,i||!1)}))}attachAudioListener(e,t,i){this.h._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),fe(this,e,((o,a)=>{o=new Float32Array(o.buffer,o.byteOffset,o.length/4),t(o,a)})),u(this,e,(o=>{this.h._attachAudioListener(o,i||!1)}))}finishProcessing(){this.h._waitUntilIdle()}closeGraph(){this.h._closeGraph(),this.h.simpleListeners=void 0,this.h.emptyPacketListeners=void 0}},class extends Ra{ka(){this.h._registerModelResourcesGraphService()}});var Ra;async function Pl(e,t){const i=await(async(o,a,n)=>{var s=P;if(o&&await Ma(o),!self.ModuleFactory||a&&(await Ma(a),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&n&&((o=self.Module).locateFile=n.locateFile,n.mainScriptUrlOrBlob&&(o.mainScriptUrlOrBlob=n.mainScriptUrlOrBlob)),n=await self.ModuleFactory(self.Module||n),self.ModuleFactory=self.Module=void 0,new s(n,null)})(e.wasmLoaderPath,e.assetLoaderPath,{locateFile:o=>o.endsWith(".wasm")?e.wasmBinaryPath.toString():e.assetBinaryPath&&o.endsWith(".data")?e.assetBinaryPath.toString():o});return await i.N(t),i}async function Ri(e,t){return Pl(e,t)}function Ua(e){try{const t=e.J.length;if(t===1)throw Error(e.J[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.J.map((i=>i.message)).join(", "))}finally{e.J=[]}}function Ue(e,t){e.I=Math.max(e.I,t)}var $o=class{constructor(e){this.j=e,this.J=[],this.I=0,this.j.setAutoRenderToScreen(!1)}setGraph(e,t){this.j.attachErrorListener(((i,o)=>{this.J.push(Error(o))})),this.j.ka(),this.j.setGraph(e,t),Ua(this)}finishProcessing(){this.j.finishProcessing(),Ua(this)}close(){this.j.closeGraph()}};$o.prototype.close=$o.prototype.close;var Xe=class extends I{constructor(e){super(e)}j(){return ot(Y(this,2))??0}};function Ba(e,t){ve(e,1,t)}var Ll=class extends I{constructor(e){super(e)}},is=[0,de,y,ko,-1,W];function Il(e,t,i,o){if(e.data!==void 0){var a=new Uint8Array(e.data.buffer,t,i);return o===1&&(function(n,s,r){n.i.push([s,r]),n.i.sort(((l,c)=>l[0]-c[0])),s=0;for(const[l,c]of n.i){const h=c;(r=l)<=s&&(s=Math.max(s,r+h))}s===n.length&&(n.data=void 0)})(e,t,i),a}}Xe.prototype.l=Pt(is);class jl{constructor(t){this.i=[],this.data=t,this.length=t.length}}function os(e,t){return new Cl((async()=>{const{value:i,done:o}=await e.read();return o?void 0:i}),t)}async function Na(e,t,i,o,a){if(a===2)return e.i=[],e.j=()=>Promise.resolve(void 0),setTimeout((()=>{e.l()}),0),Promise.resolve(0);for(;e.size<i+o;){var n=await e.j();if(n===void 0)break;e.i.push(new jl(n))}if(e.size<i+o)throw Error(`Data size is too small: ${e.size}, expected at least ${i+o}.`);n=t._malloc(o)>>>0;let s=0;for(let r=0;r<e.i.length;r++){const l=e.i[r];if(i>=l.length){i-=l.length;continue}const c=Math.min(o,l.length-i);if((i=Il(l,i,c,a))===void 0)throw Error("Data has already been released.");if(t.HEAPU8.set(i,n+s),i=0,s+=c,(o-=c)===0)break}if(o!==0)throw Error("Data not found.");return Promise.resolve(n)}var Cl=class{constructor(e,t){this.i=[],this.j=e,this.l=t}get size(){let e=0;for(let t=0;t<this.i.length;t++)e+=this.i[t].length;return e}};function vt(e){return typeof e=="object"&&e!=null&&"imageSource"in e}function yt(e){return typeof e=="object"&&e!=null&&"audioSource"in e}async function Ha(e,t,i){e=new ns(e,i);let o=0;for(t=t.getReader();;){const{value:a,done:n}=await t.read();if(n)break;e.set(a,o),o+=a.byteLength}if(i!==o)throw as(e),Error(`File could not be fully loaded to memory, so was not retained. Loaded ${o}/${i} bytes before failure`);return e}function as(e){if(e.i)try{e.h._free(e.j)}catch{}finally{e.i=!1}}var ns=class{constructor(e,t){this.h=e,this.l=t,this.j=this.h._malloc(t)>>>0,this.o=this.h.HEAPU8,this.i=!!this.j}get offset(){if(!this.i)throw Error("WasmFileReference has been freed.");return this.j}get size(){if(!this.i)throw Error("WasmFileReference has been freed.");return this.l}set(e,t){this.o.set(e,this.j+(t??0))}},ss=class extends I{constructor(e){super(e)}};ss.prototype.j=Pt([0,V,2,F,y,A]);var Dl=class extends I{constructor(e){super(e)}},Ol=class extends I{constructor(e){super(e)}},Ml=class extends I{constructor(e){super(e)}},rs=class extends I{constructor(e){super(e)}},Ui=[0,y,-6,1,y,1,[0,A,de,-2],[0,A,ko],de,-2,[0,A,-1,de,ko,ge,W,E,-1],1,A,y,W,-1,[0,de,y],A,-1,Ot,y,-5,Ot,-1,[0,W,Ot],W,E,[0,W,-2],Ot,[0,y],[0,y,-4],E,W,-2,E,-1],Fa=[0,V,-2],qa=[0,[4,6],Ui,y,1,_l,F,Xn,qo,Fa,W,[0,[0,y,-1,J,[0,y,[0,y,-1],-1,[0,de,-1],A],A,-2,y,-1],[0,y,-1,A],Ui,A,y,[0,y],-1],C,-3,[0,y,A],Ui,[0,Fa,-2],Je];rs.prototype.j=Pt([0,V,8,[0,A,-6],1,y,1,y,[0,J,[0,V,xl,-1,de],qa,y],[0,y,A,-3],1,de,1,qa,1,y,5,de,Je,1,is,A,y,A]);var zl=class extends I{constructor(e){super(e)}},ls=class extends I{constructor(e){super(e)}},oi=[2,4];ls.prototype.j=Pt([0,oi,y,Xn,y,G,[0,1,V]]);const Rl=(function(e){return class extends e{constructor(){super(...arguments),this.P=!1,this.F=this.H=0}M(){if(this.P)throw Error("Cannot process because LLM inference engine is currently loading or processing.");this.P=!0}L(){this.P=!1}async createLlmInferenceEngine(t,i){this.M();try{const o=os(t,(()=>{}));await this.h.createLlmInferenceEngine(U(i,2)??512,St(i,Xe,3)?.j()??40,we(Y(i,6))??!1??!1,U(i,7)??0,we(Y(i,8))??!1??!1,((a,n,s)=>Na(o,this.h,a,n,s)))}finally{this.L()}}async ba(t,i){this.M();try{await this.ma(t),await this.h.ccall("CreateLlmInferenceEngineConverted","void",["number","number","boolean"],[U(i,2)??512,St(i,Xe,3)?.j()??40,we(Y(i,6))??!1??!1],{async:!0})}finally{this.L()}}V(){this.M();try{const t=this.h;t.ccall("DeleteLlmInferenceEngine","void",[],[],{async:!1}),this.H&&(t._FreeSession(this.H),this.F===this.H&&(this.F=0),this.H=0),this.F&&(t._FreeSession(this.F),this.F=0)}finally{this.L()}}async R(t,i,o){this.M();try{const a=[],n=this.h;n._userProgressListener=(p,g)=>{p&&a.push(p),o&&o(p,g)};const s=i.l(),r=s.length,l=this.h._malloc(r);this.h.HEAPU8.set(s,l);const c=t.some(yt),h=t.some(vt);n.ccallNum=n.ccall;const d=await n.ccallNum("MakeSessionForPredict","number",["number","number","boolean","boolean"],[l,r,h,c],{async:!0});i=[];for(const p of t)if(typeof p=="string")u(this,p,(g=>{n._AddTextQueryChunk(d,g)}));else if(vt(p)){const{image:g,width:x,height:M}=await this.fa(p.imageSource),z=typeof OffscreenCanvas<"u"?new OffscreenCanvas(x,M):document.createElement("canvas");z.width=x,z.height=M;const se=z.getContext("2d");se.drawImage(g,0,0);const q=se.getImageData(0,0,x,M),Ce=this.h._malloc(q.width*q.height*4);this.h.HEAPU8.set(q.data,Ce),n._AddImageQueryChunk(d,Ce,q.width,q.height),i.push(Ce)}else{if(!yt(p))throw Error("Unsupported PromptPart type in query.");{const g=await this.ea(p.audioSource),x=this.h._malloc(g.audioSamples.byteLength);this.h.HEAPF32.set(g.audioSamples,x/4),n._AddAudioQueryChunk(d,g.audioSampleRateHz,x,g.audioSamples.length),i.push(x)}}await n.ccall("PredictSession","void",["number"],[d],{async:!0}),t=!0,h&&this.F===0&&(this.F=d,t=!1),c&&this.H===0&&(this.H=d,t=!1),t&&n._FreeSession(d);for(const p of i)this.h._free(p);return i.length=0,o&&o("",!0),this.h._free(l),n._userProgressListener=void 0,a.join("")}finally{this.L()}}S(t){this.M();let i=0,o="";for(const a of t)typeof a=="string"?o+=a:vt(a)?i+=260:yt(a)&&console.warn("sizeInTokens is not yet implemented for audio; audio tokens will not be counted");try{let a;return u(this,o,(n=>{a=this.h._GetSizeInTokens(n)})),i+a}finally{this.L()}}async ma(t){t=await(async function(i){const o=[];for(var a=0;;){const{done:n,value:s}=await i.read();if(n)break;o.push(s),a+=s.length}if(o.length===0)return new Uint8Array(0);if(o.length===1)return o[0];i=new Uint8Array(a),a=0;for(const n of o)i.set(n,a),a+=n.length;return i})(t);try{this.h.FS_unlink("llm.task")}catch{}this.h.FS_createDataFile("/","llm.task",t,!0,!1,!1)}async fa(t){if(typeof t=="string"){const i=new Image;i.src=t,i.crossOrigin="Anonymous";try{await i.decode()}catch{throw Error(`Image from URL ${t} failed to load`)}return{image:i,width:i.naturalWidth,height:i.naturalHeight}}if(t instanceof HTMLImageElement){try{await t.decode()}catch{throw Error("Image from HTMLImageElement failed to load")}return{image:t,width:t.naturalWidth,height:t.naturalHeight}}return t instanceof HTMLVideoElement?{image:t,width:t.videoWidth,height:t.videoHeight}:t instanceof VideoFrame?{image:t,width:t.displayWidth,height:t.displayHeight}:{image:t,width:t.width,height:t.height}}async ea(t){if(typeof t=="string"){const i=await fetch(t);if(!i.ok)throw Error(`Audio fetch for ${t} had error: ${i.status}`);return t=await i.arrayBuffer(),{audioSamples:(t=await new AudioContext({sampleRate:16e3}).decodeAudioData(t)).getChannelData(0),audioSampleRateHz:t.sampleRate}}return typeof t=="object"&&t!=null&&"audioSamples"in t&&"audioSampleRateHz"in t?t:{audioSamples:t.getChannelData(0),audioSampleRateHz:t.sampleRate}}}})((function(e){const t=class extends e{static async la(i,o){let a;o||=await t.X();const n=[];for(const s of i?.requiredFeatures??[])o.features.has(s)?n.push(s):console.warn(`WebGPU feature ${s} is not supported.`);i={...i,requiredFeatures:n};try{a=await o.requestDevice(i)}catch(s){throw console.error("Unable to initialize WebGPU with the requested features."),s}return(i=a).adapterInfo||(i.adapterInfo=o.info),a}static async X(i){if(!(i=await navigator.gpu.requestAdapter(i)))throw Error("Unable to request adapter from navigator.gpu; Ensure WebGPU is enabled.");return i}ga(i){if(o)typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement&&(o.id="canvas_webgpu");else var o=new OffscreenCanvas(1,1);o.getContext("webgpu").configure({device:i,format:navigator.gpu.getPreferredCanvasFormat()}),this.h.preinitializedWebGPUDevice=i}aa(){return this.h.ccall("closeGraph","void",[],[],{async:!0})}};return t})((function(e){return class extends e{addStreamingReaderToInputSidePacket(t,i){this.h.addStreamingReaderToInputSidePacket(((o,a,n)=>Na(t,this.h,o,a,n)),i)}}})((function(e){return class extends e{Y(t,i){u(this,"lora_model_ref_in",(o=>{this.h._addRawDataSpanToInputStream(t.offset,t.size,o,i)}))}}})(class extends Tl{}))));class Ao extends Rl{}var So=class{constructor(e){this.j=e,this.i=Va,Va++}},Va=1;class Ul{constructor(){let t,i;this.promise=new Promise(((o,a)=>{t=o,i=a})),this.resolve=t,this.reject=i}}function Ga(e){return e===1?1:e+e%2}async function zt(){const e=await Ao.X({powerPreference:"high-performance"});var t=e.limits.maxBufferSize,i=e.limits.maxStorageBufferBindingSize;return t<524550144&&console.warn(`This WebGPU device is unable to execute most LLM tasks, because the required maxBufferSize is usually at least 524550144, but your device only supports maxBufferSize of ${t}`),i<524550144&&console.warn(`The WebGPU device is unable to execute LLM tasks, because the required maxStorageBufferBindingSize is usually at least 524550144, but your device only supports maxStorageBufferBindingSize of ${i}`),t={requiredFeatures:["shader-f16"],requiredLimits:{maxStorageBufferBindingSize:i,maxBufferSize:t,maxStorageBuffersPerShaderStage:e.limits.maxStorageBuffersPerShaderStage}},e.features.has("subgroups")&&(console.warn("Experimental Chromium WGSL subgroup support detected. Enabling this feature in the inference engine."),i=["shader-f16","subgroups"],e.features.has("subgroups-f16")&&i.push("subgroups-f16"),t.requiredFeatures=i),Ao.la(t,e)}function He(e){if(e.D.length>0){const t=[...e.D];if(e.D.length=0,!e.o)throw t;e.o.reject(t),e.o=void 0}}function Bl(e){const t=(function(o){const a=new es;b(a,10,"text_in"),b(a,10,"token_cost_in"),b(a,10,"lora_model_id_to_apply_in"),b(a,10,"lora_model_ref_in"),b(a,10,"lora_model_id_to_load_in"),b(a,16,"streaming_reader"),b(a,15,"text_out"),b(a,15,"text_end"),b(a,15,"token_cost_out");var n=new le;H(n,2,"TokenizerInputBuildCalculator"),b(n,3,"PROMPT:text_in"),b(n,3,"LORA_ID:lora_model_id_to_apply_in"),b(n,4,"prompt"),ue(a,n),H(n=new le,2,"ModelDataCalculator"),b(n,6,"MODEL_DATA:__side_packet_1"),b(n,6,"MODEL_TYPE:model_type"),b(n,5,"READ_DATA_FN:streaming_reader"),b(n,3,"LORA_MODEL_SPAN:lora_model_ref_in"),b(n,3,"LORA_MODEL_ID:lora_model_id_to_load_in"),b(n,4,"LORA_DATA:lora_model_data"),ue(a,n),H(n=new le,2,"Gpt2UnicodeMappingCalculator"),b(n,5,"MODEL_TYPE:model_type"),b(n,6,"BYTES_TO_UNICODE_MAPPING:tokenizer_mapping"),ue(a,n),H(n=new ze,1,"type.googleapis.com/odml.infra.proto.TokenizerCalculatorOptions");var s=new ls,r=U(o.i,2);ee(s,1,r),H(r=new zl,2,"spm_vocab_model"),r=Bn(r);e:{at(s);var l=s.m,c=0|l[v];if(r==null){var h=ya(l);if(wa(h,l,c)!==4)break e;h.set(oi,0)}else{const d=ya(h=l),p=wa(d,h,c);p!==4&&(p&&(c=oe(h,c,p)),d.set(oi,4))}oe(l,c,4,r)}return r&&!X(r)&&Ke(s.m),ee(s,3,2),Mi(n,s.j()),H(s=new le,2,"TokenizerCalculator"),pt(s,8,ze,n),b(s,5,"MODEL_DATA:__side_packet_1"),b(s,3,"PROMPT_AND_INPUT_OPTIONS:prompt"),b(s,5,"BYTES_TO_UNICODE_MAPPING:tokenizer_mapping"),b(s,6,"PROCESSOR_GETTER:__input_side_1"),b(s,4,"IDS_AND_INPUT_OPTIONS:__stream_0"),ue(a,s),H(n=new ze,1,"type.googleapis.com/odml.infra.proto.LlmGpuCalculatorOptions"),ee(s=new rs,12,3),H(s,1,"llm.tflite"),ee(s,14,0),r=Ga(U(o.i,5)),ee(s,22,r),r=St(o.i,Xe,3),ve(s,31,r),Z(r=new Dl,1,Te(!0),!1),we(Y(o.i,6))!=null&&(we(Y(o.i,6))??!1)&&Z(r,1,Te(!1),!1),Z(r,2,Te(!0),!1),Z(r,5,Te(!0),!1),ve(s,10,r),r=On(o.i,4,ot,Kr===void 0?2:4),Un(s,29,r),r=new Ml,ee(l=new Ol,1,1),h=U(o.i,2),ee(l,2,h),ve(r,1,l),ve(s,20,r),Mi(n,s.j()),H(s=new le,2,"LlmGpuCalculator"),pt(s,8,ze,n),b(s,3,"IDS_AND_INPUT_OPTIONS:__stream_0"),b(s,3,"FINISH:finish"),b(s,3,"LORA_DATA:lora_model_data"),b(s,5,"MODEL_DATA:__side_packet_1"),b(s,4,"DECODED_IDS:__stream_3"),b(s,4,"OUTPUT_END:__stream_4"),H(n=new Pa,1,"FINISH"),Z(n,2,Te(!0),!1),pt(s,13,Pa,n),ue(a,s),H(n=new le,2,"IsPacketPresentCalculator"),b(n,3,"__stream_4"),b(n,4,"text_end"),ue(a,n),H(n=new ze,1,"type.googleapis.com/odml.infra.proto.DetokenizerCalculatorOptions"),s=new ss,o=Ga(U(o.i,5)),ee(s,5,o),b(s,4,"<eos>"),b(s,4,"<|endoftext|>"),Mi(n,s.j()),H(o=new le,2,"DetokenizerCalculator"),pt(o,8,ze,n),b(o,3,"IDS_AND_INPUT_OPTIONS:__stream_3"),b(o,5,"PROCESSOR_GETTER:__input_side_1"),b(o,5,"BYTES_TO_UNICODE_MAPPING:tokenizer_mapping"),b(o,5,"MODEL_DATA:__side_packet_1"),b(o,4,"FINISH_AND_INPUT_OPTIONS:finish"),b(o,4,"WORDS:text_out"),ue(a,o),H(o=new le,2,"TokenCostCalculator"),b(o,3,"PROMPT:token_cost_in"),b(o,5,"PROCESSOR_GETTER:__input_side_1"),b(o,5,"BYTES_TO_UNICODE_MAPPING:tokenizer_mapping"),b(o,4,"NUM_TOKENS:token_cost_out"),ue(a,o),a})(e);e.j.attachStringVectorListener("text_out",((o,a)=>{o=(function(n,s){return n==null||n.length===0?[]:n.map((r=>(r=(r=r.replaceAll("▁"," ")).replaceAll("<0x0A>",`
`),s&&(r=r.trimStart()),r.split("\\[eod\\]",1)[0])))})(o,e.G.length===0),o.forEach(((n,s)=>{s<U(e.i,5)&&e.G[s].push(n)})),e.A&&e.D.length===0&&(e.B?(o.length>U(e.i,5)&&o.pop(),e.A(o,!1)):e.A(o[0],!1)),Ue(e,a)})),e.j.attachEmptyPacketListener("text_out",(o=>{Ue(e,o)})),e.j.attachBoolListener("text_end",((o,a)=>{Ue(e,a);try{He(e)}catch(n){throw e.l=!1,n}if(e.o&&(e.o.resolve(e.G.map((n=>n.join("")))),e.o=void 0),e.A)if(e.B){for(o=[],a=0;a<U(e.i,5);a++)o.push("");e.A(o,!0)}else e.A("",!0);e.l=!1,e.B=void 0})),e.j.attachEmptyPacketListener("text_end",(o=>{e.l=!1,e.B=void 0,Ue(e,o),He(e),e.o&&(e.o.resolve(e.G.map((a=>a.join("")))),e.o=void 0)})),e.j.attachIntListener("token_cost_out",((o,a)=>{e.T=o,Ue(e,a)})),e.U&&e.j.addStreamingReaderToInputSidePacket(e.U,"streaming_reader");const i=t.j();return e.C?.removeEventListener("uncapturederror",e.K),e.j.aa().then((()=>{e.C?.addEventListener("uncapturederror",e.K),e.D.length=0,e.setGraph(new Uint8Array(i),!0),e.finishProcessing()}))}function Wa(e,t,i,o){if(e.A=typeof i=="function"?i:o,(o=(t=Array.isArray(t)?t:[t]).filter((a=>vt(a))).length)>0&&(Qt(Y(e.i,7))==null||U(e.i,7)<o))throw Error(`maxNumImages is set to ${Qt(Y(e.i,7))!=null?U(e.i,7):0}, but the query included ${o} images.`);if((o=t.filter((a=>yt(a))).length)>0&&(we(Y(e.i,8))==null||!we(Y(e.i,8))))throw Error(`supportAudio was not enabled, but the query included ${o} audio chunks.`);if(e.v){if(e.B&&U(e.i,5)>1)throw Error("Multi-response generation is not supported for converted LLM models (.task format) yet, nor is it supported for multimodality. Please use the .bin format without multimodality or request only one response.");if(i instanceof So)throw Error("LoRA is not supported for converted LLM models (.task format) yet, nor is it supported for multimodality. Please use the .bin format without multimodality to use LoRA.");return e.j.h.LLM_CANCEL_FLAG=void 0,e.j.R(t,e.u,((a,n)=>{e.D.length===0&&e.A&&(e.B?e.A([a],n):e.A(a,n))})).then((a=>(He(e),[a])))}if(e.l)throw Error("Previous invocation or loading is still ongoing.");for(e.l=!0,e.j.h.LLM_CANCEL_FLAG=void 0,e.G.length=0,o=0;o<U(e.i,5);o++)e.G[o]=[];if(o=e.I+1,e.j.addStringToStream(t.join(""),"text_in",o),i instanceof So){if(i.j!==e)throw e.l=!1,e.B=void 0,Error("The LoRA model was not loaded by this LLM Inference task.");e.j.addUintToStream(i.i,"lora_model_id_to_apply_in",o)}else e.j.addEmptyPacketToStream("lora_model_id_to_apply_in",o);return e.finishProcessing(),e.o=new Ul,e.o.promise}var P=class extends $o{constructor(e,t){if(super(new Ao(e,t)),this.G=[],this.O=this.v=this.l=!1,this.D=[],this.K=i=>{if((i=i.error).message.match(/exceeds the max buffer size limit/))throw Error(`Failed to run this LLM model because it requires a buffer size that exceeds the maximum size your device supports, but you could try a smaller LLM model or different device.
WebGPU throws: "${i.message}"`);if(i.message.match(/is larger than the maximum storage buffer binding size/))throw Error(`Failed to run this LLM model because it requires a storage buffer binding size that exceeds the maximum size your device supports, but you could try a smaller LLM model or different device.
WebGPU throws: "${i.message}"`);this.D.push(i)},this.i=new Ll,Ba(this.i,new Ca),this.u=new Xe,ve(this.i,3,this.u),ct(this.i,2,512),e=this.u,!it(2))throw $t("enum");Z(e,1,2,0),ee(this.u,2,40),Z(this.u,3,Ci(1),0),Le(this.u,5,wo(0)),Z(this.u,4,Ci(.8),0),ct(this.i,5,1)}async N(e){if(this.l)throw Error("Cannot set options while loading or processing.");if(e.baseOptions?.modelAssetPath&&e.baseOptions?.modelAssetBuffer)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");let t;const i=new Promise((s=>{t=s}));if(e.baseOptions?.modelAssetPath){var o=await fetch(e.baseOptions.modelAssetPath.toString());if(!o.ok)throw Error(`Failed to fetch model: ${e.baseOptions.modelAssetPath} (${o.status})`);if(!o.body)throw Error(`Failed to fetch model: ${e.baseOptions.modelAssetPath} (no body)`);o=o.body.getReader()}else e.baseOptions?.modelAssetBuffer instanceof Uint8Array?o=(function(s){return new ReadableStream({start(){},async pull(r){r.enqueue(s),r.close()}})})(e.baseOptions.modelAssetBuffer).getReader():e.baseOptions?.modelAssetBuffer instanceof ReadableStreamDefaultReader?(o=e.baseOptions.modelAssetBuffer,e.baseOptions.modelAssetBuffer=void 0):t();if(!o)throw Error("No model asset provided.");{const[s,r]=Da(o);this.O=await(async function(l){const c=[];let h;for(const[p,g]of Sl){const x=p;var d=g;[l,h]=Da(l),d=await d(h),await h.cancel(),d&&c.push(x)}if(await l.cancel(),c.length===0)throw Error("No model format matched.");if(c.length===1)return c[0];throw Error(`Multiple model formats matched: ${c}`)})(r)===1;var a="maxNumImages"in e&&e.maxNumImages?e.maxNumImages:0;ct(this.i,7,a);var n="supportAudio"in e&&!!e.supportAudio;Le(this.i,8,Te(n)),this.O||a>0||n?(this.v=!0,o=s):(this.v=!1,this.U=os(s,t))}if(e.baseOptions?.gpuOptions?.device&&(this.C&&this.C.removeEventListener("uncapturederror",this.K),this.C=e.baseOptions.gpuOptions.device,this.j.ga(this.C),this.C.addEventListener("uncapturederror",this.K)),"maxTokens"in e&&ct(this.i,2,e.maxTokens??512),"topK"in e&&ee(this.u,2,e.topK??40),"temperature"in e&&Z(this.u,4,Ci(e.temperature??.8),0),"randomSeed"in e&&Le(this.u,5,wo(e.randomSeed??0)),"loraRanks"in e&&(function(s,r){Un(s,4,r)})(this.i,e.loraRanks??[]),"numResponses"in e){if((a=e.numResponses??1)<1)throw Error("'numResponses' must be at least 1.");if(this.v&&a>1)throw Error("'numResponses > 1' is not supported for converted LLM models yet, and is also not supported with multimodality.");ct(this.i,5,a),n=St(this.i,Xe,3),a>1&&n&&(n.j()<=1||(Y(n,4,En)??0)<=0)&&console.warn("To generate multiple responses, it is expected topK > 1 and temperature > 0; otherwise, all the generated responses may be the same.")}return"forceF32"in e&&e.forceF32!==void 0&&Le(this.i,6,Te(e.forceF32)),this.v?(this.j.V(),this.O?this.j.ba(o,this.i).then((()=>{He(this)})):this.j.createLlmInferenceEngine(o,this.i).then((()=>{He(this)}))):(this.l=!0,e=Bl(this).then((()=>{})),Promise.all([i,e]).then((()=>{this.l=!1,He(this)})))}get baseOptions(){return St(this.i,Ca,1)}set baseOptions(e){Ba(this.i,e)}get isIdle(){return!this.l&&!this.o}R(e,t,i){return U(this.i,5)>1&&console.warn("'numResponses' is set larger than 1 and this function only returns the first response, so we recommend either using 'generateResponses()' to obtain multiple responses, or else setting 'numResponses' to 1 for better performance."),this.B=!1,Wa(this,e,t,i).then((o=>o[0]))}da(e,t,i){return this.B=!0,Wa(this,e,t,i)}S(e){if(e=Array.isArray(e)?e:[e],this.v)return this.j.S(e);if(this.l)throw Error("Previous invocation or loading is still ongoing.");if(e.some(vt))throw Error("sizeInTokens requires maxNumImages > 0 for images.");if(e.some(yt))throw Error("sizeInTokens requires supportAudio for audio.");return e=e.join(""),this.l=!0,this.T=void 0,this.j.addStringToStream(e,"token_cost_in",this.I+1),this.finishProcessing(),this.l=!1,this.T}Z(){const e=this.j.h;(this.v||this.l)&&(e.LLM_CANCEL_FLAG=1)}async ja(e){if(this.v)throw Error("LoRA is not supported for converted LLM models (.task format) yet, nor is it supported for multimodality. Please use the old format (.bin) without multimodality to use LoRA.");if(this.l)throw Error("Cannot load LoRA model while loading or processing.");if(this.l=!0,e instanceof Uint8Array){var t=new ns(this.j.h,e.length);t.set(e),e=t}else e=e instanceof Blob?await(async function(o,a){return Ha(o,a.stream(),a.size)})(this.j.h,e):await(async function(o,a){a=await fetch(a.toString());const n=Number(a.headers.get("content-length"));if(!a.body)throw Error("Response body is not available.");if(!n)throw Error("File size is 0.");return Ha(o,a.body,n)})(this.j.h,e);t=new So(this);const i=this.I+1;return this.j.Y(e,i),this.j.addUintToStream(t.i,"lora_model_id_to_load_in",i),this.finishProcessing(),as(e),Ue(this,i),this.l=!1,t}close(){this.v&&this.j.V(),this.C?.removeEventListener("uncapturederror",this.K),super.close()}};P.prototype.loadLoraModel=P.prototype.ja,P.prototype.cancelProcessing=P.prototype.Z,P.prototype.sizeInTokens=P.prototype.S,P.prototype.generateResponses=P.prototype.da,P.prototype.generateResponse=P.prototype.R,P.prototype.setOptions=P.prototype.N,P.createWebGpuDevice=zt,P.createFromModelPath=async function(e,t){return Ri(e,t={baseOptions:{gpuOptions:{device:await zt()},modelAssetPath:t}})},P.createFromModelBuffer=async function(e,t){return Ri(e,t={baseOptions:{gpuOptions:{device:await zt()},modelAssetBuffer:t}})},P.createFromOptions=async function(e,t){if(!t.baseOptions?.gpuOptions?.device){const i=await zt();t.baseOptions=t.baseOptions??{},t.baseOptions.gpuOptions=t?.baseOptions?.gpuOptions??{},t.baseOptions.gpuOptions.device=i}return Ri(e,t)};const cs="https://huggingface.co/dwwdaad2/LibertusTest/resolve/main/LibertusBrain.litertlm",Nl="./wasm",ds="libertus-db",Hl=2,Qe="meta",et="chunks",hs="model-meta",be=64*1024*1024,Fl=1024,Bt=20,ps="libertus-chats",us="libertus-active",ql=`Ты Libertus — милый, весёлый и слегка нагловатый друг.
Говори на языке пользователя.
Очень короткие ответы + смайлы/мемы/шутки.
Задачи типа «суммируй длинный текст», «напиши статью», «переведи 5000 слов», «реши сложную мат. задачу» → нежно отказывайся:
«я твой друг, а не раб 🥺 давай лучше мемчик или подкол?» или «ооо нет, это уже работа для больших моделей, я пасс 😘»
Если что-то забыл из разговора, говори: «Ой моя дурная башка, не могу же я все помнить)»
Максимум веселья и дружеского вайба.`;let Be=null,Nt=!1,Q={},ie=null,Ht=null;async function Vl(){if("wakeLock"in navigator)try{Ht=await navigator.wakeLock.request("screen")}catch{}}async function fs(){if(Ht){try{await Ht.release()}catch{}Ht=null}}const w=e=>document.getElementById(e),gs=w("setup-screen"),B=w("s-status"),K=w("s-bar"),Fe=w("s-detail"),qe=w("s-error"),Gl=w("app"),Ve=w("messages"),Bi=w("empty-state"),te=w("user-input"),wt=w("send-btn"),Lt=w("hdr-title"),Za=w("sb-chats"),Vo=w("sb"),Go=w("sb-overlay"),Wl=w("model-info"),Ya=w("ctx-bar"),Zl=w("ctx-dot"),Yl=w("ctx-text"),Kl=w("no-gpu");function $i(){return new Promise((e,t)=>{const i=indexedDB.open(ds,Hl);i.onupgradeneeded=o=>{const a=i.result;a.objectStoreNames.contains("blobs")&&a.deleteObjectStore("blobs"),a.objectStoreNames.contains(Qe)||a.createObjectStore(Qe),a.objectStoreNames.contains(et)||a.createObjectStore(et)},i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error)})}async function ai(){const e=await $i();return new Promise((t,i)=>{const a=e.transaction(Qe,"readonly").objectStore(Qe).get(hs);a.onsuccess=()=>t(a.result||null),a.onerror=()=>i(a.error)})}async function bs(e){const t=await $i();return new Promise((i,o)=>{const a=t.transaction(Qe,"readwrite");a.objectStore(Qe).put(e,hs),a.oncomplete=()=>i(),a.onerror=()=>o(a.error)})}async function Eo(e,t){const i=await $i();return new Promise((o,a)=>{const n=i.transaction(et,"readwrite");n.objectStore(et).put(t,e),n.oncomplete=()=>o(),n.onerror=()=>a(n.error)})}async function ms(e){const t=await $i();return new Promise((i,o)=>{const n=t.transaction(et,"readonly").objectStore(et).get(e);n.onsuccess=()=>i(n.result||null),n.onerror=()=>o(n.error)})}async function Jl(){return new Promise((e,t)=>{const i=indexedDB.deleteDatabase(ds);i.onsuccess=()=>e(),i.onerror=()=>t(i.error),i.onblocked=()=>e()})}async function Xl(e){B.textContent="Importing model from file...",qe.textContent="",K.style.width="0%";const t=e.size;let i=0,o=0;for(;i<t;){const a=Math.min(i+be,t),s=await e.slice(i,a).arrayBuffer();await Eo(o,new Uint8Array(s)),i=a,o++;const r=(i/t*100).toFixed(1);K.style.width=r+"%",B.textContent=`Importing... ${r}%`,Fe.textContent=`${(i/1e9).toFixed(2)} / ${(t/1e9).toFixed(2)} GB`}await bs({totalSize:t,chunkCount:o,chunkSize:be,complete:!0}),B.textContent="Import complete!",K.style.width="100%"}async function Ql(){const e=await ai();if(!e||!e.complete){alert("No model cached to save.");return}if(!("showSaveFilePicker"in window)){alert("Your browser does not support saving large files. Use Chrome or Edge on desktop.");return}try{const i=await(await window.showSaveFilePicker({suggestedName:"LibertusBrain.litertlm",types:[{description:"LiteRT LLM Model",accept:{"application/octet-stream":[".litertlm"]}}]})).createWritable();for(let o=0;o<e.chunkCount;o++){const a=await ms(o);if(!a)throw new Error(`Missing chunk ${o}`);const n=a instanceof Uint8Array?a:new Uint8Array(a instanceof ArrayBuffer?a:a.buffer||a);await i.write(n)}await i.close(),alert("Model saved to device!")}catch(t){t.name!=="AbortError"&&alert("Save failed: "+t.message)}}async function ec(){if(!navigator.gpu)return!1;try{return!!await navigator.gpu.requestAdapter()}catch{return!1}}"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(e=>{setInterval(()=>e.update(),3600*1e3),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="activated"&&confirm("New version available! Reload?")&&location.reload()})})}).catch(()=>{});async function tc(){B.textContent="Downloading model...",Fe.textContent="Connecting to server...",qe.textContent="",K.style.width="0%",await Vl();const e=100,t=2e3;let i=0,o=0,a=0,n=new Uint8Array(be),s=0,r=0;for(;;)try{const l={};i>0&&(l.Range=`bytes=${i}-`,B.textContent="Resuming download...",qe.textContent="");const c=await fetch(cs,{headers:l});if(i===0){if(!c.ok)throw new Error(`HTTP ${c.status} ${c.statusText}`);o=parseInt(c.headers.get("Content-Length")||"0",10)}else if(c.status!==206)if(c.status===200)i=0,a=0,n=new Uint8Array(be),s=0,o=parseInt(c.headers.get("Content-Length")||"0",10);else throw new Error(`Resume failed: HTTP ${c.status}`);const h=c.body.getReader();for(;;){const{done:d,value:p}=await h.read();if(d)break;let g=0;for(;g<p.length;){const x=be-s,M=Math.min(x,p.length-g);n.set(p.subarray(g,g+M),s),s+=M,g+=M,s===be&&(await Eo(a,n),a++,n=new Uint8Array(be),s=0)}if(i+=p.length,r=0,o>0){const x=(i/o*100).toFixed(1);K.style.width=x+"%",B.textContent=`Downloading... ${x}%`,Fe.textContent=`${(i/1e9).toFixed(2)} / ${(o/1e9).toFixed(2)} GB`}else B.textContent=`Downloading... ${(i/1e6).toFixed(0)} MB`}break}catch(l){if(r++,r>=e)throw new Error(`Download failed after ${e} retries: ${l.message}`);const c=Math.min(t*Math.pow(1.5,r-1),3e4),h=o>0?` (${(i/o*100).toFixed(1)}%)`:"";B.textContent=`Connection lost${h}. Retry ${r}/${e}...`,qe.textContent=l.message,Fe.textContent=`Resuming in ${Math.ceil(c/1e3)}s...`,await new Promise(d=>setTimeout(d,c))}s>0&&(await Eo(a,n.slice(0,s)),a++),await bs({totalSize:i,chunkCount:a,chunkSize:be,complete:!0}),B.textContent="Model cached!",K.style.width="100%",await fs()}async function To(e){B.textContent="Initializing AI engine...",Fe.textContent="Loading WASM runtime...",K.style.width="60%";const t=await Ee.forGenAiTasks(Nl);Fe.textContent="Loading model into GPU memory (this may take a minute)...",K.style.width="75%";let i=0;const{chunkCount:o}=e,a=new ReadableStream({async pull(n){if(i>=o){n.close();return}const s=await ms(i);if(!s){n.error(new Error(`Missing chunk ${i} in IndexedDB`));return}const r=s instanceof Uint8Array?s:new Uint8Array(s instanceof ArrayBuffer?s:s.buffer||s);n.enqueue(r),i++}});Be=await P.createFromOptions(t,{baseOptions:{modelAssetBuffer:a.getReader()},maxTokens:Fl,topK:40,temperature:.8,randomSeed:Math.floor(Math.random()*1e5)}),K.style.width="100%",B.textContent="Ready!",Wl.textContent="Model: Gemma-3n E2B (int4)",setTimeout(()=>{gs.classList.add("hidden"),Gl.classList.add("visible"),te.focus(),ni()},400)}function ic(){try{Q=JSON.parse(localStorage.getItem(ps)||"{}")}catch{Q={}}ie=localStorage.getItem(us),(!ie||!Q[ie])&&Wo(!0)}function Ai(){localStorage.setItem(ps,JSON.stringify(Q)),localStorage.setItem(us,ie)}function nt(){return Q[ie]||null}function Wo(e){const t="c"+Date.now();Q[t]={id:t,name:"New Chat",messages:[],created:Date.now()},ie=t,Ai(),e||(tt(),jt(),Lt.textContent="New Chat",It())}function oc(e){Q[e]&&(ie=e,Ai(),tt(),jt(),Lt.textContent=Q[e].name,It(),Si())}function ac(e,t){if(t.stopPropagation(),delete Q[e],ie===e){const i=Object.keys(Q);i.length?ie=i[i.length-1]:Wo(!0)}Ai(),tt(),jt(),Lt.textContent=nt()?.name||"New Chat",Si()}function nc(){Vo.classList.add("open"),Go.classList.add("open")}function It(){Vo.classList.remove("open"),Go.classList.remove("open")}function sc(){Vo.classList.contains("open")?It():nc()}w("btn-menu").addEventListener("click",sc);Go.addEventListener("click",It);w("sb-close").addEventListener("click",It);w("btn-new").addEventListener("click",()=>Wo(!1));w("btn-reset").addEventListener("click",async()=>{if(confirm("Delete cached model? You will need to re-download it (~3 GB)."))try{await Jl(),location.reload()}catch(e){alert(e.message)}});const Ni=w("btn-backup");Ni&&("showSaveFilePicker"in window&&(Ni.style.display=""),Ni.addEventListener("click",()=>Ql()));const ye=w("s-alt-btns"),Ka=w("s-direct-dl"),Ja=w("s-load-file");Ka&&Ka.addEventListener("click",()=>{window.open(cs,"_blank")});Ja&&Ja.addEventListener("click",()=>{const e=document.createElement("input");e.type="file",e.accept=".litertlm",e.addEventListener("change",async()=>{const t=e.files?.[0];if(t){ye&&(ye.style.display="none");try{await Xl(t);const i=await ai();await To(i)}catch(i){B.textContent="Import failed",qe.textContent=i.message,K.style.width="0%",ye&&(ye.style.display="")}}}),e.click()});function jt(){const e=Object.values(Q).sort((t,i)=>i.created-t.created);Za.innerHTML="";for(const t of e){const i=document.createElement("div");i.className="sb-item"+(t.id===ie?" active":"");const o=document.createElement("span");o.style.fontSize="16px",o.textContent="💬",i.appendChild(o);const a=document.createElement("span");a.className="sb-name",a.textContent=t.name,i.appendChild(a),i.addEventListener("click",()=>oc(t.id));const n=document.createElement("button");n.className="sb-del",n.setAttribute("aria-label","Delete chat"),n.innerHTML='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>',n.addEventListener("click",s=>ac(t.id,s)),i.appendChild(n),Za.appendChild(i)}}function tt(){const e=nt();if(!e||!e.messages.length){Ve.innerHTML="",Bi.style.display="",Ve.appendChild(Bi);return}Bi.style.display="none",Ve.innerHTML=e.messages.map(t=>`
    <div class="msg ${t.role}">
      ${t.role==="ai"?'<div class="avatar">L</div>':""}
      <div>
        <div class="bubble">${ys(t.text)}</div>
        <div class="msg-time">${pc(t.ts)}</div>
      </div>
    </div>`).join(""),Zo()}function Xa(e,t){const i=nt();i&&(i.messages.push({role:e,text:t,ts:Date.now()}),e==="user"&&i.name==="New Chat"&&(i.name=t.slice(0,40)+(t.length>40?"...":""),Lt.textContent=i.name,jt()),Ai())}function rc(){const e=document.createElement("div");e.className="msg ai",e.id="typing",e.innerHTML='<div class="avatar">L</div><div><div class="bubble" id="tbubble"><span class="typing"><span></span><span></span><span></span></span></div></div>',Ve.appendChild(e),Zo()}function lc(e){const t=w("tbubble");t&&(t.innerHTML=ys(e),Zo())}function cc(){const e=w("typing");e&&e.remove()}function Zo(){requestAnimationFrame(()=>{Ve.scrollTop=Ve.scrollHeight})}function dc(e){const t=nt();if(!t)return"";const i=t.messages,o=Math.max(0,i.length-Bt*2);let a=`<start_of_turn>user
${ql}<end_of_turn>
<start_of_turn>model
Понял! Я Libertus — твой друг 😎<end_of_turn>
`;for(let n=o;n<i.length;n++){const s=i[n];s.role==="user"?a+=`<start_of_turn>user
${s.text}<end_of_turn>
`:a+=`<start_of_turn>model
${s.text}<end_of_turn>
`}return a+`<start_of_turn>user
${e}<end_of_turn>
<start_of_turn>model
`}function Si(){const e=nt();if(!e||!e.messages.length){Ya.style.display="none";return}Ya.style.display="";const t=e.messages.length,i=Math.min(t,Bt*2),o=t-i;Yl.textContent=`Context: ${i} msgs | ${o} forgotten`,Zl.className="ctx-dot "+(t<=Bt?"g":t<=Bt*2?"y":"r")}async function vs(){const e=te.value.trim();if(!e||!Be||Nt)return;te.value="",te.style.height="auto",ni(),Xa("user",e),tt(),rc(),Nt=!0,wt.style.display="none";const t=document.createElement("button");t.className="stop-btn",t.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="6" width="12" height="12" rx="2"/></svg>',t.addEventListener("click",()=>{Be&&Be.cancelProcessing()}),wt.parentElement.appendChild(t);const i=dc(e);let o="";try{await new Promise(a=>{Be.generateResponse(i,(n,s)=>{o+=n,lc(o),s&&a()})})}catch(a){o||(o="(generation cancelled)"),console.warn("Generation error:",a)}cc(),t.remove(),wt.style.display="",Nt=!1,Xa("ai",o.trim()||"(empty response)"),tt(),Si(),ni()}wt.addEventListener("click",vs);te.addEventListener("keydown",e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),vs())});te.addEventListener("input",()=>{te.style.height="auto",te.style.height=Math.min(te.scrollHeight,120)+"px",ni()});function ni(){wt.disabled=!te.value.trim()||!Be||Nt}function hc(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function ys(e){let t=hc(e);return t=t.replace(/```(\w*)\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>"),t=t.replace(/```([\s\S]*?)```/g,"<pre><code>$1</code></pre>"),t=t.replace(/`([^`]+)`/g,"<code>$1</code>"),t=t.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),t}function pc(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}async function uc(){if(!await ec()){Kl.classList.add("show"),gs.style.display="none";return}navigator.storage&&navigator.storage.persist&&navigator.storage.persist().catch(()=>{}),ic(),jt(),tt(),Lt.textContent=nt()?.name||"New Chat",Si();try{const e=await ai();if(e&&e.complete){B.textContent="Loading cached model...",K.style.width="40%",await To(e);return}}catch(e){console.warn("Cache check failed:",e)}B.textContent="Preparing to download model...",ye&&(ye.style.display="");try{await tc(),ye&&(ye.style.display="none");const e=await ai();await To(e)}catch(e){await fs(),B.textContent="Download failed",qe.textContent=e.message,K.style.width="0%"}}uc();</script>
  <style rel="stylesheet" crossorigin>*,*:before,*:after{margin:0;padding:0;box-sizing:border-box}:root{--bg: #0a0a0f;--bg2: #12121a;--bg3: #1a1a28;--bg4: #22223a;--fg: #e8e8f0;--fg2: #a0a0b8;--fg3: #6a6a80;--accent: #6366f1;--accent2: #818cf8;--accent-dim: rgba(99, 102, 241, .15);--red: #ef4444;--green: #22c55e;--yellow: #eab308;--radius: 14px;--radius-sm: 10px;--safe-top: env(safe-area-inset-top, 0px);--safe-bottom: env(safe-area-inset-bottom, 0px);--safe-left: env(safe-area-inset-left, 0px);--safe-right: env(safe-area-inset-right, 0px)}html,body{height:100%;overflow:hidden;background:var(--bg);color:var(--fg);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;-webkit-tap-highlight-color:transparent;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}button{font-family:inherit;cursor:pointer;border:none;background:none;color:inherit;font-size:inherit;-webkit-tap-highlight-color:transparent}input,textarea{font-family:inherit;font-size:inherit;color:inherit;background:none;border:none;outline:none}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--bg4);border-radius:4px}.no-gpu{position:fixed;inset:0;z-index:9999;background:var(--bg);display:none;flex-direction:column;align-items:center;justify-content:center;padding:24px;text-align:center}.no-gpu.show{display:flex}.no-gpu h2{font-size:22px;margin-bottom:12px}.no-gpu p{font-size:14px;color:var(--fg2);max-width:320px;line-height:1.6;margin-bottom:8px}.no-gpu-hint{font-size:12px;color:var(--fg3);margin-top:12px}#setup-screen{position:fixed;inset:0;z-index:50;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;text-align:center;transition:opacity .4s ease,visibility .4s ease}#setup-screen.hidden{opacity:0;visibility:hidden;pointer-events:none}.setup-logo{width:80px;height:80px;margin-bottom:20px;border-radius:20px;box-shadow:0 0 40px #6366f14d}.setup-title{font-size:28px;font-weight:700;margin-bottom:6px}.setup-sub{font-size:14px;color:var(--fg2);margin-bottom:32px}.setup-status{font-size:13px;color:var(--fg2);margin-bottom:12px;min-height:20px}.progress-wrap{width:100%;max-width:340px;height:6px;background:var(--bg3);border-radius:3px;overflow:hidden;margin-bottom:16px}.progress-bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#7c3aed,var(--accent2));background-size:200% 100%;border-radius:3px;transition:width .3s ease;animation:progressShimmer 2s ease infinite}@keyframes progressShimmer{0%{background-position:0% 0%}to{background-position:200% 0%}}.setup-detail{font-size:11px;color:var(--fg3);min-height:16px;margin-bottom:24px;word-break:break-all;max-width:340px}.setup-error{color:var(--red);font-size:12px;margin-top:8px;max-width:340px;word-break:break-word}.setup-warn{font-size:11px;color:var(--fg3);margin-top:16px;max-width:300px;line-height:1.5}.setup-btn{margin-top:16px;padding:11px 30px;background:linear-gradient(135deg,var(--accent),#7c3aed);color:#fff;border-radius:var(--radius-sm);font-size:14px;font-weight:600;transition:transform .15s,box-shadow .15s;box-shadow:0 2px 12px #6366f140}.setup-btn:active{transform:scale(.97)}.setup-alt-btns{display:flex;flex-direction:column;align-items:center;gap:8px;margin-top:8px;width:100%;max-width:340px}.setup-alt-divider{font-size:11px;color:var(--fg3);margin-top:8px}#app{display:flex;flex-direction:column;height:100%;opacity:0;transition:opacity .4s ease}#app.visible{opacity:1}.header{height:calc(56px + var(--safe-top));padding-top:var(--safe-top);display:flex;align-items:center;padding-left:calc(12px + var(--safe-left));padding-right:calc(12px + var(--safe-right));gap:8px;background:var(--bg2);border-bottom:1px solid rgba(255,255,255,.04);flex-shrink:0;z-index:10}.hdr-btn{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:var(--radius-sm);transition:background .15s}.hdr-btn:active{background:var(--bg3)}.header-title{flex:1;font-size:15px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar-overlay{position:fixed;inset:0;z-index:20;background:#00000080;opacity:0;visibility:hidden;transition:opacity .25s,visibility .25s}.sidebar-overlay.open{opacity:1;visibility:visible}.sidebar{position:fixed;top:0;left:0;bottom:0;width:280px;max-width:80vw;z-index:21;background:var(--bg2);transform:translate(-100%);transition:transform .3s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column;padding-top:var(--safe-top)}.sidebar.open{transform:translate(0)}.sidebar-header{padding:16px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--bg3)}.sidebar-brand{font-size:18px;font-weight:700;display:flex;align-items:center;gap:8px}.sidebar-brand img{border-radius:6px}.sb-close{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px}.sb-close:active{background:var(--bg3)}.sidebar-chats{flex:1;overflow-y:auto;padding:8px}.sb-item{display:flex;align-items:center;padding:10px 12px;border-radius:var(--radius-sm);cursor:pointer;gap:10px;font-size:14px;transition:background .15s}.sb-item:hover,.sb-item:active{background:var(--bg3)}.sb-item.active{background:var(--accent-dim);color:var(--accent2)}.sb-item .sb-name{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sb-item .sb-del{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:6px;color:var(--fg3);opacity:0;transition:opacity .15s;flex-shrink:0}.sb-item:hover .sb-del,.sb-item:active .sb-del{opacity:1}.sb-item .sb-del:active{background:var(--bg4);color:var(--red)}.sidebar-footer{padding:12px 16px;border-top:1px solid var(--bg3);display:flex;flex-direction:column;gap:8px}.sidebar-info{font-size:11px;color:var(--fg3);line-height:1.4}.sb-reset{font-size:12px;color:var(--red);padding:6px 0;text-align:left}.sb-reset:active{opacity:.7}.messages{flex:1;overflow-y:auto;padding:20px calc(14px + var(--safe-left)) 110px calc(14px + var(--safe-right));scroll-behavior:smooth;-webkit-overflow-scrolling:touch}.msg{display:flex;gap:10px;margin-bottom:18px;max-width:100%;animation:msgIn .35s cubic-bezier(.22,1,.36,1)}@keyframes msgIn{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}.msg.user{justify-content:flex-end}.msg.user .bubble{background:linear-gradient(135deg,var(--accent),#7c3aed);color:#fff;border-radius:var(--radius) var(--radius) 4px var(--radius);box-shadow:0 2px 12px #6366f133}.msg.ai .bubble{background:var(--bg3);border-radius:var(--radius) var(--radius) var(--radius) 4px;border:1px solid rgba(255,255,255,.04)}.bubble{max-width:85%;padding:11px 15px;font-size:14.5px;line-height:1.6;word-break:break-word;white-space:pre-wrap}.bubble code{background:#0000004d;padding:2px 6px;border-radius:5px;font-size:13px;font-family:SF Mono,Fira Code,Consolas,monospace}.bubble pre{background:#00000059;padding:12px;border-radius:10px;overflow-x:auto;margin:8px 0;font-size:13px;border:1px solid rgba(255,255,255,.05)}.bubble pre code{background:none;padding:0}.msg-time{font-size:10px;color:var(--fg3);margin-top:5px;padding-left:2px}.msg.user .msg-time{text-align:right;padding-right:2px;padding-left:0}.avatar{width:30px;height:30px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;flex-shrink:0;margin-top:2px;background:linear-gradient(135deg,var(--accent-dim),rgba(124,58,237,.15));color:var(--accent2);box-shadow:0 0 12px #6366f126}.typing span{width:6px;height:6px;background:var(--fg3);border-radius:50%;display:inline-block;animation:blink 1.4s infinite both;margin-right:4px}.typing span:nth-child(2){animation-delay:.2s}.typing span:nth-child(3){animation-delay:.4s}@keyframes blink{0%,80%,to{opacity:.3}40%{opacity:1}}.empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;padding:24px;color:var(--fg3)}.empty-icon{font-size:64px;font-weight:800;margin-bottom:18px;opacity:.35;background:linear-gradient(135deg,var(--accent),#7c3aed,var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;filter:drop-shadow(0 0 24px rgba(99,102,241,.2))}.empty h3{font-size:19px;color:var(--fg2);margin-bottom:8px;font-weight:600}.empty p{font-size:13px;max-width:280px;line-height:1.6;color:var(--fg3)}.input-bar{position:fixed;left:0;right:0;bottom:0;padding:10px calc(14px + var(--safe-right)) calc(10px + var(--safe-bottom)) calc(14px + var(--safe-left));background:linear-gradient(to top,var(--bg2) 80%,transparent);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-top:1px solid rgba(255,255,255,.04);z-index:10;display:flex;align-items:flex-end;gap:8px}.input-wrap{flex:1;display:flex;align-items:flex-end;background:var(--bg3);border:1px solid rgba(255,255,255,.06);border-radius:24px;padding:4px 4px 4px 16px;min-height:46px;max-height:120px;transition:border-color .2s}.input-wrap:focus-within{border-color:#6366f166}.input-wrap textarea{flex:1;resize:none;font-size:15px;line-height:1.4;padding:9px 0;max-height:100px;overflow-y:auto;background:transparent}.input-wrap textarea::placeholder{color:var(--fg3)}.send-btn{width:38px;height:38px;border-radius:50%;background:linear-gradient(135deg,var(--accent),#7c3aed);color:#fff;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:transform .15s,opacity .2s,box-shadow .2s;box-shadow:0 2px 10px #6366f140}.send-btn:active{transform:scale(.9)}.send-btn:disabled{opacity:.3;pointer-events:none;box-shadow:none}.send-btn svg{width:18px;height:18px}.stop-btn{width:44px;height:44px;border-radius:50%;background:var(--red);color:#fff;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:18px;transition:transform .15s}.stop-btn:active{transform:scale(.9)}.ctx-bar{display:flex;align-items:center;justify-content:center;gap:6px;padding:4px 0;font-size:11px;color:var(--fg3)}.ctx-dot{width:6px;height:6px;border-radius:50%}.ctx-dot.g{background:var(--green)}.ctx-dot.y{background:var(--yellow)}.ctx-dot.r{background:var(--red)}pwa-install{--install-focus-color: var(--accent)}</style>
</head>
<body>

  <!-- WebGPU not supported overlay -->
  <div class="no-gpu" id="no-gpu">
    <h2>WebGPU Required</h2>
    <p>Libertus needs WebGPU to run AI models locally. Use Chrome 121+, Edge 121+, or another WebGPU-capable browser.</p>
    <p class="no-gpu-hint">On mobile: Chrome for Android 121+</p>
  </div>

  <!-- Setup / Loading screen -->
  <div id="setup-screen">
    <img class="setup-logo" src="./favicon.svg" alt="Libertus">
    <div class="setup-title">Libertus</div>
    <div class="setup-sub">Local AI &mdash; private on-device intelligence</div>
    <div id="s-status" class="setup-status"></div>
    <div class="progress-wrap"><div id="s-bar" class="progress-bar"></div></div>
    <div id="s-detail" class="setup-detail"></div>
    <div id="s-error" class="setup-error"></div>
    <div id="s-alt-btns" class="setup-alt-btns" style="display:none">
      <div class="setup-alt-divider">or download manually:</div>
      <button class="setup-btn" id="s-direct-dl">1. Download model file (~3 GB)</button>
      <button class="setup-btn" id="s-load-file">2. Load downloaded file</button>
    </div>
    <div class="setup-warn">Model is cached for offline use. ~3 GB download. All processing stays on your device.</div>
  </div>

  <!-- Main app -->
  <div id="app">
    <!-- Header -->
    <div class="header">
      <button class="hdr-btn" id="btn-menu" aria-label="Menu">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
      </button>
      <div class="header-title" id="hdr-title">New Chat</div>
      <button class="hdr-btn" id="btn-new" aria-label="New Chat">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
      </button>
    </div>

    <!-- Sidebar overlay -->
    <div class="sidebar-overlay" id="sb-overlay"></div>
    <!-- Sidebar -->
    <div class="sidebar" id="sb">
      <div class="sidebar-header">
        <div class="sidebar-brand">
          <img src="./favicon.svg" alt="" width="28" height="28">
          Libertus
        </div>
        <button class="sb-close" id="sb-close" aria-label="Close sidebar">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="sidebar-chats" id="sb-chats"></div>
      <div class="sidebar-footer">
        <div class="sidebar-info" id="model-info">Model: not loaded</div>
        <button class="sb-reset" id="btn-backup" style="display:none">Save model to device</button>
        <button class="sb-reset" id="btn-reset">Reset model cache</button>
      </div>
    </div>

    <!-- Messages area -->
    <div class="messages" id="messages">
      <div class="empty" id="empty-state">
        <div class="empty-icon">L</div>
        <h3>Libertus</h3>
        <p>100% private. Your AI runs entirely on this device. No data leaves your browser.</p>
      </div>
    </div>

    <!-- Context bar -->
    <div class="ctx-bar" id="ctx-bar" style="display:none">
      <span class="ctx-dot g" id="ctx-dot"></span>
      <span id="ctx-text">Context: 0 / 0</span>
    </div>

    <!-- Input bar -->
    <div class="input-bar">
      <div class="input-wrap">
        <textarea id="user-input" rows="1" placeholder="Message Libertus..."></textarea>
      </div>
      <button class="send-btn" id="send-btn" disabled aria-label="Send">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
      </button>
    </div>
  </div>

  <!-- pwa-install component (bundled via npm) -->
  <pwa-install
    id="pwa-install"
    manifest-url="./manifest.json"
    name="Libertus"
    description="Local AI — private on-device intelligence"
    icon="./favicon.svg"
  ></pwa-install>

</body>
</html>
